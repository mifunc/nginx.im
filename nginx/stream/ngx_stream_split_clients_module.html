<!DOCTYPE html>
<html lang="zh-cn">
<head>
<title>stream/ngx_stream_split_clients_module-nginx中文手册</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="None"/>
<meta name="keywords" content="...,split,clients,remote,addr"/>
</head>
<body>
<div id="content"><h2 class="notranslate">Module ngx_stream_split_clients_module</h2><table width="100%"><tbody><tr><td align="left" class="notranslate"> <a href="#example">Example Configuration</a> <br> <a href="#directives">Directives</a> <br>     <a href="#split_clients">split_clients</a> <br></td></tr></tbody></table><a name="summary"></a><p>   <code class="notranslate">ngx_stream_split_clients_module</code>模块（1.11.3）创建适用于A / B测试的变量，也称为拆分测试。 </p><a name="example"></a><center><h4>  示例配置 </h4></center><p></p><blockquote class="example"><pre class="notranslate">stream {
    ...
    split_clients "${remote_addr}AAA" $upstream {
                  0.5%                feature_test1;
                  2.0%                feature_test2;
                  *                   production;
    }

    server {
        ...
        proxy_pass $upstream;
    }
}
</pre></blockquote><p></p><a name="directives"></a><center><h4>  指令 </h4></center><a name="split_clients"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate">
            Syntax:
                </th><td class="notranslate">
            <code class="notranslate"><strong>split_clients</strong> 
    <code class="notranslate"><i>string</i></code>
    <code class="notranslate"><i>$variable</i></code> { ... }</code> <br>
                </td></tr><tr><th class="notranslate">
            Default:
                </th><td class="notranslate">
            
            —
        
                </td></tr><tr><th class="notranslate">
            Context:
                </th><td class="notranslate">
            <code class="notranslate">stream</code> <br>
                </td></tr></tbody></table></div><p>  为A / B测试创建变量，例如： </p><blockquote class="example"><pre class="notranslate">split_clients "${remote_addr}AAA" $variant {
               0.5%               .one;
               2.0%               .two;
               *                  "";
}
</pre></blockquote><p>  使用MurmurHash2对原始字符串的值进行哈希处理。  在给出的示例中，从0到21474835（0.5％）的哈希值对应于<code class="notranslate">$variant</code>变量的值<code class="notranslate">".one"</code> ，从21474836到107374180（2％）的哈希值对应于值<code class="notranslate">".two"</code>和哈希值从107374181到4294967295的值对应于值<code class="notranslate">""</code> （空字符串）。 </p> 
<span></span><div style="display: none;"></div></div>
</body>
</html>