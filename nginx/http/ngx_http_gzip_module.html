<!DOCTYPE html>
<html lang="zh-cn">
<head>
<title>http/ngx_http_gzip_module-nginx中文手册</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="None"/>
<meta name="keywords" content="gzip,off,min,length,proxied"/>
</head>
<body>
<div id="content"><h2 class="notranslate">Module ngx_http_gzip_module</h2><table width="100%"><tbody><tr><td align="left" class="notranslate"> <a href="#example">Example Configuration</a> <br> <a href="#directives">Directives</a> <br>     <a href="#gzip">gzip</a> <br>     <a href="#gzip_buffers">gzip_buffers</a> <br>     <a href="#gzip_comp_level">gzip_comp_level</a> <br>     <a href="#gzip_disable">gzip_disable</a> <br>     <a href="#gzip_http_version">gzip_http_version</a> <br>     <a href="#gzip_min_length">gzip_min_length</a> <br>     <a href="#gzip_proxied">gzip_proxied</a> <br>     <a href="#gzip_types">gzip_types</a> <br>     <a href="#gzip_vary">gzip_vary</a> <br> <a href="#variables">Embedded Variables</a> <br></td></tr></tbody></table><a name="summary"></a><p>   <code class="notranslate">ngx_http_gzip_module</code>模块是一个使用“gzip”方法压缩响应的过滤器。  这通常有助于将传输数据的大小减少一半甚至更多。 </p><a name="example"></a><center><h4>  示例配置 </h4></center><p></p><blockquote class="example"><pre class="notranslate">gzip            on;
gzip_min_length 1000;
gzip_proxied    expired no-cache no-store private auth;
gzip_types      text/plain application/xml;
</pre></blockquote><p></p><p>   <code class="notranslate">$gzip_ratio</code>变量可用于记录实现的压缩比。 </p><a name="directives"></a><center><h4>  指令 </h4></center><a name="gzip"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate">
            Syntax:
                </th><td class="notranslate">
            <code class="notranslate"><strong>gzip</strong> <code class="notranslate">on</code> | <code class="notranslate">off</code> ;</code> <br>
                </td></tr><tr><th class="notranslate">
            Default:
                </th><td class="notranslate">
            <pre class="notranslate">gzip off;</pre>
                </td></tr><tr><th class="notranslate">
            Context:
                </th><td class="notranslate">
            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> , <code class="notranslate">if in location</code> <br>
                </td></tr></tbody></table></div><p>  启用或禁用gzipping响应。 </p><a name="gzip_buffers"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate">
            Syntax:
                </th><td class="notranslate">
            <code class="notranslate"><strong>gzip_buffers</strong> <code class="notranslate"><i>number</i></code> <code class="notranslate"><i>size</i></code> ;</code> <br>
                </td></tr><tr><th class="notranslate">
            Default:
                </th><td class="notranslate">
            <pre class="notranslate">gzip_buffers 32 4k|16 8k;</pre>
                </td></tr><tr><th class="notranslate">
            Context:
                </th><td class="notranslate">
            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br>
                </td></tr></tbody></table></div><p>  设置用于压缩响应的缓冲区的<code class="notranslate"><i>number</i></code>和<code class="notranslate"><i>size</i></code> 。  默认情况下，缓冲区大小等于一个内存页面。  这是4K或8K，具体取决于平台。 </p><blockquote class="note">  在版本0.7.28之前，默认使用四个4K或8K缓冲区。 </blockquote><p></p><a name="gzip_comp_level"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate">
            Syntax:
                </th><td class="notranslate">
            <code class="notranslate"><strong>gzip_comp_level</strong> <code class="notranslate"><i>level</i></code> ;</code> <br>
                </td></tr><tr><th class="notranslate">
            Default:
                </th><td class="notranslate">
            <pre class="notranslate">gzip_comp_level 1;</pre>
                </td></tr><tr><th class="notranslate">
            Context:
                </th><td class="notranslate">
            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br>
                </td></tr></tbody></table></div><p>  设置响应的gzip压缩<code class="notranslate"><i>level</i></code> 。  可接受的值范围为1到9。 </p><a name="gzip_disable"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate">
            Syntax:
                </th><td class="notranslate">
            <code class="notranslate"><strong>gzip_disable</strong> <code class="notranslate"><i>regex</i></code> ...;</code> <br>
                </td></tr><tr><th class="notranslate">
            Default:
                </th><td class="notranslate">
            
            —
        
                </td></tr><tr><th class="notranslate">
            Context:
                </th><td class="notranslate">
            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br>
                </td></tr></tbody></table><p>  该指令出现在0.6.23版本中。 </p></div><p>  对具有与任何指定正则表达式匹配的“User-Agent”标头字段的请求禁用gzipping响应。 </p><p>  特殊掩码“ <code class="notranslate">msie6</code> ”（0.7.12）对应于正则表达式“ <code class="notranslate">MSIE [4-6]\.</code>   “，但工作得更快。  从版本0.8.11开始，“ <code class="notranslate">MSIE 6.0; ... SV1</code>   <code class="notranslate">MSIE 6.0; ... SV1</code>此掩码中不包括“ <code class="notranslate">MSIE 6.0; ... SV1</code> ”。 </p><a name="gzip_http_version"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate">
            Syntax:
                </th><td class="notranslate">
            <code class="notranslate"><strong>gzip_http_version</strong> <code class="notranslate">1.0</code> | <code class="notranslate">1.1</code> ;</code> <br>
                </td></tr><tr><th class="notranslate">
            Default:
                </th><td class="notranslate">
            <pre class="notranslate">gzip_http_version 1.1;</pre>
                </td></tr><tr><th class="notranslate">
            Context:
                </th><td class="notranslate">
            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br>
                </td></tr></tbody></table></div><p>  设置压缩响应所需的最低HTTP请求版本。 </p><a name="gzip_min_length"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate">
            Syntax:
                </th><td class="notranslate">
            <code class="notranslate"><strong>gzip_min_length</strong> <code class="notranslate"><i>length</i></code> ;</code> <br>
                </td></tr><tr><th class="notranslate">
            Default:
                </th><td class="notranslate">
            <pre class="notranslate">gzip_min_length 20;</pre>
                </td></tr><tr><th class="notranslate">
            Context:
                </th><td class="notranslate">
            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br>
                </td></tr></tbody></table></div><p>  设置将被gzip压缩的响应的最小长度。  长度仅由“Content-Length”响应头字段确定。 </p><a name="gzip_proxied"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate">
            Syntax:
                </th><td class="notranslate">
            <code class="notranslate"><strong>gzip_proxied</strong> 
    <code class="notranslate">off</code> |
    <code class="notranslate">expired</code> |
    <code class="notranslate">no-cache</code> |
    <code class="notranslate">no-store</code> |
    <code class="notranslate">private</code> |
    <code class="notranslate">no_last_modified</code> |
    <code class="notranslate">no_etag</code> |
    <code class="notranslate">auth</code> |
    <code class="notranslate">any</code>
    ...;</code> <br>
                </td></tr><tr><th class="notranslate">
            Default:
                </th><td class="notranslate">
            <pre class="notranslate">gzip_proxied off;</pre>
                </td></tr><tr><th class="notranslate">
            Context:
                </th><td class="notranslate">
            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br>
                </td></tr></tbody></table></div><p>  根据请求和响应启用或禁用对代理请求的响应的gzipping。  代理请求的事实由“Via”请求头字段的存在确定。  该指令接受多个参数： </p><dl class="compact"><dt> <code class="notranslate">off</code> </dt> <dd>  禁用所有代理请求的压缩，忽略其他参数; </dd><dt> <code class="notranslate">expired</code> </dt> <dd>  如果响应头包含“Expires”字段，其值为禁用缓存，则启用压缩; </dd><dt> <code class="notranslate">no-cache</code> </dt> <dd>  如果响应头包含带有“ <code class="notranslate">no-cache</code> ”参数的“Cache-Control”字段，则启用压缩; </dd><dt> <code class="notranslate">no-store</code> </dt> <dd>  如果响应头包含带有“ <code class="notranslate">no-store</code> ”参数的“Cache-Control”字段，则启用压缩; </dd><dt> <code class="notranslate">private</code> </dt> <dd>  如果响应头包含带有“ <code class="notranslate">private</code> ”参数的“Cache-Control”字段，则启用压缩; </dd><dt> <code class="notranslate">no_last_modified</code> </dt> <dd>  如果响应头不包含“Last-Modified”字段，则启用压缩; </dd><dt> <code class="notranslate">no_etag</code> </dt> <dd>  如果响应头不包含“ETag”字段，则启用压缩; </dd><dt> <code class="notranslate">auth</code> </dt> <dd>  如果请求标头包含“授权”字段，则启用压缩; </dd><dt> <code class="notranslate">any</code> </dt> <dd>  为所有代理请求启用压缩。 </dd></dl><p></p><a name="gzip_types"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate">
            Syntax:
                </th><td class="notranslate">
            <code class="notranslate"><strong>gzip_types</strong> <code class="notranslate"><i>mime-type</i></code> ...;</code> <br>
                </td></tr><tr><th class="notranslate">
            Default:
                </th><td class="notranslate">
            <pre class="notranslate">gzip_types text/html;</pre>
                </td></tr><tr><th class="notranslate">
            Context:
                </th><td class="notranslate">
            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br>
                </td></tr></tbody></table></div><p>  除了“ <code class="notranslate">text/html</code> ”之外，还允许对指定的MIME类型进行gzipping响应。  特殊值“ <code class="notranslate">*</code> ”匹配任何MIME类型（0.8.29）。  始终压缩“ <code class="notranslate">text/html</code> ”类型的响应。 </p><a name="gzip_vary"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate">
            Syntax:
                </th><td class="notranslate">
            <code class="notranslate"><strong>gzip_vary</strong> <code class="notranslate">on</code> | <code class="notranslate">off</code> ;</code> <br>
                </td></tr><tr><th class="notranslate">
            Default:
                </th><td class="notranslate">
            <pre class="notranslate">gzip_vary off;</pre>
                </td></tr><tr><th class="notranslate">
            Context:
                </th><td class="notranslate">
            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br>
                </td></tr></tbody></table></div><p>  如果指令<a href="#gzip">gzip</a> ， <a href="ngx_http_gzip_static_module.html#gzip_static">gzip_static</a>或<a href="ngx_http_gunzip_module.html#gunzip">gunzip</a>处于活动状态，则启用或禁用插入“Vary：Accept-Encoding”响应头字段。 </p><a name="variables"></a><center><h4>  嵌入式变量 </h4></center><p></p><dl class="compact"><dt id="var_gzip_ratio"> <code class="notranslate">$gzip_ratio</code> </dt> <dd>  达到的压缩比，计算为原始和压缩响应大小之间的比率。 </dd></dl><p></p> 
<span></span><div style="display: none;"></div></div>
</body>
</html>