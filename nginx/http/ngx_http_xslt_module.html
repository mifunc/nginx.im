<!DOCTYPE html>
<html lang="zh-cn">
<head>
<title>http/ngx_http_xslt_module-nginx中文手册</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="None"/>
<meta name="keywords" content="xslt,site,stylesheet,location,xml"/>
</head>
<body>
<div id="content"><h2 class="notranslate">Module ngx_http_xslt_module</h2><table width="100%"><tbody><tr><td align="left" class="notranslate"> <a href="#example">Example Configuration</a> <br> <a href="#directives">Directives</a> <br>     <a href="#xml_entities">xml_entities</a> <br>     <a href="#xslt_last_modified">xslt_last_modified</a> <br>     <a href="#xslt_param">xslt_param</a> <br>     <a href="#xslt_string_param">xslt_string_param</a> <br>     <a href="#xslt_stylesheet">xslt_stylesheet</a> <br>     <a href="#xslt_types">xslt_types</a> <br></td></tr></tbody></table><a name="summary"></a><p>   <code class="notranslate">ngx_http_xslt_module</code> （0.7.8+）是一个使用一个或多个XSLT样式表转换XML响应的过滤器。 </p><p>  默认情况下不构建此模块，应使用<code class="notranslate">--with-http_xslt_module</code>配置参数启用它。 </p><blockquote class="note">  该模块需要<a href="http://xmlsoft.org">libxml2</a>和<a href="http://xmlsoft.org/XSLT/">libxslt</a>库。 </blockquote><p></p><a name="example"></a><center><h4>  示例配置 </h4></center><p></p><blockquote class="example"><pre class="notranslate">location / {
    xml_entities    /site/dtd/entities.dtd;
    xslt_stylesheet /site/xslt/one.xslt param=value;
    xslt_stylesheet /site/xslt/two.xslt;
}
</pre></blockquote><p></p><a name="directives"></a><center><h4>  指令 </h4></center><a name="xml_entities"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate">
            Syntax:
                </th><td class="notranslate">
            <code class="notranslate"><strong>xml_entities</strong> <code class="notranslate"><i>path</i></code> ;</code> <br>
                </td></tr><tr><th class="notranslate">
            Default:
                </th><td class="notranslate">
            
            —
        
                </td></tr><tr><th class="notranslate">
            Context:
                </th><td class="notranslate">
            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br>
                </td></tr></tbody></table></div><p>  指定声明字符实体的DTD文件。  此文件在配置阶段编译。  由于技术原因，模块无法使用已处理XML中声明的外部子集，因此将忽略该模块并使用特殊定义的文件。  此文件不应描述XML结构。  仅声明所需的字符实体就足够了，例如： </p><blockquote class="example"><pre class="notranslate">&lt;!ENTITY nbsp "&amp;#xa0;"&gt;
</pre></blockquote><p></p><a name="xslt_last_modified"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate">
            Syntax:
                </th><td class="notranslate">
            <code class="notranslate"><strong>xslt_last_modified</strong> <code class="notranslate">on</code> | <code class="notranslate">off</code> ;</code> <br>
                </td></tr><tr><th class="notranslate">
            Default:
                </th><td class="notranslate">
            <pre class="notranslate">xslt_last_modified off;</pre>
                </td></tr><tr><th class="notranslate">
            Context:
                </th><td class="notranslate">
            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br>
                </td></tr></tbody></table><p>  该指令出现在1.5.1版本中。 </p></div><p>  允许在XSLT转换期间保留原始响应中的“Last-Modified”头字段，以便于响应缓存。 </p><p>  默认情况下，在转换期间修改响应内容时会删除标题字段，并且可能包含动态生成的元素或与原始响应无关的部分。 </p><a name="xslt_param"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate">
            Syntax:
                </th><td class="notranslate">
            <code class="notranslate"><strong>xslt_param</strong> <code class="notranslate"><i>parameter</i></code> <code class="notranslate"><i>value</i></code> ;</code> <br>
                </td></tr><tr><th class="notranslate">
            Default:
                </th><td class="notranslate">
            
            —
        
                </td></tr><tr><th class="notranslate">
            Context:
                </th><td class="notranslate">
            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br>
                </td></tr></tbody></table><p>  该指令出现在1.1.18版中。 </p></div><p>  定义XSLT样式表的参数。  该<code class="notranslate"><i>value</i></code>被视为XPath表达式。  该<code class="notranslate"><i>value</i></code>可以包含变量。  要将字符串值传递给样式表，可以使用<a href="#xslt_string_param">xslt_string_param</a>指令。 </p><p>  可能有几个<code class="notranslate">xslt_param</code>指令。  当且仅当在当前级别上没有定义<code class="notranslate">xslt_param</code>和<a href="#xslt_string_param">xslt_string_param</a>指令时，这些指令才从前一级继承。 </p><a name="xslt_string_param"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate">
            Syntax:
                </th><td class="notranslate">
            <code class="notranslate"><strong>xslt_string_param</strong> <code class="notranslate"><i>parameter</i></code> <code class="notranslate"><i>value</i></code> ;</code> <br>
                </td></tr><tr><th class="notranslate">
            Default:
                </th><td class="notranslate">
            
            —
        
                </td></tr><tr><th class="notranslate">
            Context:
                </th><td class="notranslate">
            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br>
                </td></tr></tbody></table><p>  该指令出现在1.1.18版中。 </p></div><p>  定义XSLT样式表的字符串参数。  不解释<code class="notranslate"><i>value</i></code>中的XPath表达式。  该<code class="notranslate"><i>value</i></code>可以包含变量。 </p><p>  可能有几个<code class="notranslate">xslt_string_param</code>指令。  当且仅当在当前级别上没有定义<a href="#xslt_param">xslt_param</a>和<code class="notranslate">xslt_string_param</code>指令时，这些指令才从前一级继承。 </p><a name="xslt_stylesheet"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate">
            Syntax:
                </th><td class="notranslate">
            <code class="notranslate"><strong>xslt_stylesheet</strong> 
    <code class="notranslate"><i>stylesheet</i></code>
    [ <code class="notranslate"><i>parameter</i></code> = <code class="notranslate"><i>value</i></code> ...];</code> <br>
                </td></tr><tr><th class="notranslate">
            Default:
                </th><td class="notranslate">
            
            —
        
                </td></tr><tr><th class="notranslate">
            Context:
                </th><td class="notranslate">
            <code class="notranslate">location</code> <br>
                </td></tr></tbody></table></div><p>  定义XSLT样式表及其可选参数。  样式表在配置阶段编译。 </p><p>  参数既可以单独指定，也可以使用“ <code class="notranslate">:</code> ”分隔符分组在一行中。  如果参数包含“ <code class="notranslate">:</code> ”字符，则应将其转义为“ <code class="notranslate">%3A</code> ”。  此外， <code class="notranslate">libxslt</code>要求将包含非字母数字字符的参数括在单引号或双引号中，例如： </p><blockquote class="example"><pre class="notranslate">param1='http%3A//www.example.com':param2=value2
</pre></blockquote><p></p><p>  参数描述可以包含变量，例如，整行参数可以从单个变量中获取： </p><blockquote class="example"><pre class="notranslate">location / {
    xslt_stylesheet /site/xslt/one.xslt
                    $arg_xslt_params
                    param1='$value1':param2=value2
                    param3=value3;
}
</pre></blockquote><p></p><p>  可以指定多个样式表。  它们将按指定的顺序依次应用。 </p><a name="xslt_types"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate">
            Syntax:
                </th><td class="notranslate">
            <code class="notranslate"><strong>xslt_types</strong> <code class="notranslate"><i>mime-type</i></code> ...;</code> <br>
                </td></tr><tr><th class="notranslate">
            Default:
                </th><td class="notranslate">
            <pre class="notranslate">xslt_types text/xml;</pre>
                </td></tr><tr><th class="notranslate">
            Context:
                </th><td class="notranslate">
            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br>
                </td></tr></tbody></table></div><p>  除了“ <code class="notranslate">text/xml</code> ”之外，还启用具有指定MIME类型的响应中的转换。  特殊值“ <code class="notranslate">*</code> ”匹配任何MIME类型（0.8.29）。  如果转换结果是HTML响应，则其MIME类型将更改为“ <code class="notranslate">text/html</code> ”。 </p> 
<span></span><div style="display: none;"></div></div>
</body>
</html>