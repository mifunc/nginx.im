<!DOCTYPE html>
<html lang="zh-cn">
<head>
<title>http/ngx_http_dav_module-nginx中文手册</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="None"/>
<meta name="keywords" content="00,dav,rw,access,users"/>
</head>
<body>
<div id="content"><h2 class="notranslate">Module ngx_http_dav_module</h2><table width="100%"><tbody><tr><td align="left" class="notranslate"> <a href="#example">Example Configuration</a> <br> <a href="#directives">Directives</a> <br>     <a href="#create_full_put_path">create_full_put_path</a> <br>     <a href="#dav_access">dav_access</a> <br>     <a href="#dav_methods">dav_methods</a> <br>     <a href="#min_delete_depth">min_delete_depth</a> <br></td></tr></tbody></table><a name="summary"></a><p>   <code class="notranslate">ngx_http_dav_module</code>模块用于通过WebDAV协议进行文件管理自动化。  该模块处理HTTP和WebDAV方法PUT，DELETE，MKCOL，COPY和MOVE。 </p><p>  默认情况下不构建此模块，应使用<code class="notranslate">--with-http_dav_module</code>配置参数启用它。 </p><p></p><blockquote class="note">  需要其他WebDAV方法才能运行的WebDAV客户端不适用于此模块。 </blockquote><p></p><a name="example"></a><center><h4>  示例配置 </h4></center><p></p><blockquote class="example"><pre class="notranslate">location / {
    root                  /data/www;

    client_body_temp_path /data/client_temp;

    dav_methods PUT DELETE MKCOL COPY MOVE;

    create_full_put_path  on;
    dav_access            group:rw  all:r;

    limit_except GET {
        allow 192.168.1.0/32;
        deny  all;
    }
}
</pre></blockquote><p></p><a name="directives"></a><center><h4>  指令 </h4></center><a name="create_full_put_path"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate">
            Syntax:
                </th><td class="notranslate">
            <code class="notranslate"><strong>create_full_put_path</strong> <code class="notranslate">on</code> | <code class="notranslate">off</code> ;</code> <br>
                </td></tr><tr><th class="notranslate">
            Default:
                </th><td class="notranslate">
            <pre class="notranslate">create_full_put_path off;</pre>
                </td></tr><tr><th class="notranslate">
            Context:
                </th><td class="notranslate">
            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br>
                </td></tr></tbody></table></div><p>   WebDAV规范仅允许在现有目录中创建文件。  该指令允许创建所有需要的中间目录。 </p><a name="dav_access"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate">
            Syntax:
                </th><td class="notranslate">
            <code class="notranslate"><strong>dav_access</strong> <code class="notranslate"><i>users</i></code> : <code class="notranslate"><i>permissions</i></code> ...;</code> <br>
                </td></tr><tr><th class="notranslate">
            Default:
                </th><td class="notranslate">
            <pre class="notranslate">dav_access user:rw;</pre>
                </td></tr><tr><th class="notranslate">
            Context:
                </th><td class="notranslate">
            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br>
                </td></tr></tbody></table></div><p>  为新创建的文件和目录设置访问权限，例如： </p><blockquote class="example"><pre class="notranslate">dav_access user:rw group:rw all:r;
</pre></blockquote><p></p><p>  如果指定了任何<code class="notranslate">group</code>或<code class="notranslate">all</code>访问权限，则可以省略<code class="notranslate">user</code>权限： </p><blockquote class="example"><pre class="notranslate">dav_access group:rw all:r;
</pre></blockquote><p></p><a name="dav_methods"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate">
            Syntax:
                </th><td class="notranslate">
            <code class="notranslate"><strong>dav_methods</strong> 
    <code class="notranslate">off</code> | <code class="notranslate"><i>method</i></code> ...;</code> <br>
                </td></tr><tr><th class="notranslate">
            Default:
                </th><td class="notranslate">
            <pre class="notranslate">dav_methods off;</pre>
                </td></tr><tr><th class="notranslate">
            Context:
                </th><td class="notranslate">
            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br>
                </td></tr></tbody></table></div><p>  允许指定的HTTP和WebDAV方法。  参数<code class="notranslate">off</code>拒绝此模块处理的所有方法。  支持以下方法： <code class="notranslate">PUT</code> ， <code class="notranslate">DELETE</code> ， <code class="notranslate">MKCOL</code> ， <code class="notranslate">COPY</code>和<code class="notranslate">MOVE</code> 。 </p><p>  使用PUT方法上载的文件首先写入临时文件，然后重命名该文件。  从版本0.8.9开始，临时文件和持久性存储可以放在不同的文件系统上。  但是，请注意，在这种情况下，文件将跨两个文件系统复制，而不是廉价的重命名操作。  因此，建议对于任何给定位置，由<a href="ngx_http_core_module.html#client_body_temp_path">client_body_temp_path</a>指令设置的保存文件和保存临时文件的目录都放在同一文件系统上。 </p><p>  使用PUT方法创建文件时，可以通过在“Date”标题字段中传递修改日期来指定修改日期。 </p><a name="min_delete_depth"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate">
            Syntax:
                </th><td class="notranslate">
            <code class="notranslate"><strong>min_delete_depth</strong> <code class="notranslate"><i>number</i></code> ;</code> <br>
                </td></tr><tr><th class="notranslate">
            Default:
                </th><td class="notranslate">
            <pre class="notranslate">min_delete_depth 0;</pre>
                </td></tr><tr><th class="notranslate">
            Context:
                </th><td class="notranslate">
            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br>
                </td></tr></tbody></table></div><p>  允许DELETE方法删除文件，前提是请求路径中的元素数不小于指定的数。  例如，指令 </p><blockquote class="example"><pre class="notranslate">min_delete_depth 4;
</pre></blockquote><p>  允许删除请求中的文件 </p><blockquote class="example"><pre class="notranslate">/users/00/00/name
/users/00/00/name/pic.jpg
/users/00/00/page.html
</pre></blockquote><p>  并否认删除 </p><blockquote class="example"><pre class="notranslate">/users/00/00
</pre></blockquote><p></p> 
<span></span><div style="display: none;"></div></div>
</body>
</html>