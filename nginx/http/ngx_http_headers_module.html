<!DOCTYPE html>
<html lang="zh-cn">
<head>
<title>http/ngx_http_headers_module-nginx中文手册</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="None"/>
<meta name="keywords" content="expires,24h,off,modified,epoch"/>
</head>
<body>
<div id="content"><h2 class="notranslate">Module ngx_http_headers_module</h2><table width="100%"><tbody><tr><td align="left" class="notranslate"> <a href="#example">Example Configuration</a> <br> <a href="#directives">Directives</a> <br>     <a href="#add_header">add_header</a> <br>     <a href="#add_trailer">add_trailer</a> <br>     <a href="#expires">expires</a> <br></td></tr></tbody></table><a name="summary"></a><p>   <code class="notranslate">ngx_http_headers_module</code>模块允许将“Expires”和“Cache-Control”头字段以及任意字段添加到响应头。 </p><a name="example"></a><center><h4>  示例配置 </h4></center><p></p><blockquote class="example"><pre class="notranslate">expires    24h;
expires    modified +24h;
expires    @24h;
expires    0;
expires    -1;
expires    epoch;
expires    $expires;
add_header Cache-Control private;
</pre></blockquote><p></p><a name="directives"></a><center><h4>  指令 </h4></center><a name="add_header"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate">
            Syntax:
                </th><td class="notranslate">
            <code class="notranslate"><strong>add_header</strong> 
<code class="notranslate"><i>name</i></code> <code class="notranslate"><i>value</i></code>
[ <code class="notranslate">always</code> ];</code> <br>
                </td></tr><tr><th class="notranslate">
            Default:
                </th><td class="notranslate">
            
            —
        
                </td></tr><tr><th class="notranslate">
            Context:
                </th><td class="notranslate">
            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> , <code class="notranslate">if in location</code> <br>
                </td></tr></tbody></table></div><p>  将指定字段添加到响应头，前提是响应代码等于200,201（1.3.10），204,206,301,302,303,304,307（1.1.16,1.0.13）或308（1.13） .0）。  该值可以包含变量。 </p><p>  可能有几个<code class="notranslate">add_header</code>指令。  当且仅当在当前级别上没有定义<code class="notranslate">add_header</code>指令时，这些指令才从前一级继承。 </p><p>  如果指定了<code class="notranslate">always</code>参数（1.7.5），则无论响应代码如何，都将添加标题字段。 </p><a name="add_trailer"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate">
            Syntax:
                </th><td class="notranslate">
            <code class="notranslate"><strong>add_trailer</strong> 
<code class="notranslate"><i>name</i></code> <code class="notranslate"><i>value</i></code>
[ <code class="notranslate">always</code> ];</code> <br>
                </td></tr><tr><th class="notranslate">
            Default:
                </th><td class="notranslate">
            
            —
        
                </td></tr><tr><th class="notranslate">
            Context:
                </th><td class="notranslate">
            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> , <code class="notranslate">if in location</code> <br>
                </td></tr></tbody></table><p>  该指令出现在1.13.2版中。 </p></div><p>  如果响应代码等于200,201,206,301,302,303,307或308，则将指定字段添加到响应的末尾。该值可以包含变量。 </p><p>  可能有几个<code class="notranslate">add_trailer</code>指令。  当且仅当在当前级别上没有定义<code class="notranslate">add_trailer</code>指令时，这些指令才从先前级别继承。 </p><p>  如果指定了<code class="notranslate">always</code>参数，则无论响应代码如何，都将添加指定的字段。 </p><a name="expires"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate">
            Syntax:
                </th><td class="notranslate">
            <code class="notranslate"><strong>expires</strong> [ <code class="notranslate">modified</code> ] <code class="notranslate"><i>time</i></code> ;</code> <br> <code class="notranslate"><strong>expires</strong> 
    <code class="notranslate">epoch</code> |
    <code class="notranslate">max</code> |
    <code class="notranslate">off</code> ;</code> <br>
                </td></tr><tr><th class="notranslate">
            Default:
                </th><td class="notranslate">
            <pre class="notranslate">expires off;</pre>
                </td></tr><tr><th class="notranslate">
            Context:
                </th><td class="notranslate">
            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> , <code class="notranslate">if in location</code> <br>
                </td></tr></tbody></table></div><p>  启用或禁用添加或修改“Expires”和“Cache-Control”响应头字段，前提是响应代码等于200,201（1.3.10），204,206,301,302,303,304,307（1.1。 16,1.0.13）或308（1.13.0）。  参数可以是正<a href="syntax.html">时间</a>或负<a href="syntax.html">时间</a> 。 </p><p>   “Expires”字段中的时间计算为指令中指定的当前时间和<code class="notranslate"><i>time</i></code>的总和。  如果使用<code class="notranslate">modified</code>参数（0.7.0,0.6.32），则计算时间为文件修改时间与指令中指定时间的总和。 </p><p>  此外，可以使用“ <code class="notranslate">@</code> ”前缀（0.7.9,0.6.34）指定一天中的时间： </p><blockquote class="example"><pre class="notranslate">expires @15h30m;
</pre></blockquote><p></p><p>   <code class="notranslate">epoch</code>参数对应于绝对时间“ <code class="notranslate">Thu, 01 Jan 1970 00:00:01 GMT</code> ”。   “Cache-Control”字段的内容取决于指定时间的符号： </p><ul class="compact"><li>  时间是负面的 - “Cache-Control：no-cache”。 </li><li>  时间为正或零 - “Cache-Control：max-age = <code class="notranslate"><i>t</i></code> ”，其中<code class="notranslate"><i>t</i></code>是指令中指定的时间，以秒为单位。 </li></ul><p></p><p>   <code class="notranslate">max</code>参数将“Expires”设置为值“ <code class="notranslate">Thu, 31 Dec 2037 23:55:55 GMT</code> ”，并将“Cache-Control”设置为10年。 </p><p>   <code class="notranslate">off</code>参数禁用添加或修改“Expires”和“Cache-Control”响应头字段。 </p><p>  最后一个参数值可以包含变量（1.7.9）： </p><blockquote class="example"><pre class="notranslate">map $sent_http_content_type $expires {
    default         off;
    application/pdf 42d;
    ~image/         max;
}

expires $expires;
</pre></blockquote><p></p> 
<span></span><div style="display: none;"></div></div>
</body>
</html>