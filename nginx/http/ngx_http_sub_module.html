<!DOCTYPE html>
<html lang="zh-cn">
<head>
<title>http/ngx_http_sub_module-nginx中文手册</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="None"/>
<meta name="keywords" content="sub,filter,href,http,127.0"/>
</head>
<body>
<div id="content"><h2 class="notranslate">Module ngx_http_sub_module</h2><table width="100%"><tbody><tr><td align="left" class="notranslate"> <a href="#example">Example Configuration</a> <br> <a href="#directives">Directives</a> <br>     <a href="#sub_filter">sub_filter</a> <br>     <a href="#sub_filter_last_modified">sub_filter_last_modified</a> <br>     <a href="#sub_filter_once">sub_filter_once</a> <br>     <a href="#sub_filter_types">sub_filter_types</a> <br></td></tr></tbody></table><a name="summary"></a><p>   <code class="notranslate">ngx_http_sub_module</code>模块是一个过滤器，它通过将一个指定的字符串替换为另一个来修改响应。 </p><p>  默认情况下不构建此模块，应使用<code class="notranslate">--with-http_sub_module</code>配置参数启用它。 </p><a name="example"></a><center><h4>  示例配置 </h4></center><p></p><blockquote class="example"><pre class="notranslate">location / {
    sub_filter '&lt;a href="http://127.0.0.1:8080/'  '&lt;a href="https://$host/';
    sub_filter '&lt;img src="http://127.0.0.1:8080/' '&lt;img src="https://$host/';
    sub_filter_once on;
}
</pre></blockquote><p></p><a name="directives"></a><center><h4>  指令 </h4></center><a name="sub_filter"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate">
            Syntax:
                </th><td class="notranslate">
            <code class="notranslate"><strong>sub_filter</strong> <code class="notranslate"><i>string</i></code> <code class="notranslate"><i>replacement</i></code> ;</code> <br>
                </td></tr><tr><th class="notranslate">
            Default:
                </th><td class="notranslate">
            
            —
        
                </td></tr><tr><th class="notranslate">
            Context:
                </th><td class="notranslate">
            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br>
                </td></tr></tbody></table></div><p>  设置要替换的字符串和替换字符串。  忽略大小写匹配的字符串匹配。  要替换的字符串（1.9.4）和替换字符串可以包含变量。  可以在一个配置级别（1.9.4）上指定几个<code class="notranslate">sub_filter</code>指令。  当且仅当在当前级别上没有定义<code class="notranslate">sub_filter</code>指令时，这些指令才从前一级继承。 </p><a name="sub_filter_last_modified"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate">
            Syntax:
                </th><td class="notranslate">
            <code class="notranslate"><strong>sub_filter_last_modified</strong> <code class="notranslate">on</code> | <code class="notranslate">off</code> ;</code> <br>
                </td></tr><tr><th class="notranslate">
            Default:
                </th><td class="notranslate">
            <pre class="notranslate">sub_filter_last_modified off;</pre>
                </td></tr><tr><th class="notranslate">
            Context:
                </th><td class="notranslate">
            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br>
                </td></tr></tbody></table><p>  该指令出现在1.5.1版本中。 </p></div><p>  允许在替换期间保留原始响应中的“Last-Modified”头字段，以便于响应缓存。 </p><p>  默认情况下，在处理期间修改响应的内容时，将删除标头字段。 </p><a name="sub_filter_once"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate">
            Syntax:
                </th><td class="notranslate">
            <code class="notranslate"><strong>sub_filter_once</strong> <code class="notranslate">on</code> | <code class="notranslate">off</code> ;</code> <br>
                </td></tr><tr><th class="notranslate">
            Default:
                </th><td class="notranslate">
            <pre class="notranslate">sub_filter_once on;</pre>
                </td></tr><tr><th class="notranslate">
            Context:
                </th><td class="notranslate">
            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br>
                </td></tr></tbody></table></div><p>  指示是查找要重复替换的每个字符串。 </p><a name="sub_filter_types"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate">
            Syntax:
                </th><td class="notranslate">
            <code class="notranslate"><strong>sub_filter_types</strong> <code class="notranslate"><i>mime-type</i></code> ...;</code> <br>
                </td></tr><tr><th class="notranslate">
            Default:
                </th><td class="notranslate">
            <pre class="notranslate">sub_filter_types text/html;</pre>
                </td></tr><tr><th class="notranslate">
            Context:
                </th><td class="notranslate">
            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br>
                </td></tr></tbody></table></div><p>  除了“ <code class="notranslate">text/html</code> ”之外，还在具有指定MIME类型的响应中启用字符串替换。  特殊值“ <code class="notranslate">*</code> ”匹配任何MIME类型（0.8.29）。 </p> 
<span></span><div style="display: none;"></div></div>
</body>
</html>