<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="LINUX,NGINX,JAVA,PYTHON,PYTHON,前端,运维实践" />










<meta property="og:type" content="website">
<meta property="og:title" content="IM.NGINX">
<meta property="og:url" content="http://nginx.im/page/9/index.html">
<meta property="og:site_name" content="IM.NGINX">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="IM.NGINX">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://nginx.im/page/9/"/>





  <title>IM.NGINX - 运维实践</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?8ff19561e3a0e2a31ba9fffe98d8fc00";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">IM.NGINX</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">运维实践</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-nginx中文手册">
          <a href="/nginx/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            NGINX中文手册
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nginx.im/ngx/http/ngx_http_core_module.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="IM.NGINX">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="IM.NGINX">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/ngx/http/ngx_http_core_module.html" itemprop="url">未命名</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-21T16:09:50+08:00">
                2018年12月21日
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p></p><h2 class="notranslate">Module ngx_http_core_module</h2><table width="100%"><tbody><tr><td align="left" class="notranslate"> <a hhref="#directives">Directives</a> <br>     <a hhref="#absolute_redirect">absolute_redirect</a> <br>     <a hhref="#aio">aio</a> <br>     <a hhref="#aio_write">aio_write</a> <br>     <a hhref="#alias">alias</a> <br>     <a hhref="#chunked_transfer_encoding">chunked_transfer_encoding</a> <br>     <a hhref="#client_body_buffer_size">client_body_buffer_size</a> <br>     <a hhref="#client_body_in_file_only">client_body_in_file_only</a> <br>     <a hhref="#client_body_in_single_buffer">client_body_in_single_buffer</a> <br>     <a hhref="#client_body_temp_path">client_body_temp_path</a> <br>     <a hhref="#client_body_timeout">client_body_timeout</a> <br>     <a hhref="#client_header_buffer_size">client_header_buffer_size</a> <br>     <a hhref="#client_header_timeout">client_header_timeout</a> <br>     <a hhref="#client_max_body_size">client_max_body_size</a> <br>     <a hhref="#connection_pool_size">connection_pool_size</a> <br>     <a hhref="#default_type">default_type</a> <br>     <a hhref="#directio">directio</a> <br>     <a hhref="#directio_alignment">directio_alignment</a> <br>     <a hhref="#disable_symlinks">disable_symlinks</a> <br>     <a hhref="#error_page">error_page</a> <br>     <a hhref="#etag">etag</a> <br>     <a hhref="#http">http</a> <br>     <a hhref="#if_modified_since">if_modified_since</a> <br>     <a hhref="#ignore_invalid_headers">ignore_invalid_headers</a> <br>     <a hhref="#internal">internal</a> <br>     <a hhref="#keepalive_disable">keepalive_disable</a> <br>     <a hhref="#keepalive_requests">keepalive_requests</a> <br>     <a hhref="#keepalive_timeout">keepalive_timeout</a> <br>     <a hhref="#large_client_header_buffers">large_client_header_buffers</a> <br>     <a hhref="#limit_except">limit_except</a> <br>     <a hhref="#limit_rate">limit_rate</a> <br>     <a hhref="#limit_rate_after">limit_rate_after</a> <br>     <a hhref="#lingering_close">lingering_close</a> <br>     <a hhref="#lingering_time">lingering_time</a> <br>     <a hhref="#lingering_timeout">lingering_timeout</a> <br>     <a hhref="#listen">listen</a> <br>     <a hhref="#location">location</a> <br>     <a hhref="#log_not_found">log_not_found</a> <br>     <a hhref="#log_subrequest">log_subrequest</a> <br>     <a hhref="#max_ranges">max_ranges</a> <br>     <a hhref="#merge_slashes">merge_slashes</a> <br>     <a hhref="#msie_padding">msie_padding</a> <br>     <a hhref="#msie_refresh">msie_refresh</a> <br>     <a hhref="#open_file_cache">open_file_cache</a> <br>     <a hhref="#open_file_cache_errors">open_file_cache_errors</a> <br>     <a hhref="#open_file_cache_min_uses">open_file_cache_min_uses</a> <br>     <a hhref="#open_file_cache_valid">open_file_cache_valid</a> <br>     <a hhref="#output_buffers">output_buffers</a> <br>     <a hhref="#port_in_redirect">port_in_redirect</a> <br>     <a hhref="#postpone_output">postpone_output</a> <br>     <a hhref="#read_ahead">read_ahead</a> <br>     <a hhref="#recursive_error_pages">recursive_error_pages</a> <br>     <a hhref="#request_pool_size">request_pool_size</a> <br>     <a hhref="#reset_timedout_connection">reset_timedout_connection</a> <br>     <a hhref="#resolver">resolver</a> <br>     <a hhref="#resolver_timeout">resolver_timeout</a> <br>     <a hhref="#root">root</a> <br>     <a hhref="#satisfy">satisfy</a> <br>     <a hhref="#send_lowat">send_lowat</a> <br>     <a hhref="#send_timeout">send_timeout</a> <br>     <a hhref="#sendfile">sendfile</a> <br>     <a hhref="#sendfile_max_chunk">sendfile_max_chunk</a> <br>     <a hhref="#server">server</a> <br>     <a hhref="#server_name">server_name</a> <br>     <a hhref="#server_name_in_redirect">server_name_in_redirect</a> <br>     <a hhref="#server_names_hash_bucket_size">server_names_hash_bucket_size</a> <br>     <a hhref="#server_names_hash_max_size">server_names_hash_max_size</a> <br>     <a hhref="#server_tokens">server_tokens</a> <br>     <a hhref="#subrequest_output_buffer_size">subrequest_output_buffer_size</a> <br>     <a hhref="#tcp_nodelay">tcp_nodelay</a> <br>     <a hhref="#tcp_nopush">tcp_nopush</a> <br>     <a hhref="#try_files">try_files</a> <br>     <a hhref="#types">types</a> <br>     <a hhref="#types_hash_bucket_size">types_hash_bucket_size</a> <br>     <a hhref="#types_hash_max_size">types_hash_max_size</a> <br>     <a hhref="#underscores_in_headers">underscores_in_headers</a> <br>     <a hhref="#variables_hash_bucket_size">variables_hash_bucket_size</a> <br>     <a hhref="#variables_hash_max_size">variables_hash_max_size</a> <br> <a hhref="#variables">Embedded Variables</a> <br></td></tr></tbody></table><a name="directives"></a><center><h4>  指令 </h4></center><a name="absolute_redirect"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>absolute_redirect</strong> <code class="notranslate">on</code> | <code class="notranslate">off</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">absolute_redirect on;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table><p>  该指令出现在1.11.8版中。 </p></div><p>  如果禁用，nginx发出的重定向将是相对的。 </p><p>  另请参见<a hhref="#server_name_in_redirect">server_name_in_redirect</a>和<a hhref="#port_in_redirect">port_in_redirect</a>指令。 </p><a name="aio"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>aio</strong><br>    <code class="notranslate">on</code> |<br>    <code class="notranslate">off</code> |<br>    <code class="notranslate">threads</code> [ <code class="notranslate">=</code> <code class="notranslate"><i>pool</i></code> ];</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">aio off;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table><p>  该指令出现在0.8.11版本中。 </p></div><p>  启用或禁用在FreeBSD和Linux上使用异步文件I / O（AIO）： </p><blockquote class="example"><pre class="notranslate">location /video/ {<br>    aio            on;<br>    output_buffers 1 64k;<br>}<br></pre></blockquote><p></p><p>  在FreeBSD上，可以从FreeBSD 4.3开始使用AIO。  在FreeBSD 11.0之前，AIO可以静态链接到内核： </p><blockquote class="example"><pre class="notranslate">options VFS_AIO<br></pre></blockquote><p>  或作为内核可加载模块动态加载： </p><blockquote class="example"><pre class="notranslate">kldload aio<br></pre></blockquote><p></p><p>  在Linux上，可以从内核版本2.6.22开始使用AIO。  此外，有必要启用<a hhref="#directio">directio</a> ，否则读取将被阻止： </p><blockquote class="example"><pre class="notranslate">location /video/ {<br>    aio            on;<br>    directio       512;<br>    output_buffers 1 128k;<br>}<br></pre></blockquote><p></p><p>  在Linux上， <a hhref="#directio">directio</a>只能用于读取在512字节边界（或XFS为4K）上对齐的块。  在阻塞模式下读取文件的未对齐结束。  对于字节范围请求和不是从文件开头的FLV请求也是如此：在文件开头和结尾读取未对齐数据将被阻塞。 </p><p>  当在Linux上启用AIO和<a hhref="#sendfile">sendfile时</a> ，AIO用于大于或等于<a hhref="#directio">directio</a>指令中指定大小的文件，而<a hhref="#sendfile">sendfile</a>用于较小大小的文件或禁用<a hhref="#directio">directio</a>时。 </p><blockquote class="example"><pre class="notranslate">location /video/ {<br>    sendfile       on;<br>    aio            on;<br>    directio       8m;<br>}<br></pre></blockquote><p></p><p>  最后，可以使用多线程（1.7.11）读取和<a hhref="#sendfile">发送</a>文件，而不会阻止工作进程： </p><blockquote class="example"><pre class="notranslate">location /video/ {<br>    sendfile       on;<br>    aio            threads;<br>}<br></pre></blockquote><p>  读取和发送文件操作被卸载到指定<a hhref="ngx_core_module.html#thread_pool">池的</a>线程。  如果省略池名称，则使用名称为“ <code class="notranslate">default</code> ”的池。  池名称也可以使用变量设置： </p><blockquote class="example"><pre class="notranslate">aio threads=pool$disk;<br></pre></blockquote><p>  默认情况下，禁用多线程，应使用<code class="notranslate">–with-threads</code>配置参数启用它。  目前，多线程仅与<a hhref="events.html#epoll">epoll</a> ， <a hhref="events.html#kqueue">kqueue</a>和<a hhref="events.html#eventport">eventport</a>方法兼容。  只在Linux上支持多线程文件发送。 </p><p>  另请参见<a hhref="#sendfile">sendfile</a>指令。 </p><a name="aio_write"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>aio_write</strong> <code class="notranslate">on</code> | <code class="notranslate">off</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">aio_write off;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table><p>  该指令出现在1.9.13版本中。 </p></div><p>  如果启用了<a hhref="#aio">aio</a> ，则指定是否用于写入文件。  目前，这仅在使用<code class="notranslate">aio threads</code> ，并且仅限于使用从代理服务器接收的数据编写临时文件。 </p><a name="alias"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>alias</strong> <code class="notranslate"><i>path</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><p></p>
<pre><code>        —

            &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
        Context:
            &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
        &lt;code class=&quot;notranslate&quot;&gt;location&lt;/code&gt; &lt;br&gt;
            &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p&gt;  定义指定位置的替换。  例如，使用以下配置 &lt;/p&gt;&lt;blockquote class=&quot;example&quot;&gt;&lt;pre class=&quot;notranslate&quot;&gt;location /i/ {
alias /data/w3/images/;
</code></pre><p>}<br></p><p>  根据“ <code class="notranslate">/i/top.gif</code> ”的请求，将发送文件<code class="notranslate">/data/w3/images/top.gif</code> 。 </p><p>   <code class="notranslate"><i>path</i></code>值可以包含变量， <code class="notranslate">$document_root</code>和<code class="notranslate">$realpath_root</code>除外。 </p><p>  如果在使用正则表达式定义的位置内使用<code class="notranslate">alias</code>则此类正则表达式应包含捕获，而<code class="notranslate">alias</code>应引用这些捕获（0.7.40），例如： </p><blockquote class="example"><pre class="notranslate">location ~ ^/users/(.+.(?:gif|jpe?g|png))$ {<br>    alias /data/w3/images/$1;<br>}<br></pre></blockquote><p></p><p>  当location匹配指令值的最后一部分时： </p><blockquote class="example"><pre class="notranslate">location /images/ {<br>    alias /data/w3/images/;<br>}<br></pre></blockquote><p>  最好使用<a hhref="#root">root</a>指令： </p><blockquote class="example"><pre class="notranslate">location /images/ {<br>    root /data/w3;<br>}<br></pre></blockquote><p></p><a name="chunked_transfer_encoding"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>chunked_transfer_encoding</strong> <code class="notranslate">on</code> | <code class="notranslate">off</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">chunked_transfer_encoding on;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  允许在HTTP / 1.1中禁用分块传输编码。  尽管符合标准要求，但在使用软件无法支持分块编码时，它可能会派上用场。 </p><a name="client_body_buffer_size"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>client_body_buffer_size</strong> <code class="notranslate"><i>size</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">client_body_buffer_size 8k|16k;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  设置读取客户端请求正文的缓冲区大小。  如果请求主体大于缓冲区，则整个主体或仅其部分被写入<a hhref="#client_body_temp_path">临时文件</a> 。  默认情况下，缓冲区大小等于两个内存页。  这是x86上的8K，其他32位平台和x86-64。  在其他64位平台上通常为16K。 </p><a name="client_body_in_file_only"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>client_body_in_file_only</strong><br>    <code class="notranslate">on</code> |<br>    <code class="notranslate">clean</code> |<br>    <code class="notranslate">off</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">client_body_in_file_only off;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  确定nginx是否应将整个客户端请求主体保存到文件中。  该指令可以在调试期间使用，或者在使用<code class="notranslate">$request_body_file</code>变量或模块<a hhref="ngx_http_perl_module.html">ngx_http_perl_module</a>的<a hhref="ngx_http_perl_module.html#methods">$ r-&gt; request_body_file</a>方法时使用。 </p><p>  设置为打开值<code class="notranslate">on</code> ，请求处理后不会删除临时文件。 </p><p>  值<code class="notranslate">clean</code>将导致删除请求处理后留下的临时文件。 </p><a name="client_body_in_single_buffer"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>client_body_in_single_buffer</strong> <code class="notranslate">on</code> | <code class="notranslate">off</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">client_body_in_single_buffer off;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  确定nginx是否应将整个客户端请求主体保存在单个缓冲区中。  使用<code class="notranslate">$request_body</code>变量时，建议使用该指令，以保存所涉及的复制操作数。 </p><a name="client_body_temp_path"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>client_body_temp_path</strong><br>    <code class="notranslate"><i>path</i></code><br>    [ <code class="notranslate"><i>level1</i></code><br>    [ <code class="notranslate"><i>level2</i></code><br>    [ <code class="notranslate"><i>level3</i></code> ]]];</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">client_body_temp_path client_body_temp;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  定义用于存储包含客户端请求主体的临时文件的目录。  在指定目录下最多可以使用三级子目录层次结构。  例如，在以下配置中 </p><blockquote class="example"><pre class="notranslate">client_body_temp_path /spool/nginx/client_temp 1 2;<br></pre></blockquote><p>  临时文件的路径可能如下所示： </p><blockquote class="example"><pre class="notranslate">/spool/nginx/client_temp/7/45/00000123457<br></pre></blockquote><p></p><a name="client_body_timeout"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>client_body_timeout</strong> <code class="notranslate"><i>time</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">client_body_timeout 60s;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  定义读取客户端请求正文的超时。  超时仅设置为两个连续读取操作之间的时间段，而不是整个请求主体的传输。  如果客户端在此时间内未传输任何内容，请求将以408（请求超时）错误终止。 </p><a name="client_header_buffer_size"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>client_header_buffer_size</strong> <code class="notranslate"><i>size</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">client_header_buffer_size 1k;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> <br><br>                </td></tr></tbody></table></div><p>  设置缓冲区大小以读取客户端请求标头。  对于大多数请求，1K字节的缓冲区就足够了。  但是，如果请求包含长cookie或来自WAP客户端，则可能不适合1K。  如果请求行或请求头字段不适合此缓冲区，则分配由<a hhref="#large_client_header_buffers">large_client_header_buffers</a>指令配置的较大缓冲区。 </p><a name="client_header_timeout"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>client_header_timeout</strong> <code class="notranslate"><i>time</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">client_header_timeout 60s;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> <br><br>                </td></tr></tbody></table></div><p>  定义读取客户端请求标头的超时。  如果客户端在此时间内未传输整个标头，请求将以408（请求超时）错误终止。 </p><a name="client_max_body_size"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>client_max_body_size</strong> <code class="notranslate"><i>size</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">client_max_body_size 1m;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  设置客户端请求正文的最大允许大小，在“Content-Length”请求标头字段中指定。  如果请求中的大小超过配置的值，则会将413（请求实体太大）错误返回给客户端。  请注意，浏览器无法正确显示此错误。  将<code class="notranslate"><i>size</i></code>设置为0将禁用检查客户端请求正文大小。 </p><a name="connection_pool_size"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>connection_pool_size</strong> <code class="notranslate"><i>size</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">connection_pool_size 256|512;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> <br><br>                </td></tr></tbody></table></div><p>  允许精确调整每个连接的内存分配。  该指令对性能的影响最小，通常不应使用。  默认情况下，大小在32位平台上等于256字节，在64位平台上等于512字节。 </p><blockquote class="note">  在1.9.8版之前，所有平台上的默认值均为256。 </blockquote><p></p><a name="default_type"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>default_type</strong> <code class="notranslate"><i>mime-type</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">default_type text/plain;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  定义响应的默认MIME类型。  可以使用<a hhref="#types">types</a>指令设置文件扩展名到MIME类型的映射。 </p><a name="directio"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>directio</strong> <code class="notranslate"><i>size</i></code> | <code class="notranslate">off</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">directio off;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table><p>  该指令出现在0.7.7版本中。 </p></div><p>  在读取大于或等于指定<code class="notranslate"><i>size</i></code>文件时，允许使用<code class="notranslate">O_DIRECT</code>标志（FreeBSD，Linux）， <code class="notranslate">F_NOCACHE</code>标志（macOS）或<code class="notranslate">directio()</code>函数（Solaris）。  该指令自动禁用（0.7.15）对给定请求使用<a hhref="#sendfile">sendfile</a> 。  它对于提供大型文件非常有用： </p><blockquote class="example"><pre class="notranslate">directio 4m;<br></pre></blockquote><p>  或者在Linux上使用<a hhref="#aio">aio</a>时。 </p><a name="directio_alignment"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>directio_alignment</strong> <code class="notranslate"><i>size</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">directio_alignment 512;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table><p>  该指令出现在0.8.11版本中。 </p></div><p>  设置<a hhref="#directio">directio</a>的对齐方式。  在大多数情况下，512字节对齐就足够了。  但是，在Linux下使用XFS时，需要将其增加到4K。 </p><a name="disable_symlinks"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>disable_symlinks</strong> <code class="notranslate">off</code> ;</code> <br> <code class="notranslate"><strong>disable_symlinks</strong><br>    <code class="notranslate">on</code> |<br>    <code class="notranslate">if_not_owner</code><br>    [ <code class="notranslate">from</code> = <code class="notranslate"><i>part</i></code> ];</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">disable_symlinks off;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table><p>  该指令出现在1.1.15版中。 </p></div><p>  确定打开文件时应如何处理符号链接： </p><dl class="compact"><dt> <code class="notranslate">off</code> </dt> <dd>  路径名中的符号链接是允许的，不会被选中。  这是默认行为。 </dd><dt> <code class="notranslate">on</code> </dt> <dd>  如果路径名的任何组件是符号链接，则拒绝访问文件。 </dd><dt> <code class="notranslate">if_not_owner</code> </dt> <dd>  如果路径名的任何组件是符号链接，并且链接指向的链接和对象具有不同的所有者，则拒绝访问文件。 </dd><dt>   <code class="notranslate">from</code> = <code class="notranslate"><i>part</i></code> </dt><dd>  检查符号链接（参数<code class="notranslate">on</code>和<code class="notranslate">if_not_owner</code> ）时，通常会检查路径名的所有组件。  通过另外指定<code class="notranslate">from</code> = <code class="notranslate"><i>part</i></code>参数，可以避免检查路径名的初始部分中的符号链接。  在这种情况下，仅从指定的初始部分后面的路径名组件检查符号链接。  如果该值不是检查的路径名的初始部分，则检查整个路径名，就好像根本没有指定此参数一样。  如果值与整个文件名匹配，则不检查符号链接。  参数值可以包含变量。 </dd></dl><p></p><p>  例： </p><blockquote class="example"><pre class="notranslate">disable_symlinks on from=$document_root;<br></pre></blockquote><p></p><p>  该指令仅适用于具有<code class="notranslate">openat()</code>和<code class="notranslate">fstatat()</code>接口的系统。  这些系统包括FreeBSD，Linux和Solaris的现代版本。 </p><p>  参数<code class="notranslate">on</code>和<code class="notranslate">if_not_owner</code>添加了处理开销。 </p><blockquote class="note">  在不支持仅为搜索打开目录的系统上，要使用这些参数，需要工作进程对所有正在检查的目录具有读取权限。 </blockquote><p></p><p></p><blockquote class="note">   <a hhref="ngx_http_autoindex_module.html">ngx_http_autoindex_module</a> ， <a hhref="ngx_http_random_index_module.html">ngx_http_random_index_module</a>和<a hhref="ngx_http_dav_module.html">ngx_http_dav_module</a>模块当前忽略此指令。 </blockquote><p></p><a name="error_page"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>error_page</strong><br>    <code class="notranslate"><i>code</i></code> …<br>    [ <code class="notranslate">=</code> [ <code class="notranslate"><i>response</i></code> ]]<br>    <code class="notranslate"><i>uri</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><p></p>
<pre><code>—

    &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Context:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
&lt;code class=&quot;notranslate&quot;&gt;http&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;server&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;location&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;if in location&lt;/code&gt; &lt;br&gt;
    &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p&gt;  定义将为指定错误显示的URI。   &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;uri&lt;/i&gt;&lt;/code&gt;值可以包含变量。 &lt;/p&gt;&lt;p&gt;  例： &lt;/p&gt;&lt;blockquote class=&quot;example&quot;&gt;&lt;pre class=&quot;notranslate&quot;&gt;error_page 404             /404.html;
</code></pre><p>error_page 500 502 503 504 /50x.html;<br></p><p></p><p>  这导致内部重定向到指定的<code class="notranslate"><i>uri</i></code> ，客户端请求方法更改为“ <code class="notranslate">GET</code> ”（对于“ <code class="notranslate">GET</code> ”和“ <code class="notranslate">HEAD</code> ”以外的所有方法）。 </p><p>  此外，可以使用“ <code class="notranslate">=</code> <code class="notranslate"><i>response</i></code> ”语法将响应代码更改为另一个，例如： </p><blockquote class="example"><pre class="notranslate">error_page 404 =200 /empty.gif;<br></pre></blockquote><p></p><p>  如果代理服务器或FastCGI / uwsgi / SCGI / gRPC服务器处理错误响应，并且服务器可能返回不同的响应代码（例如，200,302,401或404），则可以使用代码进行响应收益： </p><blockquote class="example"><pre class="notranslate">error_page 404 = /404.php;<br></pre></blockquote><p></p><p>  如果在内部重定向期间无需更改URI和方法，则可以将错误处理传递到命名位置： </p><blockquote class="example"><pre class="notranslate">location / {<br>    error_page 404 = @fallback;<br>}<p></p>
<p>location @fallback {<br>    proxy_pass <a href="http://backend" target="_blank" rel="noopener">http://backend</a>;<br>}<br></p></pre></blockquote><p></p><p></p><blockquote class="note">  如果<code class="notranslate"><i>uri</i></code>处理导致错误，则将上次发生的错误的状态代码返回给客户端。 </blockquote><p></p><p>  也可以使用URL重定向进行错误处理： </p><blockquote class="example"><pre class="notranslate">error_page 403      <a href="http://example.com/forbidden.html" target="_blank" rel="noopener">http://example.com/forbidden.html</a>;<br>error_page 404 =301 <a href="http://example.com/notfound.html" target="_blank" rel="noopener">http://example.com/notfound.html</a>;<br></pre></blockquote><p>  在这种情况下，默认情况下，响应代码302返回给客户端。  它只能更改为重定向状态代码之一（301,302,303,307和308）。 </p><blockquote class="note">  在版本1.1.16和1.0.13之前，代码307不被视为重定向。 </blockquote><p></p><blockquote class="note">  在版本1.13.0之前，代码308不被视为重定向。 </blockquote><p></p><p>  当且仅当在当前级别上没有定义<code class="notranslate">error_page</code>指令时，这些指令才从前一级继承。 </p><a name="etag"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>etag</strong> <code class="notranslate">on</code> | <code class="notranslate">off</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">etag on;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table><p>  该指令出现在1.3.3版本中。 </p></div><p>  启用或禁用自动生成静态资源的“ETag”响应头字段。 </p><a name="http"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>http</strong> { … }</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><p></p>
<pre><code>        —

            &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
        Context:
            &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
        &lt;code class=&quot;notranslate&quot;&gt;main&lt;/code&gt; &lt;br&gt;
            &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p&gt;  提供指定HTTP服务器指令的配置文件上下文。 &lt;/p&gt;&lt;a name=&quot;if_modified_since&quot;&gt;&lt;/a&gt;&lt;div class=&quot;directive&quot;&gt;&lt;table cellspacing=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
        Syntax:
            &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
        &lt;code class=&quot;notranslate&quot;&gt;&lt;strong&gt;if_modified_since&lt;/strong&gt; 
&lt;code class=&quot;notranslate&quot;&gt;off&lt;/code&gt; |
&lt;code class=&quot;notranslate&quot;&gt;exact&lt;/code&gt; |
&lt;code class=&quot;notranslate&quot;&gt;before&lt;/code&gt; ;&lt;/code&gt; &lt;br&gt;
            &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
        Default:
            &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
        &lt;pre class=&quot;notranslate&quot;&gt;if_modified_since exact;&lt;/pre&gt;
            &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
        Context:
            &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
        &lt;code class=&quot;notranslate&quot;&gt;http&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;server&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;location&lt;/code&gt; &lt;br&gt;
            &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;  该指令出现在0.7.24版本中。 &lt;/p&gt;&lt;/div&gt;&lt;p&gt;  指定如何将响应的修改时间与“If-Modified-Since”请求标头字段中的时间进行比较： &lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt; &lt;code class=&quot;notranslate&quot;&gt;off&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;  忽略“If-Modified-Since”请求头字段（0.7.34）; &lt;/dd&gt;&lt;dt&gt; &lt;code class=&quot;notranslate&quot;&gt;exact&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;  完全符合; &lt;/dd&gt;&lt;dt&gt; &lt;code class=&quot;notranslate&quot;&gt;before&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;  响应的修改时间小于或等于“If-Modified-Since”请求头字段中的时间。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;a name=&quot;ignore_invalid_headers&quot;&gt;&lt;/a&gt;&lt;div class=&quot;directive&quot;&gt;&lt;table cellspacing=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
        Syntax:
            &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
        &lt;code class=&quot;notranslate&quot;&gt;&lt;strong&gt;ignore_invalid_headers&lt;/strong&gt; &lt;code class=&quot;notranslate&quot;&gt;on&lt;/code&gt; | &lt;code class=&quot;notranslate&quot;&gt;off&lt;/code&gt; ;&lt;/code&gt; &lt;br&gt;
            &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
        Default:
            &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
        &lt;pre class=&quot;notranslate&quot;&gt;ignore_invalid_headers on;&lt;/pre&gt;
            &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
        Context:
            &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
        &lt;code class=&quot;notranslate&quot;&gt;http&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;server&lt;/code&gt; &lt;br&gt;
            &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p&gt;  控制是否应忽略具有无效名称的标头字段。  有效名称由英文字母，数字，连字符和可能的下划线组成（由&lt;a hhref=&quot;#underscores_in_headers&quot;&gt;underscores_in_headers&lt;/a&gt;指令控制）。 &lt;/p&gt;&lt;p&gt;  如果在&lt;a hhref=&quot;#server&quot;&gt;服务器&lt;/a&gt;级别指定了该指令，则仅在服务器是默认服务器时使用其值。  指定的值也适用于侦听同一地址和端口的所有虚拟服务器。 &lt;/p&gt;&lt;a name=&quot;internal&quot;&gt;&lt;/a&gt;&lt;div class=&quot;directive&quot;&gt;&lt;table cellspacing=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
        Syntax:
            &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
        &lt;code class=&quot;notranslate&quot;&gt;&lt;strong&gt;internal&lt;/strong&gt; ;&lt;/code&gt; &lt;br&gt;
            &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
        Default:
            &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;

        —

            &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
        Context:
            &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
        &lt;code class=&quot;notranslate&quot;&gt;location&lt;/code&gt; &lt;br&gt;
            &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p&gt;  指定给定位置只能用于内部请求。  对于外部请求，返回客户端错误404（未找到）。  内部请求如下： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;  由&lt;a hhref=&quot;#error_page&quot;&gt;error_page&lt;/a&gt; ， &lt;a hhref=&quot;ngx_http_index_module.html#index&quot;&gt;index&lt;/a&gt; ， &lt;a hhref=&quot;ngx_http_random_index_module.html#random_index&quot;&gt;random_index&lt;/a&gt;和&lt;a hhref=&quot;#try_files&quot;&gt;try_files&lt;/a&gt;指令重定向的请求; &lt;/li&gt;&lt;li&gt;  来自上游服务器的“X-Accel-Redirect”响应头字段重定向的请求; &lt;/li&gt;&lt;li&gt;  由&lt;a hhref=&quot;ngx_http_ssi_module.html&quot;&gt;ngx_http_ssi_module&lt;/a&gt;模块的“ &lt;code class=&quot;notranslate&quot;&gt;include virtual&lt;/code&gt; ”命令， &lt;a hhref=&quot;ngx_http_addition_module.html&quot;&gt;ngx_http_addition_module&lt;/a&gt;模块指令以及&lt;a hhref=&quot;ngx_http_auth_request_module.html#auth_request&quot;&gt;auth_request&lt;/a&gt;和&lt;a hhref=&quot;ngx_http_mirror_module.html#mirror&quot;&gt;mirror&lt;/a&gt;指令形成的子请求; &lt;/li&gt;&lt;li&gt;  请求由&lt;a hhref=&quot;ngx_http_rewrite_module.html#rewrite&quot;&gt;重写&lt;/a&gt;指令更改。 &lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  例： &lt;/p&gt;&lt;blockquote class=&quot;example&quot;&gt;&lt;pre class=&quot;notranslate&quot;&gt;error_page 404 /404.html;
</code></pre><p>location = /404.html {<br>    internal;<br>}<br></p><p></p><blockquote class="note">  每个请求最多有10个内部重定向，以防止在错误配置中发生的请求处理周期。  如果达到此限制，则返回错误500（内部服务器错误）。  在这种情况下，可以在错误日志中看到“重写或内部重定向周期”消息。 </blockquote><p></p><a name="keepalive_disable"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>keepalive_disable</strong> <code class="notranslate">none</code> | <code class="notranslate"><i>browser</i></code> …;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">keepalive_disable msie6;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  禁用与行为不当的浏览器保持连接状态。   <code class="notranslate"><i>browser</i></code>参数指定将受影响的浏览器。  一旦收到POST请求，值<code class="notranslate">msie6</code>将禁用与旧版本MSIE的保持活动连接。  值<code class="notranslate">safari</code>禁用与macOS和类似macOS的操作系统上的Safari和类似Safari的浏览器的保持活动连接。  值<code class="notranslate">none</code>与所有浏览器保持连接。 </p><blockquote class="note">  在版本1.1.18之前，值<code class="notranslate">safari</code>与所有操作系统上的所有Safari和类似Safari的浏览器相匹配，默认情况下禁用与它们保持连接的连接。 </blockquote><p></p><a name="keepalive_requests"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>keepalive_requests</strong> <code class="notranslate"><i>number</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">keepalive_requests 100;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table><p>  该指令出现在0.8.0版本中。 </p></div><p>  设置可通过一个保持活动连接提供的最大请求数。  在发出最大请求数后，将关闭连接。 </p><a name="keepalive_timeout"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>keepalive_timeout</strong><br>    <code class="notranslate"><i>timeout</i></code><br>    [ <code class="notranslate"><i>header_timeout</i></code> ];</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">keepalive_timeout 75s;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  第一个参数设置一个超时，在此期间保持活动的客户端连接将在服务器端保持打开状态。  零值禁用保持活动的客户端连接。  可选的第二个参数在“Keep-Alive：timeout = <code class="notranslate"><i>time</i></code> ”响应头字段中设置一个值。  两个参数可能不同。 </p><p>   Mozilla和Konqueror识别“Keep-Alive：timeout = <code class="notranslate"><i>time</i></code> ”标题字段。   MSIE在大约60秒内自行关闭保持连接。 </p><a name="large_client_header_buffers"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>large_client_header_buffers</strong> <code class="notranslate"><i>number</i></code> <code class="notranslate"><i>size</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">large_client_header_buffers 4 8k;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> <br><br>                </td></tr></tbody></table></div><p>  设置用于读取大客户机请求标头的缓冲区的最大<code class="notranslate"><i>number</i></code>和<code class="notranslate"><i>size</i></code> 。  请求行不能超过一个缓冲区的大小，否则会将414（Request-URI Too Large）错误返回给客户端。  请求头字段也不能超过一个缓冲区的大小，或者400（错误请求）错误返回给客户端。  缓冲区仅按需分配。  默认情况下，缓冲区大小等于8K字节。  如果在请求处理结束后连接转换为保持活动状态，则释放这些缓冲区。 </p><a name="limit_except"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>limit_except</strong> <code class="notranslate"><i>method</i></code> … { … }</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><p></p>
<pre><code>        —

            &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
        Context:
            &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
        &lt;code class=&quot;notranslate&quot;&gt;location&lt;/code&gt; &lt;br&gt;
            &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p&gt;  限制允许位置内的HTTP方法。   &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;method&lt;/i&gt;&lt;/code&gt;参数可以是以下之一： &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; ， &lt;code class=&quot;notranslate&quot;&gt;HEAD&lt;/code&gt; ， &lt;code class=&quot;notranslate&quot;&gt;POST&lt;/code&gt; ， &lt;code class=&quot;notranslate&quot;&gt;PUT&lt;/code&gt; ， &lt;code class=&quot;notranslate&quot;&gt;DELETE&lt;/code&gt; ， &lt;code class=&quot;notranslate&quot;&gt;MKCOL&lt;/code&gt; ， &lt;code class=&quot;notranslate&quot;&gt;COPY&lt;/code&gt; ， &lt;code class=&quot;notranslate&quot;&gt;MOVE&lt;/code&gt; ， &lt;code class=&quot;notranslate&quot;&gt;OPTIONS&lt;/code&gt; ， &lt;code class=&quot;notranslate&quot;&gt;PROPFIND&lt;/code&gt; ， &lt;code class=&quot;notranslate&quot;&gt;PROPPATCH&lt;/code&gt; ， &lt;code class=&quot;notranslate&quot;&gt;LOCK&lt;/code&gt; ， &lt;code class=&quot;notranslate&quot;&gt;UNLOCK&lt;/code&gt;或&lt;code class=&quot;notranslate&quot;&gt;PATCH&lt;/code&gt; 。  允许&lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt;方法也允许使用&lt;code class=&quot;notranslate&quot;&gt;HEAD&lt;/code&gt;方法。  使用&lt;a hhref=&quot;ngx_http_access_module.html&quot;&gt;ngx_http_access_module&lt;/a&gt; ， &lt;a hhref=&quot;ngx_http_auth_basic_module.html&quot;&gt;ngx_http_auth_basic_module&lt;/a&gt;和&lt;a hhref=&quot;ngx_http_auth_jwt_module.html&quot;&gt;ngx_http_auth_jwt_module&lt;/a&gt; （1.13.10）模块指令可以限制对其他方法的访问： &lt;/p&gt;&lt;blockquote class=&quot;example&quot;&gt;&lt;pre class=&quot;notranslate&quot;&gt;limit_except GET {
allow 192.168.1.0/32;
deny  all;
</code></pre><p>}<br></p><p>  请注意，这将限制对<strong>除</strong> GET和HEAD <strong>之外的</strong>所有方法的访问。 </p><a name="limit_rate"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>limit_rate</strong> <code class="notranslate"><i>rate</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">limit_rate 0;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> , <code class="notranslate">if in location</code> <br><br>                </td></tr></tbody></table></div><p>  限制向客户端传输的响应速率。   <code class="notranslate"><i>rate</i></code>以每秒字节数指定。  零值禁用速率限制。  根据请求设置限制，因此如果客户端同时打开两个连接，则总速率将是指定限制的两倍。 </p><p>  也可以在<code class="notranslate">$limit_rate</code>变量中设置速率限制。  在根据特定条件限制费率的情况下，它可能很有用： </p><blockquote class="example"><pre class="notranslate">server {<p></p>
<pre><code>if ($slow) {
    set $limit_rate 4k;
}

...
</code></pre><p>}<br></p></pre></blockquote><p></p><p>  还可以在代理服务器响应的“X-Accel-Limit-Rate”头字段中设置速率限制。  可以使用<a hhref="ngx_http_proxy_module.html#proxy_ignore_headers">proxy_ignore_headers</a> ， <a hhref="ngx_http_fastcgi_module.html#fastcgi_ignore_headers">fastcgi_ignore_headers</a> ， <a hhref="ngx_http_uwsgi_module.html#uwsgi_ignore_headers">uwsgi_ignore_headers</a>和<a hhref="ngx_http_scgi_module.html#scgi_ignore_headers">scgi_ignore_headers</a>指令禁用此功能。 </p><a name="limit_rate_after"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>limit_rate_after</strong> <code class="notranslate"><i>size</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">limit_rate_after 0;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> , <code class="notranslate">if in location</code> <br><br>                </td></tr></tbody></table><p>  该指令出现在0.8.0版本中。 </p></div><p>  设置初始量，在此之后，对客户端的响应的进一步传输将受到速率限制。 </p><p>  例： </p><blockquote class="example"><pre class="notranslate">location /flv/ {<br>    flv;<br>    limit_rate_after 500k;<br>    limit_rate       50k;<br>}<br></pre></blockquote><p></p><a name="lingering_close"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>lingering_close</strong><br>    <code class="notranslate">off</code> |<br>    <code class="notranslate">on</code> |<br>    <code class="notranslate">always</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">lingering_close on;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table><p>  该指令出现在1.1.0和1.0.6版本中。 </p></div><p>  控制nginx如何关闭客户端连接。 </p><p>  默认值“ <code class="notranslate">on</code> ”指示nginx在完全关闭连接之前<a hhref="#lingering_timeout">等待</a>并<a hhref="#lingering_time">处理</a>来自客户端的其他数据，但仅当启发式表明客户端可能正在发送更多数据时。 </p><p>  值“ <code class="notranslate">always</code> ”将导致nginx无条件地等待并处理其他客户端数据。 </p><p>  值“ <code class="notranslate">off</code> ”告诉nginx永远不要等待更多数据并立即关闭连接。  此行为会破坏协议，不应在正常情况下使用。 </p><a name="lingering_time"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>lingering_time</strong> <code class="notranslate"><i>time</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">lingering_time 30s;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  当<a hhref="#lingering_close">lingering_close</a>生效时，此指令指定nginx处理（读取和忽略）来自客户端的其他数据的最长时间。  之后，即使有更多数据，连接也将关闭。 </p><a name="lingering_timeout"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>lingering_timeout</strong> <code class="notranslate"><i>time</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">lingering_timeout 5s;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  当<a hhref="#lingering_close">lingering_close</a>生效时，此指令指定更多客户端数据到达的最长等待时间。  如果在此期间未收到数据，则关闭连接。  否则，将读取并忽略数据，并且nginx会再次开始等待更多数据。  重复“wait-read-ignore”循环，但不会超过<a hhref="#lingering_time">lingering_time</a>指令指定的循环。 </p><a name="listen"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>listen</strong><br>    <code class="notranslate"><i>address</i></code> [: <code class="notranslate"><i>port</i></code> ]<br>    [ <code class="notranslate">default_server</code> ]<br>    [ <code class="notranslate">ssl</code> ]<br>    [ <code class="notranslate">http2</code> | <code class="notranslate">spdy</code> ]<br>    [ <code class="notranslate">proxy_protocol</code> ]<br>    [ <code class="notranslate">setfib</code> = <code class="notranslate"><i>number</i></code> ]<br>    [ <code class="notranslate">fastopen</code> = <code class="notranslate"><i>number</i></code> ]<br>    [ <code class="notranslate">backlog</code> = <code class="notranslate"><i>number</i></code> ]<br>    [ <code class="notranslate">rcvbuf</code> = <code class="notranslate"><i>size</i></code> ]<br>    [ <code class="notranslate">sndbuf</code> = <code class="notranslate"><i>size</i></code> ]<br>    [ <code class="notranslate">accept_filter</code> = <code class="notranslate"><i>filter</i></code> ]<br>    [ <code class="notranslate">deferred</code> ]<br>    [ <code class="notranslate">bind</code> ]<br>    [ <code class="notranslate">ipv6only</code> = <code class="notranslate">on</code> | <code class="notranslate">off</code> ]<br>    [ <code class="notranslate">reuseport</code> ]<br>    [ <code class="notranslate">so_keepalive</code> = <code class="notranslate">on</code> | <code class="notranslate">off</code> |[ <code class="notranslate"><i>keepidle</i></code> ]:[ <code class="notranslate"><i>keepintvl</i></code> ]:[ <code class="notranslate"><i>keepcnt</i></code> ]];</code> <br> <code class="notranslate"><strong>listen</strong><br>    <code class="notranslate"><i>port</i></code><br>    [ <code class="notranslate">default_server</code> ]<br>    [ <code class="notranslate">ssl</code> ]<br>    [ <code class="notranslate">http2</code> | <code class="notranslate">spdy</code> ]<br>    [ <code class="notranslate">proxy_protocol</code> ]<br>    [ <code class="notranslate">setfib</code> = <code class="notranslate"><i>number</i></code> ]<br>    [ <code class="notranslate">fastopen</code> = <code class="notranslate"><i>number</i></code> ]<br>    [ <code class="notranslate">backlog</code> = <code class="notranslate"><i>number</i></code> ]<br>    [ <code class="notranslate">rcvbuf</code> = <code class="notranslate"><i>size</i></code> ]<br>    [ <code class="notranslate">sndbuf</code> = <code class="notranslate"><i>size</i></code> ]<br>    [ <code class="notranslate">accept_filter</code> = <code class="notranslate"><i>filter</i></code> ]<br>    [ <code class="notranslate">deferred</code> ]<br>    [ <code class="notranslate">bind</code> ]<br>    [ <code class="notranslate">ipv6only</code> = <code class="notranslate">on</code> | <code class="notranslate">off</code> ]<br>    [ <code class="notranslate">reuseport</code> ]<br>    [ <code class="notranslate">so_keepalive</code> = <code class="notranslate">on</code> | <code class="notranslate">off</code> |[ <code class="notranslate"><i>keepidle</i></code> ]:[ <code class="notranslate"><i>keepintvl</i></code> ]:[ <code class="notranslate"><i>keepcnt</i></code> ]];</code> <br> <code class="notranslate"><strong>listen</strong><br>    <code class="notranslate">unix:</code> <code class="notranslate"><i>path</i></code><br>    [ <code class="notranslate">default_server</code> ]<br>    [ <code class="notranslate">ssl</code> ]<br>    [ <code class="notranslate">http2</code> | <code class="notranslate">spdy</code> ]<br>    [ <code class="notranslate">proxy_protocol</code> ]<br>    [ <code class="notranslate">backlog</code> = <code class="notranslate"><i>number</i></code> ]<br>    [ <code class="notranslate">rcvbuf</code> = <code class="notranslate"><i>size</i></code> ]<br>    [ <code class="notranslate">sndbuf</code> = <code class="notranslate"><i>size</i></code> ]<br>    [ <code class="notranslate">accept_filter</code> = <code class="notranslate"><i>filter</i></code> ]<br>    [ <code class="notranslate">deferred</code> ]<br>    [ <code class="notranslate">bind</code> ]<br>    [ <code class="notranslate">so_keepalive</code> = <code class="notranslate">on</code> | <code class="notranslate">off</code> |[ <code class="notranslate"><i>keepidle</i></code> ]:[ <code class="notranslate"><i>keepintvl</i></code> ]:[ <code class="notranslate"><i>keepcnt</i></code> ]];</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">listen <em>:80 | </em>:8000;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">server</code> <br><br>                </td></tr></tbody></table></div><p>  设置IP的<code class="notranslate"><i>address</i></code>和<code class="notranslate"><i>port</i></code> ，或服务器将接受请求的UNIX域套接字的<code class="notranslate"><i>path</i></code> 。  可以指定<code class="notranslate"><i>address</i></code>和<code class="notranslate"><i>port</i></code> ，或仅指定<code class="notranslate"><i>address</i></code>或仅<code class="notranslate"><i>port</i></code> 。   <code class="notranslate"><i>address</i></code>也可以是主机名，例如： </p><blockquote class="example"><pre class="notranslate">listen 127.0.0.1:8000;<br>listen 127.0.0.1;<br>listen 8000;<br>listen <em>:8000;<br>listen localhost:8000;<br></em></pre></blockquote><p>   IPv6地址（0.7.36）在方括号中指定： </p><blockquote class="example"><pre class="notranslate">listen [::]:8000;<br>listen [::1];<br></pre></blockquote><p>   UNIX域套接字（0.8.21）使用“ <code class="notranslate">unix:</code> ”前缀指定： </p><blockquote class="example"><pre class="notranslate">listen unix:/var/run/nginx.sock;<br></pre></blockquote><p></p><p>  如果仅给出<code class="notranslate"><i>address</i></code> ，则使用端口80。 </p><p>  如果指令不存在，那么如果nginx以超级用户权限运行，则使用<code class="notranslate">:80</code> ，否则使用<code class="notranslate"><em>:8000</em></code> 。 </p><p>   <code class="notranslate">default_server</code>参数（如果存在）将使服务器成为指定<code class="notranslate"><i>address</i></code> ： <code class="notranslate"><i>port</i></code>对的默认服务器。  如果没有任何指令具有<code class="notranslate">default_server</code>参数，则具有<code class="notranslate"><i>address</i></code> ： <code class="notranslate"><i>port</i></code>对的第一个服务器将成为该对的默认服务器。 </p><blockquote class="note">  在0.8.21之前的版本中，此参数仅命名为<code class="notranslate">default</code> 。 </blockquote><p></p><p>   <code class="notranslate">ssl</code>参数（0.7.14）允许指定此端口上接受的所有连接都应在SSL模式下工作。  这样可以为处理HTTP和HTTPS请求的服务器提供更紧凑的<a hhref="configuring_https_servers.html#single_http_https_server">配置</a> 。 </p><p>   <code class="notranslate">http2</code>参数（1.9.5）将端口配置为接受<a hhref="ngx_http_v2_module.html">HTTP / 2</a>连接。  通常，为了使其工作，也应该指定<code class="notranslate">ssl</code>参数，但是也可以将nginx配置为接受没有SSL的HTTP / 2连接。 </p><p>   <code class="notranslate">spdy</code>参数（1.3.15-1.9.4）允许接受此端口上的<a hhref="ngx_http_spdy_module.html">SPDY</a>连接。  通常，为了使其工作，还应指定<code class="notranslate">ssl</code>参数，但也可以将nginx配置为接受不带SSL的SPDY连接。 </p><p>   <code class="notranslate">proxy_protocol</code>参数（1.5.12）允许指定此端口上接受的所有连接都应使用<a hhref="http://www.haproxy.org/download/1.5/doc/proxy-protocol.txt">PROXY协议</a> 。 </p><blockquote class="note">  自版本1.13.11起支持PROXY协议版本2。 </blockquote><p></p><p>   <code class="notranslate">listen</code>指令可以有几个特定于与套接字相关的系统调用的附加参数。  这些参数可以在任何<code class="notranslate">listen</code>指令中指定，但对于给定的<code class="notranslate"><i>address</i></code>只能指定一次： <code class="notranslate"><i>port</i></code>对。 </p><blockquote class="note">  在0.8.21之前的版本中，它们只能在<code class="notranslate">listen</code>指令中与<code class="notranslate">default</code>参数一起指定。 </blockquote><p></p><dl class="compact"><dt>   <code class="notranslate">setfib</code> = <code class="notranslate"><i>number</i></code> </dt><dd>  此参数（0.8.44）设置侦听套接字的关联路由表FIB（ <code class="notranslate">SO_SETFIB</code>选项）。  这目前仅适用于FreeBSD。 </dd><dt>   <code class="notranslate">fastopen</code> = <code class="notranslate"><i>number</i></code> </dt><dd>  为侦听套接字启用“ <a hhref="http://en.wikipedia.org/wiki/TCP_Fast_Open">TCP Fast Open</a> ”（1.5.8）并<a hhref="https://tools.ietf.org/html/rfc7413#section-5.1">限制</a>尚未完成三次握手的连接队列的最大长度。 <blockquote class="note">  除非服务器可以处理多次<a hhref="https://tools.ietf.org/html/rfc7413#section-6.1">使用数据</a>的<a hhref="https://tools.ietf.org/html/rfc7413#section-6.1">同一SYN数据包，</a>否则不要启用此功能。 </blockquote></dd><dt>   <code class="notranslate">backlog</code> = <code class="notranslate"><i>number</i></code> </dt><dd>  在<code class="notranslate">listen()</code>调用中设置<code class="notranslate">backlog</code>参数，该参数限制挂起连接队列的最大长度。  默认情况下， <code class="notranslate">backlog</code>在FreeBSD，DragonFly BSD和macOS上设置为-1，在其他平台上设置为511。 </dd><dt>   <code class="notranslate">rcvbuf</code> = <code class="notranslate"><i>size</i></code> </dt><dd>  设置侦听套接字的接收缓冲区大小（ <code class="notranslate">SO_RCVBUF</code>选项）。 </dd><dt>   <code class="notranslate">sndbuf</code> = <code class="notranslate"><i>size</i></code> </dt><dd>  设置侦听套接字的发送缓冲区大小（ <code class="notranslate">SO_SNDBUF</code>选项）。 </dd><dt>   <code class="notranslate">accept_filter</code> = <code class="notranslate"><i>filter</i></code> </dt><dd>  为侦听套接字设置接受过滤器的名称（ <code class="notranslate">SO_ACCEPTFILTER</code>选项），该套接字在将传入连接传递给<code class="notranslate">accept()</code>之前对其进行过滤。  这仅适用于FreeBSD和NetBSD 5.0+。  可能的值是<a hhref="http://man.freebsd.org/accf_data">dataready</a>和<a hhref="http://man.freebsd.org/accf_http">httpready</a> 。 </dd><dt> <code class="notranslate">deferred</code> </dt> <dd>  指示在Linux上使用延迟的<code class="notranslate">accept()</code> （ <code class="notranslate">TCP_DEFER_ACCEPT</code>套接字选项）。 </dd><dt> <code class="notranslate">bind</code> </dt> <dd>  指示对给定<code class="notranslate"><i>address</i></code>进行单独的<code class="notranslate">bind()</code>调用： <code class="notranslate"><i>port</i></code>对。  这很有用，因为如果有几个具有相同端口但不同地址的<code class="notranslate">listen</code>指令，并且其中一个<code class="notranslate">listen</code>指令侦听给定端口（ <code class="notranslate">:</code> <code class="notranslate"><i>port</i></code> ）的所有地址，则nginx将<code class="notranslate">bind()</code>仅限于<code class="notranslate"><em>:</em></code> <code class="notranslate"><i>port</i></code> 。  应该注意的是，在这种情况下将进行<code class="notranslate">getsockname()</code>系统调用以确定接受连接的地址。  如果使用<code class="notranslate">setfib</code> ， <code class="notranslate">backlog</code> ， <code class="notranslate">rcvbuf</code> ， <code class="notranslate">sndbuf</code> ， <code class="notranslate">accept_filter</code> ， <code class="notranslate">deferred</code> ， <code class="notranslate">ipv6only</code>或<code class="notranslate">so_keepalive</code>参数，那么对于给定的<code class="notranslate"><i>address</i></code> ： <code class="notranslate"><i>port</i></code>对将始终进行单独的<code class="notranslate">bind()</code>调用。 </dd><dt>   <code class="notranslate">ipv6only</code> = <code class="notranslate">on</code> | <code class="notranslate">off</code> </dt><dd>  此参数（0.7.42）确定（通过<code class="notranslate">IPV6_V6ONLY</code>套接字选项）侦听通配符地址<code class="notranslate">[::]</code>的IPv6套接字是仅接受IPv6连接还是仅接受IPv6和IPv4连接。  默认情况下，此参数处于启用状态。  它只能在开始时设置一次。 <blockquote class="note">  在1.3.4版之前，如果省略此参数，则操作系统的设置对套接字有效。 </blockquote></dd><dt id="reuseport"> <code class="notranslate">reuseport</code> </dt> <dd>  此参数（1.9.1）指示为每个工作进程创建一个单独的侦听套接字（使用Linux 3.9+和DragonFly BSD上的<code class="notranslate">SO_REUSEPORT</code>套接字选项，或FreeBSD 12+上的<code class="notranslate">SO_REUSEPORT_LB</code> ），允许内核在工作进程之间分配传入连接。  目前仅适用于Linux 3.9 +，DragonFly BSD和FreeBSD 12+（1.15.1）。 <blockquote class="note">  不恰当地使用此选项可能会产生安全<a hhref="http://man7.org/linux/man-pages/man7/socket.7.html">隐患</a> 。 </blockquote></dd><dt>   <code class="notranslate">so_keepalive</code> = <code class="notranslate">on</code> |   <code class="notranslate">off</code> | [ <code class="notranslate"><i>keepidle</i></code> ]：[ <code class="notranslate"><i>keepintvl</i></code> ]：[ <code class="notranslate"><i>keepcnt</i></code> ] </dt><dd>  此参数（1.1.11）配置侦听套接字的“TCP keepalive”行为。  如果省略此参数，则操作系统的设置将对套接字有效。  如果将其设置为值“ <code class="notranslate">on</code> ”，则为套接字打开<code class="notranslate">SO_KEEPALIVE</code>选项。  如果将其设置为值“ <code class="notranslate">off</code> ”，则为套接字关闭<code class="notranslate">SO_KEEPALIVE</code>选项。  某些操作系统支持使用<code class="notranslate">TCP_KEEPIDLE</code> ， <code class="notranslate">TCP_KEEPINTVL</code>和<code class="notranslate">TCP_KEEPCNT</code>套接字选项在每个套接字的基础上设置TCP keepalive参数。  在这样的系统上（目前，Linux 2.4 +，NetBSD 5+和FreeBSD 9.0-STABLE），可以使用<code class="notranslate"><i>keepidle</i></code> ， <code class="notranslate"><i>keepintvl</i></code>和<code class="notranslate"><i>keepcnt</i></code>参数配置它们。  可以省略一个或两个参数，在这种情况下，相应套接字选项的系统默认设置将生效。  例如， <blockquote class="example"><pre class="notranslate">so_keepalive=30m::10</pre></blockquote>  将空闲超时（ <code class="notranslate">TCP_KEEPIDLE</code> ）设置为30分钟，将探测间隔（ <code class="notranslate">TCP_KEEPINTVL</code> ）保留为系统默认值，并将探测计数（ <code class="notranslate">TCP_KEEPCNT</code> ）设置为10个探测。 </dd></dl><p></p><p>  例： </p><blockquote class="example"><pre class="notranslate">listen 127.0.0.1 default_server accept_filter=dataready backlog=1024;<br></pre></blockquote><p></p><a name="location"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>location</strong> [<br>    <code class="notranslate">=</code> |<br>    <code class="notranslate">~</code> |<br>    <code class="notranslate">~</code> |<br>    <code class="notranslate">^~</code><br>    ] <code class="notranslate"><i>uri</i></code> { … }</code> <br> <code class="notranslate"><strong>location</strong> <code class="notranslate">@</code> <code class="notranslate"><i>name</i></code> { … }</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><p></p>
<pre><code>        —

            &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
        Context:
            &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
        &lt;code class=&quot;notranslate&quot;&gt;server&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;location&lt;/code&gt; &lt;br&gt;
            &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p&gt;  根据请求URI设置配置。 &lt;/p&gt;&lt;p&gt;  在解码以“ &lt;code class=&quot;notranslate&quot;&gt;%XX&lt;/code&gt; ”形式编码的文本，解析对相对路径分量的引用之后，针对规范化的URI执行匹配&lt;code class=&quot;notranslate&quot;&gt;.&lt;/code&gt;   “和” &lt;code class=&quot;notranslate&quot;&gt;..&lt;/code&gt; “，并且可能&lt;a hhref=&quot;#merge_slashes&quot;&gt;将&lt;/a&gt;两个或多个相邻斜线&lt;a hhref=&quot;#merge_slashes&quot;&gt;压缩&lt;/a&gt;成单个斜线。 &lt;/p&gt;&lt;p&gt;  位置可以由前缀字符串或正则表达式定义。  正则表达式使用前面的“ &lt;code class=&quot;notranslate&quot;&gt;~*&lt;/code&gt; ”修饰符（用于不区分大小写的匹配）或“ &lt;code class=&quot;notranslate&quot;&gt;~&lt;/code&gt; ”修饰符（用于区分大小写的匹配）指定。  为了找到与给定请求匹配的位置，nginx首先检查使用前缀字符串（前缀位置）定义的位置。  其中，选择并记住具有最长匹配前缀的位置。  然后按照它们在配置文件中的出现顺序检查正则表达式。  正则表达式的搜索在第一个匹配时终止，并使用相应的配置。  如果未找到与正则表达式的匹配，则使用先前记住的前缀位置的配置。 &lt;/p&gt;&lt;p&gt;  可以嵌套&lt;code class=&quot;notranslate&quot;&gt;location&lt;/code&gt;块，但下面提到了一些例外情况。 &lt;/p&gt;&lt;p&gt;  对于不区分大小写的操作系统（如macOS和Cygwin），与前缀字符串匹配会忽略大小写（0.7.7）。  但是，比较仅限于一个字节的区域设置。 &lt;/p&gt;&lt;p&gt;  正则表达式可以包含稍后可以在其他指令中使用的捕获（0.7.40）。 &lt;/p&gt;&lt;p&gt;  如果最长匹配前缀位置具有“ &lt;code class=&quot;notranslate&quot;&gt;^~&lt;/code&gt; ”修饰符，则不检查正则表达式。 &lt;/p&gt;&lt;p&gt;  此外，使用“ &lt;code class=&quot;notranslate&quot;&gt;=&lt;/code&gt; ”修饰符可以定义URI和位置的精确匹配。  如果找到完全匹配，则搜索终止。  例如，如果频繁发生“ &lt;code class=&quot;notranslate&quot;&gt;/&lt;/code&gt; ”请求，则定义“ &lt;code class=&quot;notranslate&quot;&gt;location = /&lt;/code&gt; ”将加速这些请求的处理，因为搜索在第一次比较之后立即终止。  这样的位置显然不能包含嵌套位置。 &lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;blockquote class=&quot;note&quot;&gt;  在0.7.1到0.8.41的版本中，如果请求与前缀位置匹配而没有“ &lt;code class=&quot;notranslate&quot;&gt;=&lt;/code&gt; ”和“ &lt;code class=&quot;notranslate&quot;&gt;^~&lt;/code&gt; ”修饰符，则搜索也会终止，并且不会检查正则表达式。 &lt;/blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  让我们通过一个例子来说明以上内容： &lt;/p&gt;&lt;blockquote class=&quot;example&quot;&gt;&lt;pre class=&quot;notranslate&quot;&gt;location = / {
[ configuration A ]
</code></pre><p>}</p>
<p>location / {<br>    [ configuration B ]<br>}</p>
<p>location /documents/ {<br>    [ configuration C ]<br>}</p>
<p>location ^~ /images/ {<br>    [ configuration D ]<br>}</p>
<p>location ~* .(gif|jpg|jpeg)$ {<br>    [ configuration E ]<br>}<br></p><p>   “ <code class="notranslate">/</code> ”请求将匹配配置A，“/ <code class="notranslate">/index.html</code> ”请求将匹配配置B，“/ <code class="notranslate">/documents/document.html</code> ”请求将匹配配置C，“/ <code class="notranslate">/images/1.gif</code> ”请求将匹配配置D，“/ <code class="notranslate">/documents/1.jpg</code> ”请求将匹配配置E. </p><p>   “ <code class="notranslate">@</code> ”前缀定义了命名位置。  这样的位置不用于常规请求处理，而是用于请求重定向。  它们不能嵌套，也不能包含嵌套位置。 </p><p>  如果位置由以斜杠字符结尾的前缀字符串定义，并且请求由<a hhref="ngx_http_proxy_module.html#proxy_pass">proxy_pass</a> ， <a hhref="ngx_http_fastcgi_module.html#fastcgi_pass">fastcgi_pass</a> ， <a hhref="ngx_http_uwsgi_module.html#uwsgi_pass">uwsgi_pass</a> ， <a hhref="ngx_http_scgi_module.html#scgi_pass">scgi_pass</a> ， <a hhref="ngx_http_memcached_module.html#memcached_pass">memcached_pa​​ss</a>或<a hhref="ngx_http_grpc_module.html#grpc_pass">grpc_pass之一</a>处理，则执行特殊处理。  为了响应URI等于此字符串但没有尾部斜杠的请求，带有代码301的永久重定向将返回到请求的URI，并附加斜杠。  如果不需要，可以像下面这样定义URI和位置的完全匹配： </p><blockquote class="example"><pre class="notranslate">location /user/ {<br>    proxy_pass <a href="http://user.example.com" target="_blank" rel="noopener">http://user.example.com</a>;<br>}<p></p>
<p>location = /user {<br>    proxy_pass <a href="http://login.example.com" target="_blank" rel="noopener">http://login.example.com</a>;<br>}<br></p></pre></blockquote><p></p><a name="log_not_found"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>log_not_found</strong> <code class="notranslate">on</code> | <code class="notranslate">off</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">log_not_found on;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  启用或禁用将未找到的文件的错误记录到<a hhref="ngx_core_module.html#error_log">error_log中</a> 。 </p><a name="log_subrequest"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>log_subrequest</strong> <code class="notranslate">on</code> | <code class="notranslate">off</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">log_subrequest off;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  启用或禁用将子请求记录到<a hhref="ngx_http_log_module.html#access_log">access_log中</a> 。 </p><a name="max_ranges"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>max_ranges</strong> <code class="notranslate"><i>number</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><p></p>
<pre><code>        —

            &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
        Context:
            &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
        &lt;code class=&quot;notranslate&quot;&gt;http&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;server&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;location&lt;/code&gt; &lt;br&gt;
            &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;  该指令出现在1.1.2版中。 &lt;/p&gt;&lt;/div&gt;&lt;p&gt;  限制字节范围请求中允许的最大范围数。  超出限制的请求将被处理，就像没有指定字节范围一样。  默认情况下，范围数量不受限制。  零值完全禁用字节范围支持。 &lt;/p&gt;&lt;a name=&quot;merge_slashes&quot;&gt;&lt;/a&gt;&lt;div class=&quot;directive&quot;&gt;&lt;table cellspacing=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
        Syntax:
            &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
        &lt;code class=&quot;notranslate&quot;&gt;&lt;strong&gt;merge_slashes&lt;/strong&gt; &lt;code class=&quot;notranslate&quot;&gt;on&lt;/code&gt; | &lt;code class=&quot;notranslate&quot;&gt;off&lt;/code&gt; ;&lt;/code&gt; &lt;br&gt;
            &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
        Default:
            &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
        &lt;pre class=&quot;notranslate&quot;&gt;merge_slashes on;&lt;/pre&gt;
            &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
        Context:
            &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
        &lt;code class=&quot;notranslate&quot;&gt;http&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;server&lt;/code&gt; &lt;br&gt;
            &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p&gt;  启用或禁用将URI中的两个或多个相邻斜杠压缩为单个斜杠。 &lt;/p&gt;&lt;p&gt;  请注意，压缩对于正确匹配前缀字符串和正则表达式位置至关重要。  没有它，“ &lt;code class=&quot;notranslate&quot;&gt;//scripts/one.php&lt;/code&gt; ”请求将不匹配 &lt;/p&gt;&lt;blockquote class=&quot;example&quot;&gt;&lt;pre class=&quot;notranslate&quot;&gt;location /scripts/ {
...
</code></pre><p>}<br></p><p>  并且可能被处理为静态文件。  所以它被转换为“ <code class="notranslate">/scripts/one.php</code> ”。 </p><p>  如果URI包含base64编码的名称，则必须<code class="notranslate">off</code>压缩，因为base64在内部使用“ <code class="notranslate">/</code> ”字符。  但是，出于安全考虑，最好避免关闭压缩。 </p><p>  如果在<a hhref="#server">服务器</a>级别指定了该指令，则仅在服务器是默认服务器时使用其值。  指定的值也适用于侦听同一地址和端口的所有虚拟服务器。 </p><a name="msie_padding"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>msie_padding</strong> <code class="notranslate">on</code> | <code class="notranslate">off</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">msie_padding on;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  启用或禁用向状态大于400的MSIE客户端的响应添加注释，以将响应大小增加到512字节。 </p><a name="msie_refresh"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>msie_refresh</strong> <code class="notranslate">on</code> | <code class="notranslate">off</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">msie_refresh off;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  启用或禁用发布刷新而不是MSIE客户端的重定向。 </p><a name="open_file_cache"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>open_file_cache</strong> <code class="notranslate">off</code> ;</code> <br> <code class="notranslate"><strong>open_file_cache</strong><br><code class="notranslate">max</code> = <code class="notranslate"><i>N</i></code><br>[ <code class="notranslate">inactive</code> = <code class="notranslate"><i>time</i></code> ];</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">open_file_cache off;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  配置可以存储的缓存： </p><ul class="compact"><li>  打开文件描述符，它们的大小和修改时间; </li><li>  关于目录存在的信息; </li><li>  文件查找错误，例如“找不到文件”，“没有读取权限”等。 <blockquote class="note">  应该通过<a hhref="#open_file_cache_errors">open_file_cache_errors</a>指令单独启用缓存错误。 </blockquote></li></ul><p></p><p>  该指令具有以下参数： </p><dl class="compact"><dt> <code class="notranslate">max</code> </dt> <dd>  设置缓存中的最大元素数;  在缓存溢出时，删除最近最少使用（LRU）的元素; </dd><dt> <code class="notranslate">inactive</code> </dt> <dd>  定义一个时间，如果在此期间未访问该元素，则从该缓存中删除该元素;  默认情况下，它是60秒; </dd><dt> <code class="notranslate">off</code> </dt> <dd>  禁用缓存。 </dd></dl><p></p><p>  例： </p><blockquote class="example"><pre class="notranslate">open_file_cache          max=1000 inactive=20s;<br>open_file_cache_valid    30s;<br>open_file_cache_min_uses 2;<br>open_file_cache_errors   on;<br></pre></blockquote><p></p><a name="open_file_cache_errors"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>open_file_cache_errors</strong> <code class="notranslate">on</code> | <code class="notranslate">off</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">open_file_cache_errors off;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  通过<a hhref="#open_file_cache">open_file_cache</a>启用或禁用文件查找错误的缓存。 </p><a name="open_file_cache_min_uses"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>open_file_cache_min_uses</strong> <code class="notranslate"><i>number</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">open_file_cache_min_uses 1;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  设置在<a hhref="#open_file_cache">open_file_cache</a>指令的<code class="notranslate">inactive</code>参数配置的时间段内文件访问的最小<code class="notranslate"><i>number</i></code> ，这是文件描述符在缓存中保持打开所必需的。 </p><a name="open_file_cache_valid"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>open_file_cache_valid</strong> <code class="notranslate"><i>time</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">open_file_cache_valid 60s;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  设置应验证<a hhref="#open_file_cache">open_file_cache</a>元素的时间。 </p><a name="output_buffers"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>output_buffers</strong> <code class="notranslate"><i>number</i></code> <code class="notranslate"><i>size</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">output_buffers 2 32k;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  设置用于从磁盘读取响应的缓冲区的<code class="notranslate"><i>number</i></code>和<code class="notranslate"><i>size</i></code> 。 </p><blockquote class="note">  在1.9.5版之前，默认值为1 32k。 </blockquote><p></p><a name="port_in_redirect"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>port_in_redirect</strong> <code class="notranslate">on</code> | <code class="notranslate">off</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">port_in_redirect on;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  启用或禁用在nginx发出的<a hhref="#absolute_redirect">绝对</a>重定向中指定端口。 </p><p>  在重定向中使用主服务器名称由<a hhref="#server_name_in_redirect">server_name_in_redirect</a>指令控制。 </p><a name="postpone_output"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>postpone_output</strong> <code class="notranslate"><i>size</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">postpone_output 1460;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  如果可能，客户端数据的传输将被推迟，直到nginx至少要发送<code class="notranslate"><i>size</i></code>字节的数据。  零值禁用推迟数据传输。 </p><a name="read_ahead"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>read_ahead</strong> <code class="notranslate"><i>size</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">read_ahead 0;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  设置使用文件时内核的预读取量。 </p><p>  在Linux上，使用<code class="notranslate">posix_fadvise(0, 0, 0, POSIX_FADV_SEQUENTIAL)</code>系统调用，因此忽略<code class="notranslate"><i>size</i></code>参数。 </p><p>  在FreeBSD上，使用了自FreeBSD 9.0-CURRENT以来支持的<code class="notranslate">fcntl(O_READAHEAD,</code> <code class="notranslate"><i>size</i></code> <code class="notranslate">)</code>系统调用。   FreeBSD 7必须<a hhref="http://sysoev.ru/freebsd/patch.readahead.txt">打补丁</a> 。 </p><a name="recursive_error_pages"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>recursive_error_pages</strong> <code class="notranslate">on</code> | <code class="notranslate">off</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">recursive_error_pages off;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  使用<a hhref="#error_page">error_page</a>指令启用或禁用多个重定向。  此类重定向的数量<a hhref="#internal">有限</a> 。 </p><a name="request_pool_size"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>request_pool_size</strong> <code class="notranslate"><i>size</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">request_pool_size 4k;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> <br><br>                </td></tr></tbody></table></div><p>  允许精确调整每个请求的内存分配。  该指令对性能的影响最小，通常不应使用。 </p><a name="reset_timedout_connection"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>reset_timedout_connection</strong> <code class="notranslate">on</code> | <code class="notranslate">off</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">reset_timedout_connection off;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  启用或禁用重置超时连接。  重置如下进行。  在关闭套接字之前，在其上设置<code class="notranslate">SO_LINGER</code>选项，超时值为0.当套接字关闭时，TCP RST将发送到客户端，并释放此套接字占用的所有内存。  这有助于避免将已填充缓冲区的已关闭套接字保持在FIN_WAIT1状态很长时间。 </p><p>  应该注意，超时保持连接正常关闭。 </p><a name="resolver"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>resolver</strong><br>    <code class="notranslate"><i>address</i></code> …<br>    [ <code class="notranslate">valid</code> = <code class="notranslate"><i>time</i></code> ]<br>    [ <code class="notranslate">ipv6</code> = <code class="notranslate">on</code> | <code class="notranslate">off</code> ];</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><p></p>
<pre><code>—

    &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Context:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
&lt;code class=&quot;notranslate&quot;&gt;http&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;server&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;location&lt;/code&gt; &lt;br&gt;
    &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p&gt;  将用于解析上游服务器名称的名称服务器配置到地址中，例如： &lt;/p&gt;&lt;blockquote class=&quot;example&quot;&gt;&lt;pre class=&quot;notranslate&quot;&gt;resolver 127.0.0.1 [::1]:5353;
</code></pre><p></p><p>  可以将地址指定为域名或IP地址，以及可选端口（1.3.1,1.2.2）。  如果未指定端口，则使用端口53。  以循环方式查询名称服务器。 </p><blockquote class="note">  在1.1.7版之前，只能配置一个名称服务器。  从版本1.3.1和1.2.2开始支持使用IPv6地址指定名称服务器。 </blockquote><p>  默认情况下，nginx将在解析时查找IPv4和IPv6地址。  如果不需要查找IPv6地址，可以指定<code class="notranslate">ipv6=off</code>参数。 </p><blockquote class="note">  从版本1.5.8开始支持将名称解析为IPv6地址。 </blockquote><p>  默认情况下，nginx使用响应的TTL值缓存答案。  可选的<code class="notranslate">valid</code>参数允许覆盖它： </p><blockquote class="example"><pre class="notranslate">resolver 127.0.0.1 [::1]:5353 valid=30s;<br></pre></blockquote><p></p><blockquote class="note">  在版本1.1.9之前，无法调整缓存时间，并且nginx始终缓存5分钟的持续时间。 </blockquote><p></p><blockquote class="note">  为防止DNS欺骗，建议在正确安全的受信任本地网络中配置DNS服务器。 </blockquote><p></p><a name="resolver_timeout"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>resolver_timeout</strong> <code class="notranslate"><i>time</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">resolver_timeout 30s;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  设置名称解析的超时，例如： </p><blockquote class="example"><pre class="notranslate">resolver_timeout 5s;<br></pre></blockquote><p></p><a name="root"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>root</strong> <code class="notranslate"><i>path</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">root html;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> , <code class="notranslate">if in location</code> <br><br>                </td></tr></tbody></table></div><p>  设置请求的根目录。  例如，使用以下配置 </p><blockquote class="example"><pre class="notranslate">location /i/ {<br>    root /data/w3;<br>}<br></pre></blockquote><p>  将发送<code class="notranslate">/data/w3/i/top.gif</code>文件以响应“ <code class="notranslate">/i/top.gif</code> ”请求。 </p><p>   <code class="notranslate"><i>path</i></code>值可以包含变量， <code class="notranslate">$document_root</code>和<code class="notranslate">$realpath_root</code>除外。 </p><p>  仅通过向<code class="notranslate">root</code>指令的值添加URI来构造文件的路径。  如果必须修改URI，则应使用<a hhref="#alias">别名</a>指令。 </p><a name="satisfy"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>satisfy</strong> <code class="notranslate">all</code> | <code class="notranslate">any</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">satisfy all;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  如果所有（ <code class="notranslate">all</code> ）或至少一个（ <code class="notranslate">any</code> ） <a hhref="ngx_http_access_module.html">ngx_http_access_module</a> ， <a hhref="ngx_http_auth_basic_module.html">ngx_http_auth_basic_module</a> ， <a hhref="ngx_http_auth_request_module.html">ngx_http_auth_request_module</a>或<a hhref="ngx_http_auth_jwt_module.html">ngx_http_auth_jwt_module</a>模块允许访问，则允许访问。 </p><p>  例： </p><blockquote class="example"><pre class="notranslate">location / {<br>    satisfy any;<p></p>
<pre><code>allow 192.168.1.0/32;
deny  all;

auth_basic           &quot;closed site&quot;;
auth_basic_user_file conf/htpasswd;
</code></pre><p>}<br></p></pre></blockquote><p></p><a name="send_lowat"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>send_lowat</strong> <code class="notranslate"><i>size</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">send_lowat 0;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  如果指令设置为非零值，nginx将尝试通过使用<a hhref="events.html#kqueue">kqueue</a>方法的<code class="notranslate">NOTE_LOWAT</code>标志或<code class="notranslate">SO_SNDLOWAT</code>套接字选项来最小化客户端套接字上的发送操作数。  在这两种情况下都使用指定的<code class="notranslate"><i>size</i></code> 。 </p><p>  在Linux，Solaris和Windows上忽略此指令。 </p><a name="send_timeout"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>send_timeout</strong> <code class="notranslate"><i>time</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">send_timeout 60s;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  设置将响应传输到客户端的超时。  仅在两次连续写操作之间设置超时，而不是整个响应的传输。  如果客户端在此时间内未收到任何内容，则会关闭连接。 </p><a name="sendfile"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>sendfile</strong> <code class="notranslate">on</code> | <code class="notranslate">off</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">sendfile off;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> , <code class="notranslate">if in location</code> <br><br>                </td></tr></tbody></table></div><p>  启用或禁用<code class="notranslate">sendfile()</code>的使用。 </p><p>  从nginx 0.8.12和FreeBSD 5.2.1开始， <a hhref="#aio">aio</a>可用于预加载<code class="notranslate">sendfile()</code>数据： </p><blockquote class="example"><pre class="notranslate">location /video/ {<br>    sendfile       on;<br>    tcp_nopush     on;<br>    aio            on;<br>}<br></pre></blockquote><p>  在此配置中，使用<code class="notranslate">SF_NODISKIO</code>标志调用<code class="notranslate">sendfile()</code> ，这会导致它不阻塞磁盘I / O，而是报告数据不在内存中。  然后，nginx通过读取一个字节来启动异步数据加载。  在第一次读取时，FreeBSD内核将文件的前128K字节加载到内存中，尽管下一次读取只会以16K块的形式加载数据。  可以使用<a hhref="#read_ahead">read_ahead</a>指令更改此<a hhref="#read_ahead">设置</a> 。 </p><blockquote class="note">  在1.7.11版之前，可以使用<code class="notranslate">aio sendfile;</code>启用预加载<code class="notranslate">aio sendfile;</code>   。 </blockquote><p></p><a name="sendfile_max_chunk"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>sendfile_max_chunk</strong> <code class="notranslate"><i>size</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">sendfile_max_chunk 0;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  设置为非零值时，限制可在单个<code class="notranslate">sendfile()</code>调用中传输的数据量。  没有限制，一个快速连接可能完全占用工作进程。 </p><a name="server"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>server</strong> { … }</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><p></p>
<pre><code>        —

            &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
        Context:
            &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
        &lt;code class=&quot;notranslate&quot;&gt;http&lt;/code&gt; &lt;br&gt;
            &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p&gt;  设置虚拟服务器的配置。  基于IP（基于IP地址）和基于名称（基于“主机”请求标头字段）的虚拟服务器之间没有明确的区别。  相反， &lt;a hhref=&quot;#listen&quot;&gt;listen&lt;/a&gt;指令描述了应该接受服务器连接的所有地址和端口， &lt;a hhref=&quot;#server_name&quot;&gt;server_name&lt;/a&gt;指令列出了所有服务器名称。   “ &lt;a hhref=&quot;request_processing.html&quot;&gt;如何nginx处理请求&lt;/a&gt; ”文档中提供了示例配置。 &lt;/p&gt;&lt;a name=&quot;server_name&quot;&gt;&lt;/a&gt;&lt;div class=&quot;directive&quot;&gt;&lt;table cellspacing=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
        Syntax:
            &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
        &lt;code class=&quot;notranslate&quot;&gt;&lt;strong&gt;server_name&lt;/strong&gt; &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;name&lt;/i&gt;&lt;/code&gt; ...;&lt;/code&gt; &lt;br&gt;
            &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
        Default:
            &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
        &lt;pre class=&quot;notranslate&quot;&gt;server_name &quot;&quot;;&lt;/pre&gt;
            &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
        Context:
            &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
        &lt;code class=&quot;notranslate&quot;&gt;server&lt;/code&gt; &lt;br&gt;
            &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p&gt;  设置虚拟服务器的名称，例如： &lt;/p&gt;&lt;blockquote class=&quot;example&quot;&gt;&lt;pre class=&quot;notranslate&quot;&gt;server {
server_name example.com www.example.com;
</code></pre><p>}<br></p><p></p><p>  第一个名称成为主服务器名称。 </p><p>  服务器名称可以包含替换名称的第一个或最后一个部分的星号（“ <code class="notranslate"><em></em></code> ”）： </p><blockquote class="example"><pre class="notranslate">server {<br>    server_name example.com .example.com www.example.*;<br>}<br></pre></blockquote><p>  这些名称称为通配符名称。 </p><p>  上面提到的前两个名称可以合二为一： </p><blockquote class="example"><pre class="notranslate">server {<br>    server_name .example.com;<br>}<br></pre></blockquote><p></p><p>  也可以在服务器名称中使用正则表达式，在名称前面加上波浪号（“ <code class="notranslate">~</code> ”）： </p><blockquote class="example"><pre class="notranslate">server {<br>    server_name www.example.com ~^www\d+.example.com$;<br>}<br></pre></blockquote><p></p><p>  正则表达式可以包含以后可以在其他指令中使用的捕获（0.7.40）： </p><blockquote class="example"><pre class="notranslate">server {<br>    server_name ~^(www.)?(.+)$;<p></p>
<pre><code>location / {
    root /sites/$2;
}
</code></pre><p>}</p>
<p>server {<br>    server<em>name </em>;</p>
<pre><code>location / {
    root /sites/default;
}
</code></pre><p>}<br></p></pre></blockquote><p></p><p>  正则表达式中的命名捕获创建变量（0.8.25），以后可以在其他指令中使用它们： </p><blockquote class="example"><pre class="notranslate">server {<br>    server_name ~^(www.)?(?&lt;domain&gt;.+)$;<p></p>
<pre><code>location / {
    root /sites/$domain;
}
</code></pre><p>}</p>
<p>server {<br>    server<em>name </em>;</p>
<pre><code>location / {
    root /sites/default;
}
</code></pre><p>}<br></p></pre></blockquote><p></p><p>  如果指令的参数设置为“ <code class="notranslate">$hostname</code> ”（0.9.4），则插入机器的主机名。 </p><p>  也可以指定一个空的服务器名称（0.7.11）： </p><blockquote class="example"><pre class="notranslate">server {<br>    server_name www.example.com “”;<br>}<br></pre></blockquote><p>  它允许此服务器处理请求而不使用“Host”头字段 - 而不是默认服务器 - 用于给定地址：端口对。  这是默认设置。 </p><blockquote class="note">  在0.8.48之前，默认使用机器的主机名。 </blockquote><p></p><p>  在按名称搜索虚拟服务器期间，如果名称与多个指定的变体匹配（例如，通配符名称和正则表达式匹配），将按以下优先级顺序选择第一个匹配的变体： </p><ol class="compact"><li>  确切的名字 </li><li>  以星号开头的最长通配符名称，例如“ <code class="notranslate"><em>.example.com</em></code> ” </li><li>  最长的通配符名称以星号结尾，例如“ <code class="notranslate">mail.</code> ” </li><li>  第一个匹配的正则表达式（按配置文件中的出现顺序） </li></ol><p></p><p>  服务器名称的详细描述在单独的<a hhref="server_names.html">服务器名称</a>文档中提供。 </p><a name="server_name_in_redirect"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>server_name_in_redirect</strong> <code class="notranslate">on</code> | <code class="notranslate">off</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">server_name_in_redirect off;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  在nginx发出的<a hhref="#absolute_redirect">绝对</a>重定向中启用或禁用<a hhref="#server_name">server_name</a>指令指定的主服务器名称。  禁用主服务器名称时，将使用“主机”请求标头字段中的名称。  如果此字段不存在，则使用服务器的IP地址。 </p><p>  在重定向中使用端口由<a hhref="#port_in_redirect">port_in_redirect</a>指令控制。 </p><a name="server_names_hash_bucket_size"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>server_names_hash_bucket_size</strong> <code class="notranslate"><i>size</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">server_names_hash_bucket_size 32|64|128;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> <br><br>                </td></tr></tbody></table></div><p>  设置服务器名称哈希表的存储桶大小。  默认值取决于处理器缓存行的大小。  设置哈希表的详细信息在单独的<a hhref="hash.html">文档</a>中提供。 </p><a name="server_names_hash_max_size"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>server_names_hash_max_size</strong> <code class="notranslate"><i>size</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">server_names_hash_max_size 512;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> <br><br>                </td></tr></tbody></table></div><p>  设置服务器名称哈希表的最大<code class="notranslate"><i>size</i></code> 。  设置哈希表的详细信息在单独的<a hhref="hash.html">文档</a>中提供。 </p><a name="server_tokens"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>server_tokens</strong><br>    <code class="notranslate">on</code> |<br>    <code class="notranslate">off</code> |<br>    <code class="notranslate">build</code> |<br>    <code class="notranslate"><i>string</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">server_tokens on;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  启用或禁用在错误页面和“服务器”响应头字段中发出nginx版本。 </p><a name="server_tokens_build"></a><p>   <code class="notranslate">build</code>参数（1.11.10）允许发出<a hhref="configure.html#build">构建名称</a>和nginx版本。 </p><p>  此外，作为<a hhref="http://nginx.com/products/">商业订阅的</a>一部分，从版本1.9.13开始，错误页面上的签名和“服务器”响应头字段值可以使用带变量的<code class="notranslate"><i>string</i></code>显式设置。  空字符串禁用“服务器”字段的发射。 </p><a name="subrequest_output_buffer_size"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>subrequest_output_buffer_size</strong> <code class="notranslate"><i>size</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">subrequest_output_buffer_size 4k|8k;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table><p>  该指令出现在1.13.10版本中。 </p></div><p> Sets the <code class="notranslate"><i>size</i></code> of the buffer used for storing the response body of a subrequest.  默认情况下，缓冲区大小等于一个内存页面。  这是4K或8K，具体取决于平台。  然而，它可以做得更小。 </p><p> The directive is applicable only for subrequests with response bodies saved into memory. For example, such subrequests are created by <a hhref="ngx_http_ssi_module.html#ssi_include_set">SSI</a> . </p><a name="tcp_nodelay"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>tcp_nodelay</strong> <code class="notranslate">on</code> | <code class="notranslate">off</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">tcp_nodelay on;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  启用或禁用<code class="notranslate">TCP_NODELAY</code>选项的使用。 The option is enabled when a connection is transitioned into the keep-alive state. Additionally, it is enabled on SSL connections, for unbuffered proxying, and for <a hhref="websocket.html">WebSocket</a> proxying. </p><a name="tcp_nopush"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>tcp_nopush</strong> <code class="notranslate">on</code> | <code class="notranslate">off</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">tcp_nopush off;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p> Enables or disables the use of the <code class="notranslate">TCP_NOPUSH</code> socket option on FreeBSD or the <code class="notranslate">TCP_CORK</code> socket option on Linux. The options are enabled only when <a hhref="#sendfile">sendfile</a> is used. Enabling the option allows </p><ul class="compact"><li> sending the response header and the beginning of a file in one packet, on Linux and FreeBSD 4.*; </li><li> sending a file in full packets. </li></ul><p></p><a name="try_files"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>try_files</strong> <code class="notranslate"><i>file</i></code> … <code class="notranslate"><i>uri</i></code> ;</code> <br> <code class="notranslate"><strong>try_files</strong> <code class="notranslate"><i>file</i></code> … = <code class="notranslate"><i>code</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><p></p>
<pre><code>        —

            &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
        Context:
            &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
        &lt;code class=&quot;notranslate&quot;&gt;server&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;location&lt;/code&gt; &lt;br&gt;
            &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p&gt; Checks the existence of files in the specified order and uses the first found file for request processing; the processing is performed in the current context. The path to a file is constructed from the &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;file&lt;/i&gt;&lt;/code&gt; parameter according to the &lt;a hhref=&quot;#root&quot;&gt;root&lt;/a&gt; and &lt;a hhref=&quot;#alias&quot;&gt;alias&lt;/a&gt; directives. It is possible to check directory&apos;s existence by specifying a slash at the end of a name, eg “ &lt;code class=&quot;notranslate&quot;&gt;$uri/&lt;/code&gt; ”. If none of the files were found, an internal redirect to the &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;uri&lt;/i&gt;&lt;/code&gt; specified in the last parameter is made.  例如： &lt;/p&gt;&lt;blockquote class=&quot;example&quot;&gt;&lt;pre class=&quot;notranslate&quot;&gt;location /images/ {
try_files $uri /images/default.gif;
</code></pre><p>}</p>
<p>location = /images/default.gif {<br>    expires 30s;<br>}<br></p><p> The last parameter can also point to a named location, as shown in examples below. Starting from version 0.7.51, the last parameter can also be a <code class="notranslate"><i>code</i></code> : </p><blockquote class="example"><pre class="notranslate">location / {<br>    try_files $uri $uri/index.html $uri.html =404;<br>}<br></pre></blockquote><p></p><p> Example in proxying Mongrel: </p><blockquote class="example"><pre class="notranslate">location / {<br>    try_files /system/maintenance.html<br>              $uri $uri/index.html $uri.html<br>              @mongrel;<br>}<p></p>
<p>location @mongrel {<br>    proxy_pass <a href="http://mongrel" target="_blank" rel="noopener">http://mongrel</a>;<br>}<br></p></pre></blockquote><p></p><p> Example for Drupal/FastCGI: </p><blockquote class="example"><pre class="notranslate">location / {<br>    try_files $uri $uri/ @drupal;<br>}<p></p>
<p>location ~ .php$ {<br>    try_files $uri @drupal;</p>
<pre><code>fastcgi_pass ...;

fastcgi_param SCRIPT_FILENAME /path/to$fastcgi_script_name;
fastcgi_param SCRIPT_NAME     $fastcgi_script_name;
fastcgi_param QUERY_STRING    $args;

... other fastcgi_param&apos;s
</code></pre><p>}</p>
<p>location @drupal {<br>    fastcgi_pass …;</p>
<pre><code>fastcgi_param SCRIPT_FILENAME /path/to/index.php;
fastcgi_param SCRIPT_NAME     /index.php;
fastcgi_param QUERY_STRING    q=$uri&amp;amp;$args;

... other fastcgi_param&apos;s
</code></pre><p>}<br></p></pre></blockquote><p> In the following example, </p><blockquote class="example"><pre class="notranslate">location / {<br>    try_files $uri $uri/ @drupal;<br>}<br></pre></blockquote><p> the <code class="notranslate">try_files</code> directive is equivalent to </p><blockquote class="example"><pre class="notranslate">location / {<br>    error_page 404 = @drupal;<br>    log_not_found off;<br>}<br></pre></blockquote><p> And here, </p><blockquote class="example"><pre class="notranslate">location ~ .php$ {<br>    try_files $uri @drupal;<p></p>
<pre><code>fastcgi_pass ...;

fastcgi_param SCRIPT_FILENAME /path/to$fastcgi_script_name;

...
</code></pre><p>}<br></p></pre></blockquote><p> <code class="notranslate">try_files</code> checks the existence of the PHP file before passing the request to the FastCGI server. </p><p> Example for Wordpress and Joomla: </p><blockquote class="example"><pre class="notranslate">location / {<br>    try_files $uri $uri/ @wordpress;<br>}<p></p>
<p>location ~ .php$ {<br>    try_files $uri @wordpress;</p>
<pre><code>fastcgi_pass ...;

fastcgi_param SCRIPT_FILENAME /path/to$fastcgi_script_name;
... other fastcgi_param&apos;s
</code></pre><p>}</p>
<p>location @wordpress {<br>    fastcgi_pass …;</p>
<pre><code>fastcgi_param SCRIPT_FILENAME /path/to/index.php;
... other fastcgi_param&apos;s
</code></pre><p>}<br></p></pre></blockquote><p></p><a name="types"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>types</strong> { … }</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">types {<br>    text/html  html;<br>    image/gif  gif;<br>    image/jpeg jpg;<br>}</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p> Maps file name extensions to MIME types of responses. Extensions are case-insensitive. Several extensions can be mapped to one type, for example: </p><blockquote class="example"><pre class="notranslate">types {<br>    application/octet-stream bin exe dll;<br>    application/octet-stream deb;<br>    application/octet-stream dmg;<br>}<br></pre></blockquote><p></p><p> A sufficiently full mapping table is distributed with nginx in the <code class="notranslate">conf/mime.types</code> file. </p><p> To make a particular location emit the “ <code class="notranslate">application/octet-stream</code> ” MIME type for all requests, the following configuration can be used: </p><blockquote class="example"><pre class="notranslate">location /download/ {<br>    types        { }<br>    default_type application/octet-stream;<br>}<br></pre></blockquote><p></p><a name="types_hash_bucket_size"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>types_hash_bucket_size</strong> <code class="notranslate"><i>size</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">types_hash_bucket_size 64;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p> Sets the bucket size for the types hash tables.  设置哈希表的详细信息在单独的<a hhref="hash.html">文档</a>中提供。 </p><blockquote class="note"> Prior to version 1.5.13, the default value depended on the size of the processor’s cache line. </blockquote><p></p><a name="types_hash_max_size"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>types_hash_max_size</strong> <code class="notranslate"><i>size</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">types_hash_max_size 1024;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p> Sets the maximum <code class="notranslate"><i>size</i></code> of the types hash tables.  设置哈希表的详细信息在单独的<a hhref="hash.html">文档</a>中提供。 </p><a name="underscores_in_headers"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>underscores_in_headers</strong> <code class="notranslate">on</code> | <code class="notranslate">off</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">underscores_in_headers off;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> <br><br>                </td></tr></tbody></table></div><p> Enables or disables the use of underscores in client request header fields. When the use of underscores is disabled, request header fields whose names contain underscores are marked as invalid and become subject to the <a hhref="#ignore_invalid_headers">ignore_invalid_headers</a> directive. </p><p> If the directive is specified on the <a hhref="#server">server</a> level, its value is only used if a server is a default one. The value specified also applies to all virtual servers listening on the same address and port. </p><a name="variables_hash_bucket_size"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>variables_hash_bucket_size</strong> <code class="notranslate"><i>size</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">variables_hash_bucket_size 64;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> <br><br>                </td></tr></tbody></table></div><p>  设置变量哈希表的桶大小。  设置哈希表的详细信息在单独的<a hhref="hash.html">文档</a>中提供。 </p><a name="variables_hash_max_size"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>variables_hash_max_size</strong> <code class="notranslate"><i>size</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">variables_hash_max_size 1024;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> <br><br>                </td></tr></tbody></table></div><p>  设置变量哈希表的最大<code class="notranslate"><i>size</i></code> 。  设置哈希表的详细信息在单独的<a hhref="hash.html">文档</a>中提供。 </p><blockquote class="note"> Prior to version 1.5.13, the default value was 512. </blockquote><p></p><a name="variables"></a><center><h4>  嵌入式变量 </h4></center><p> The <code class="notranslate">ngx_http_core_module</code> module supports embedded variables with names matching the Apache Server variables. First of all, these are variables representing client request header fields, such as <code class="notranslate">$http_user_agent</code> , <code class="notranslate">$http_cookie</code> , and so on. Also there are other variables: </p><dl class="compact"><dt id="var_arg_"> <code class="notranslate">$arg_</code> <code class="notranslate"><i>name</i></code> </dt><dd> argument <code class="notranslate"><i>name</i></code> in the request line </dd><dt id="var_args"> <code class="notranslate">$args</code> </dt> <dd> arguments in the request line </dd><dt id="var_binary_remote_addr"> <code class="notranslate">$binary_remote_addr</code> </dt> <dd>  客户端地址采用二进制形式，值的长度始终为IPv4地址的4个字节或IPv6地址的16个字节 </dd><dt id="var_body_bytes_sent"> <code class="notranslate">$body_bytes_sent</code> </dt> <dd> number of bytes sent to a client, not counting the response header; this variable is compatible with the “ <code class="notranslate">%B</code> ” parameter of the <code class="notranslate">mod_log_config</code> Apache module </dd><dt id="var_bytes_sent"> <code class="notranslate">$bytes_sent</code> </dt> <dd> number of bytes sent to a client (1.3.8, 1.2.5) </dd><dt id="var_connection"> <code class="notranslate">$connection</code> </dt> <dd> connection serial number (1.3.8, 1.2.5) </dd><dt id="var_connection_requests"> <code class="notranslate">$connection_requests</code> </dt> <dd> current number of requests made through a connection (1.3.8, 1.2.5) </dd><dt id="var_content_length"> <code class="notranslate">$content_length</code> </dt> <dd> “Content-Length” request header field </dd><dt id="var_content_type"> <code class="notranslate">$content_type</code> </dt> <dd> “Content-Type” request header field </dd><dt id="var_cookie_"> <code class="notranslate">$cookie_</code> <code class="notranslate"><i>name</i></code> </dt><dd> the <code class="notranslate"><i>name</i></code> cookie </dd><dt id="var_document_root"> <code class="notranslate">$document_root</code> </dt> <dd> <a hhref="#root">root</a> or <a hhref="#alias">alias</a> directive’s value for the current request </dd><dt id="var_document_uri"> <code class="notranslate">$document_uri</code> </dt> <dd> same as <code class="notranslate">$uri</code> </dd><dt id="var_host"> <code class="notranslate">$host</code> </dt> <dd> in this order of precedence: host name from the request line, or host name from the “Host” request header field, or the server name matching a request </dd><dt id="var_hostname"> <code class="notranslate">$hostname</code> </dt> <dd>  主机名 </dd><dt id="var_http_"> <code class="notranslate">$http_</code> <code class="notranslate"><i>name</i></code> </dt><dd> arbitrary request header field; the last part of a variable name is the field name converted to lower case with dashes replaced by underscores </dd><dt id="var_https"> <code class="notranslate">$https</code> </dt> <dd> “ <code class="notranslate">on</code> ” if connection operates in SSL mode, or an empty string otherwise </dd><dt id="var_is_args"> <code class="notranslate">$is_args</code> </dt> <dd> “ <code class="notranslate">?</code> ” if a request line has arguments, or an empty string otherwise </dd><dt id="var_limit_rate"> <code class="notranslate">$limit_rate</code> </dt> <dd> setting this variable enables response rate limiting; see <a hhref="#limit_rate">limit_rate</a> </dd><dt id="var_msec"> <code class="notranslate">$msec</code> </dt> <dd> current time in seconds with the milliseconds resolution (1.3.9, 1.2.6) </dd><dt id="var_nginx_version"> <code class="notranslate">$nginx_version</code> </dt> <dd>   nginx版本 </dd><dt id="var_pid"> <code class="notranslate">$pid</code> </dt> <dd>  工作进程的PID </dd><dt id="var_pipe"> <code class="notranslate">$pipe</code> </dt> <dd>   “ <code class="notranslate">p</code> ”如果请求是流水线的，“ <code class="notranslate">.</code> ” otherwise (1.3.12, 1.2.7) </dd><dt id="var_proxy_protocol_addr"> <code class="notranslate">$proxy_protocol_addr</code> </dt> <dd> client address from the PROXY protocol header, or an empty string otherwise (1.5.12) <p>  必须先通过在<a hhref="#listen">listen</a>指令中设置<code class="notranslate">proxy_protocol</code>参数来启用PROXY协议。 </p></dd><dt id="var_proxy_protocol_port"> <code class="notranslate">$proxy_protocol_port</code> </dt> <dd> client port from the PROXY protocol header, or an empty string otherwise (1.11.0) <p>  必须先通过在<a hhref="#listen">listen</a>指令中设置<code class="notranslate">proxy_protocol</code>参数来启用PROXY协议。 </p></dd><dt id="var_query_string"> <code class="notranslate">$query_string</code> </dt> <dd> same as <code class="notranslate">$args</code> </dd><dt id="var_realpath_root"> <code class="notranslate">$realpath_root</code> </dt> <dd> an absolute pathname corresponding to the <a hhref="#root">root</a> or <a hhref="#alias">alias</a> directive’s value for the current request, with all symbolic links resolved to real paths </dd><dt id="var_remote_addr"> <code class="notranslate">$remote_addr</code> </dt> <dd>  客户地址 </dd><dt id="var_remote_port"> <code class="notranslate">$remote_port</code> </dt> <dd>  客户端端口 </dd><dt id="var_remote_user"> <code class="notranslate">$remote_user</code> </dt> <dd> user name supplied with the Basic authentication </dd><dt id="var_request"> <code class="notranslate">$request</code> </dt> <dd> full original request line </dd><dt id="var_request_body"> <code class="notranslate">$request_body</code> </dt> <dd>  请求机构 <p> The variable’s value is made available in locations processed by the <a hhref="ngx_http_proxy_module.html#proxy_pass">proxy_pass</a> , <a hhref="ngx_http_fastcgi_module.html#fastcgi_pass">fastcgi_pass</a> , <a hhref="ngx_http_uwsgi_module.html#uwsgi_pass">uwsgi_pass</a> , and <a hhref="ngx_http_scgi_module.html#scgi_pass">scgi_pass</a> directives when the request body was read to a <a hhref="#client_body_buffer_size">memory buffer</a> . </p></dd><dt id="var_request_body_file"> <code class="notranslate">$request_body_file</code> </dt> <dd> name of a temporary file with the request body <p> At the end of processing, the file needs to be removed. To always write the request body to a file, <a hhref="#client_body_in_file_only">client_body_in_file_only</a> needs to be enabled. When the name of a temporary file is passed in a proxied request or in a request to a FastCGI/uwsgi/SCGI server, passing the request body should be disabled by the <a hhref="ngx_http_proxy_module.html#proxy_pass_request_body">proxy_pass_request_body off</a> , <a hhref="ngx_http_fastcgi_module.html#fastcgi_pass_request_body">fastcgi_pass_request_body off</a> , <a hhref="ngx_http_uwsgi_module.html#uwsgi_pass_request_body">uwsgi_pass_request_body off</a> , or <a hhref="ngx_http_scgi_module.html#scgi_pass_request_body">scgi_pass_request_body off</a> directives, respectively. </p></dd><dt id="var_request_completion"> <code class="notranslate">$request_completion</code> </dt> <dd> “ <code class="notranslate">OK</code> ” if a request has completed, or an empty string otherwise </dd><dt id="var_request_filename"> <code class="notranslate">$request_filename</code> </dt> <dd> file path for the current request, based on the <a hhref="#root">root</a> or <a hhref="#alias">alias</a> directives, and the request URI </dd><dt id="var_request_id"> <code class="notranslate">$request_id</code> </dt> <dd> unique request identifier generated from 16 random bytes, in hexadecimal (1.11.0) </dd><dt id="var_request_length"> <code class="notranslate">$request_length</code> </dt> <dd> request length (including request line, header, and request body) (1.3.12, 1.2.7) </dd><dt id="var_request_method"> <code class="notranslate">$request_method</code> </dt> <dd> request method, usually “ <code class="notranslate">GET</code> ” or “ <code class="notranslate">POST</code> ” </dd><dt id="var_request_time"> <code class="notranslate">$request_time</code> </dt> <dd> request processing time in seconds with a milliseconds resolution (1.3.9, 1.2.6); time elapsed since the first bytes were read from the client </dd><dt id="var_request_uri"> <code class="notranslate">$request_uri</code> </dt> <dd> full original request URI (with arguments) </dd><dt id="var_scheme"> <code class="notranslate">$scheme</code> </dt> <dd> request scheme, “ <code class="notranslate">http</code> ” or “ <code class="notranslate">https</code> ” </dd><dt id="var_sent_http_"> <code class="notranslate">$sent<em>http</em></code> <code class="notranslate"><i>name</i></code> </dt><dd> arbitrary response header field; the last part of a variable name is the field name converted to lower case with dashes replaced by underscores </dd><dt id="var_sent_trailer_"> <code class="notranslate">$sent<em>trailer</em></code> <code class="notranslate"><i>name</i></code> </dt><dd> arbitrary field sent at the end of the response (1.13.2); the last part of a variable name is the field name converted to lower case with dashes replaced by underscores </dd><dt id="var_server_addr"> <code class="notranslate">$server_addr</code> </dt> <dd> an address of the server which accepted a request <p>  计算此变量的值通常需要一次系统调用。  为避免系统调用， <a hhref="#listen">listen</a>指令必须指定地址并使用<code class="notranslate">bind</code>参数。 </p></dd><dt id="var_server_name"> <code class="notranslate">$server_name</code> </dt> <dd> name of the server which accepted a request </dd><dt id="var_server_port"> <code class="notranslate">$server_port</code> </dt> <dd> port of the server which accepted a request </dd><dt id="var_server_protocol"> <code class="notranslate">$server_protocol</code> </dt> <dd> request protocol, usually “ <code class="notranslate">HTTP/1.0</code> ”, “ <code class="notranslate">HTTP/1.1</code> ”, or “ <a hhref="ngx_http_v2_module.html">HTTP/2.0</a> ” </dd><dt id="var_status"> <code class="notranslate">$status</code> </dt> <dd> response status (1.3.2, 1.2.2) </dd><dt id="var_tcpinfo_"> <code class="notranslate">$tcpinfo_rtt</code> , <code class="notranslate">$tcpinfo_rttvar</code> , <code class="notranslate">$tcpinfo_snd_cwnd</code> , <code class="notranslate">$tcpinfo_rcv_space</code> </dt><dd> information about the client TCP connection; available on systems that support the <code class="notranslate">TCP_INFO</code> socket option </dd><dt id="var_time_iso8601"> <code class="notranslate">$time_iso8601</code> </dt> <dd> local time in the ISO 8601 standard format (1.3.12, 1.2.7) </dd><dt id="var_time_local"> <code class="notranslate">$time_local</code> </dt> <dd> local time in the Common Log Format (1.3.12, 1.2.7) </dd><dt id="var_uri"> <code class="notranslate">$uri</code> </dt> <dd> current URI in request, <a hhref="#location">normalized</a> <p> The value of <code class="notranslate">$uri</code> may change during request processing, eg when doing internal redirects, or when using index files. </p></dd></dl><p></p> <p></p>
</td></tr></tbody></table></div></td></tr></tbody></table></div></td></tr></tbody></table></div></td></tr></tbody></table></div></td></tr></tbody></table></div></td></tr></tbody></table></div></td></tr></tbody></table></div></td></tr></tbody></table></div></td></tr></tbody></table></div>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nginx.im/ngx/http/ngx_http_charset_module.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="IM.NGINX">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="IM.NGINX">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/ngx/http/ngx_http_charset_module.html" itemprop="url">未命名</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-21T16:09:50+08:00">
                2018年12月21日
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p></p><h2 class="notranslate">Module ngx_http_charset_module</h2><table width="100%"><tbody><tr><td align="left" class="notranslate"> <a hhref="#example">Example Configuration</a> <br> <a hhref="#directives">Directives</a> <br>     <a hhref="#charset">charset</a> <br>     <a hhref="#charset_map">charset_map</a> <br>     <a hhref="#charset_types">charset_types</a> <br>     <a hhref="#override_charset">override_charset</a> <br>     <a hhref="#source_charset">source_charset</a> <br></td></tr></tbody></table><a name="summary"></a><p>   <code class="notranslate">ngx_http_charset_module</code>模块将指定的字符集添加到“Content-Type”响应头字段。  此外，该模块可以将数据从一个字符集转换为另一个字符集，但有一些限制： </p><ul class="compact"><li>  转换是以一种方式执行的 - 从服务器到客户端， </li><li>  只能转换单字节字符集 </li><li>  或者来自UTF-8的单字节字符集。 </li></ul><p></p><a name="example"></a><center><h4>  示例配置 </h4></center><p></p><blockquote class="example"><pre class="notranslate">include        conf/koi-win;<p></p>
<p>charset        windows-1251;<br>source_charset koi8-r;<br></p></pre></blockquote><p></p><a name="directives"></a><center><h4>  指令 </h4></center><a name="charset"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>charset</strong> <code class="notranslate"><i>charset</i></code> | <code class="notranslate">off</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">charset off;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> , <code class="notranslate">if in location</code> <br><br>                </td></tr></tbody></table></div><p>  将指定的charset添加到“Content-Type”响应头字段。  如果此charset与<a hhref="#source_charset">source_charset</a>指令中指定的charset不同，则执行转换。 </p><p>  参数<code class="notranslate">off</code>取消将charset添加到“Content-Type”响应头字段。 </p><p>  可以使用变量定义charset： </p><blockquote class="example"><pre class="notranslate">charset $charset;<br></pre></blockquote><p>  在这种情况下，变量的所有可能值需要以<a hhref="#charset_map">charset_map</a> ， <a hhref="#charset">charset</a>或<a hhref="#source_charset">source_charset</a>指令的形式存在于配置中至少一次。  对于<code class="notranslate">utf-8</code> ， <code class="notranslate">windows-1251</code>和<code class="notranslate">koi8-r</code> charsets，将文件<code class="notranslate">conf/koi-win</code> ， <code class="notranslate">conf/koi-utf</code>和<code class="notranslate">conf/win-utf</code>包含在<code class="notranslate">conf/koi-win</code>就足够了。  对于其他字符集，只需制作虚构的转换表即可，例如： </p><blockquote class="example"><pre class="notranslate">charset<em>map iso-8859-5 </em> { }<br></pre></blockquote><p></p><p>  此外，可以在“X-Accel-Charset”响应头字段中设置字符集。  可以使用<a hhref="ngx_http_proxy_module.html#proxy_ignore_headers">proxy_ignore_headers</a> ， <a hhref="ngx_http_fastcgi_module.html#fastcgi_ignore_headers">fastcgi_ignore_headers</a> ， <a hhref="ngx_http_uwsgi_module.html#uwsgi_ignore_headers">uwsgi_ignore_headers</a> ， <a hhref="ngx_http_scgi_module.html#scgi_ignore_headers">scgi_ignore_headers</a>和<a hhref="ngx_http_grpc_module.html#grpc_ignore_headers">grpc_ignore_headers</a>指令禁用此功能。 </p><a name="charset_map"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>charset_map</strong> <code class="notranslate"><i>charset1</i></code> <code class="notranslate"><i>charset2</i></code> { … }</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><p></p>
<pre><code>        —

            &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
        Context:
            &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
        &lt;code class=&quot;notranslate&quot;&gt;http&lt;/code&gt; &lt;br&gt;
            &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p&gt;  描述从一个字符集到另一个字符集的转换表。  使用相同的数据构建反向转换表。  字符代码以十六进制给出。   80-FF范围内的缺失字符被替换为“ &lt;code class=&quot;notranslate&quot;&gt;?&lt;/code&gt;   ”。  从UTF-8转换时，单字节字符集中缺少的字符将替换为“ &lt;code class=&quot;notranslate&quot;&gt;&amp;amp;#XXXX;&lt;/code&gt;   ”。 &lt;/p&gt;&lt;p&gt;  例： &lt;/p&gt;&lt;blockquote class=&quot;example&quot;&gt;&lt;pre class=&quot;notranslate&quot;&gt;charset_map koi8-r windows-1251 {
C0 FE ; # small yu
C1 E0 ; # small a
C2 E1 ; # small b
C3 F6 ; # small ts
...
</code></pre><p>}<br></p><p></p><p>  在将转换表描述为UTF-8时，应在第二列中给出UTF-8字符集的代码，例如： </p><blockquote class="example"><pre class="notranslate">charset_map koi8-r utf-8 {<br>    C0 D18E ; # small yu<br>    C1 D0B0 ; # small a<br>    C2 D0B1 ; # small b<br>    C3 D186 ; # small ts<br>    …<br>}<br></pre></blockquote><p></p><p>  在分配文件<code class="notranslate">conf/koi-win</code> ， <code class="notranslate">conf/koi-utf</code>和<code class="notranslate">conf/win-utf</code>中提供了从<code class="notranslate">koi8-r</code>到<code class="notranslate">windows-1251</code> ，从<code class="notranslate">koi8-r</code>和<code class="notranslate">windows-1251</code>到<code class="notranslate">utf-8</code>完整转换表。 </p><a name="charset_types"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>charset_types</strong> <code class="notranslate"><i>mime-type</i></code> …;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">charset_types text/html text/xml text/plain text/vnd.wap.wml<br>application/javascript application/rss+xml;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table><p>  该指令出现在0.7.9版本中。 </p></div><p>  除了“ <code class="notranslate">text/html</code> ”之外，还可以在具有指定MIME类型的响应中启用模块处理。  特殊值“ <code class="notranslate">*</code> ”匹配任何MIME类型（0.8.29）。 </p><p></p><blockquote class="note">  在版本1.5.4之前，“ <code class="notranslate">application/x-javascript</code> ”被用作默认MIME类型而不是“ <code class="notranslate">application/javascript</code> ”。 </blockquote><p></p><a name="override_charset"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>override_charset</strong> <code class="notranslate">on</code> | <code class="notranslate">off</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">override_charset off;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> , <code class="notranslate">if in location</code> <br><br>                </td></tr></tbody></table></div><p>  确定当答案已在“Content-Type”响应头字段中携带字符集时，是否应对从代理或FastCGI / uwsgi / SCGI / gRPC服务器接收的答案执行转换。  如果启用了转换，则将接收到的响应中指定的字符集用作源字符集。 </p><blockquote class="note">  应当注意，如果在子请求中接收到响应，则始终执行从响应字符集到主请求字符集的转换，而不管<code class="notranslate">override_charset</code>指令设置如何。 </blockquote><p></p><a name="source_charset"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>source_charset</strong> <code class="notranslate"><i>charset</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><p></p>
<pre><code>—

    &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Context:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
&lt;code class=&quot;notranslate&quot;&gt;http&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;server&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;location&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;if in location&lt;/code&gt; &lt;br&gt;
    &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p&gt;  定义响应的源字符集。  如果此charset与&lt;a hhref=&quot;#charset&quot;&gt;charset&lt;/a&gt;指令中指定的&lt;a hhref=&quot;#charset&quot;&gt;charset&lt;/a&gt;不同，则执行转换。 &lt;/p&gt; 
</code></pre><p><span></span><div style="display: none;"></div></p>
</td></tr></tbody></table></div></td></tr></tbody></table></div>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nginx.im/ngx/http/ngx_http_browser_module.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="IM.NGINX">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="IM.NGINX">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/ngx/http/ngx_http_browser_module.html" itemprop="url">未命名</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-21T16:09:50+08:00">
                2018年12月21日
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p></p><h2 class="notranslate">Module ngx_http_browser_module</h2><table width="100%"><tbody><tr><td align="left" class="notranslate"> <a hhref="#example">Example Configuration</a> <br> <a hhref="#directives">Directives</a> <br>     <a hhref="#ancient_browser">ancient_browser</a> <br>     <a hhref="#ancient_browser_value">ancient_browser_value</a> <br>     <a hhref="#modern_browser">modern_browser</a> <br>     <a hhref="#modern_browser_value">modern_browser_value</a> <br></td></tr></tbody></table><a name="summary"></a><p>   <code class="notranslate">ngx_http_browser_module</code>模块创建的变量的值取决于“User-Agent”请求标头字段的值： </p><dl class="compact"><dt id="var_modern_browser"> <code class="notranslate">$modern_browser</code> </dt> <dd>  如果浏览器被识别为现代，则等于<a hhref="#modern_browser_value">modern_browser_value</a>指令设置的值; </dd><dt id="var_ancient_browser"> <code class="notranslate">$ancient_browser</code> </dt> <dd>  如果浏览器被识别为古代，则等于<a hhref="#ancient_browser_value">ancient_browser_value</a>指令设置的值; </dd><dt id="var_msie"> <code class="notranslate">$msie</code> </dt> <dd>  如果浏览器被识别为任何版本的MSIE，则等于“1”。 </dd></dl><p></p><a name="example"></a><center><h4>  示例配置 </h4></center><p>  选择索引文件： </p><blockquote class="example"><pre class="notranslate">modern_browser_value “modern.”;<p></p>
<p>modern_browser msie      5.5;<br>modern_browser gecko     1.0.0;<br>modern_browser opera     9.0;<br>modern_browser safari    413;<br>modern_browser konqueror 3.0;</p>
<p>index index.${modern_browser}html index.html;<br></p></pre></blockquote><p></p><p>  旧浏览器的重定向： </p><blockquote class="example"><pre class="notranslate">modern_browser msie      5.0;<br>modern_browser gecko     0.9.1;<br>modern_browser opera     8.0;<br>modern_browser safari    413;<br>modern_browser konqueror 3.0;<p></p>
<p>modern_browser unlisted;</p>
<p>ancient_browser Links Lynx netscape4;</p>
<p>if ($ancient_browser) {<br>    rewrite ^ /ancient.html;<br>}<br></p></pre></blockquote><p></p><a name="directives"></a><center><h4>  指令 </h4></center><a name="ancient_browser"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>ancient_browser</strong> <code class="notranslate"><i>string</i></code> …;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><p></p>
<pre><code>—

    &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Context:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
&lt;code class=&quot;notranslate&quot;&gt;http&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;server&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;location&lt;/code&gt; &lt;br&gt;
    &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p&gt;  如果在“User-Agent”请求标头字段中找到任何指定的子字符串，则浏览器将被视为古代。  特殊字符串“ &lt;code class=&quot;notranslate&quot;&gt;netscape4&lt;/code&gt; ”对应于正则表达式“ &lt;code class=&quot;notranslate&quot;&gt;^Mozilla/[1-4]&lt;/code&gt; ”。 &lt;/p&gt;&lt;a name=&quot;ancient_browser_value&quot;&gt;&lt;/a&gt;&lt;div class=&quot;directive&quot;&gt;&lt;table cellspacing=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Syntax:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
&lt;code class=&quot;notranslate&quot;&gt;&lt;strong&gt;ancient_browser_value&lt;/strong&gt; &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;string&lt;/i&gt;&lt;/code&gt; ;&lt;/code&gt; &lt;br&gt;
    &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Default:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
&lt;pre class=&quot;notranslate&quot;&gt;ancient_browser_value 1;&lt;/pre&gt;
    &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Context:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
&lt;code class=&quot;notranslate&quot;&gt;http&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;server&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;location&lt;/code&gt; &lt;br&gt;
    &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p&gt;  设置&lt;code class=&quot;notranslate&quot;&gt;$ancient_browser&lt;/code&gt;变量的值。 &lt;/p&gt;&lt;a name=&quot;modern_browser&quot;&gt;&lt;/a&gt;&lt;div class=&quot;directive&quot;&gt;&lt;table cellspacing=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Syntax:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
&lt;code class=&quot;notranslate&quot;&gt;&lt;strong&gt;modern_browser&lt;/strong&gt; &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;browser&lt;/i&gt;&lt;/code&gt; &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;version&lt;/i&gt;&lt;/code&gt; ;&lt;/code&gt; &lt;br&gt; &lt;code class=&quot;notranslate&quot;&gt;&lt;strong&gt;modern_browser&lt;/strong&gt; &lt;code class=&quot;notranslate&quot;&gt;unlisted&lt;/code&gt; ;&lt;/code&gt; &lt;br&gt;
    &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Default:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;

—

    &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Context:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
&lt;code class=&quot;notranslate&quot;&gt;http&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;server&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;location&lt;/code&gt; &lt;br&gt;
    &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p&gt;  指定从中将浏览器视为现代的版本。  浏览器可以是以下任何一种： &lt;code class=&quot;notranslate&quot;&gt;msie&lt;/code&gt; ， &lt;code class=&quot;notranslate&quot;&gt;gecko&lt;/code&gt; （基于Mozilla的浏览器）， &lt;code class=&quot;notranslate&quot;&gt;opera&lt;/code&gt; ， &lt;code class=&quot;notranslate&quot;&gt;safari&lt;/code&gt;或&lt;code class=&quot;notranslate&quot;&gt;konqueror&lt;/code&gt; 。 &lt;/p&gt;&lt;p&gt;  可以使用以下格式指定版本：X，XX，XXX或XXXX每种格式的最大值分别为4000,4000.99,4000.99.99和4000.99.99.99。 &lt;/p&gt;&lt;p&gt;   &lt;code class=&quot;notranslate&quot;&gt;unlisted&lt;/code&gt;的特殊值指定将浏览器视为现代浏览器，如果它未被&lt;code class=&quot;notranslate&quot;&gt;modern_browser&lt;/code&gt;和&lt;a hhref=&quot;#ancient_browser&quot;&gt;ancient_browser&lt;/a&gt;指令列出。  否则这样的浏览器被认为是古老的。  如果请求未在标头中提供“User-Agent”字段，则将浏览器视为未列出。 &lt;/p&gt;&lt;a name=&quot;modern_browser_value&quot;&gt;&lt;/a&gt;&lt;div class=&quot;directive&quot;&gt;&lt;table cellspacing=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Syntax:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
&lt;code class=&quot;notranslate&quot;&gt;&lt;strong&gt;modern_browser_value&lt;/strong&gt; &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;string&lt;/i&gt;&lt;/code&gt; ;&lt;/code&gt; &lt;br&gt;
    &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Default:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
&lt;pre class=&quot;notranslate&quot;&gt;modern_browser_value 1;&lt;/pre&gt;
    &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Context:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
&lt;code class=&quot;notranslate&quot;&gt;http&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;server&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;location&lt;/code&gt; &lt;br&gt;
    &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p&gt;  设置&lt;code class=&quot;notranslate&quot;&gt;$modern_browser&lt;/code&gt;变量的值。 &lt;/p&gt; 
</code></pre><p><span></span><div style="display: none;"></div></p>
</td></tr></tbody></table></div>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nginx.im/ngx/http/ngx_http_autoindex_module.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="IM.NGINX">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="IM.NGINX">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/ngx/http/ngx_http_autoindex_module.html" itemprop="url">未命名</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-21T16:09:50+08:00">
                2018年12月21日
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p></p><h2 class="notranslate">Module ngx_http_autoindex_module</h2><table width="100%"><tbody><tr><td align="left" class="notranslate"> <a hhref="#example">Example Configuration</a> <br> <a hhref="#directives">Directives</a> <br>     <a hhref="#autoindex">autoindex</a> <br>     <a hhref="#autoindex_exact_size">autoindex_exact_size</a> <br>     <a hhref="#autoindex_format">autoindex_format</a> <br>     <a hhref="#autoindex_localtime">autoindex_localtime</a> <br></td></tr></tbody></table><a name="summary"></a><p>   <code class="notranslate">ngx_http_autoindex_module</code>模块处理以斜杠字符（’ <code class="notranslate">/</code> ‘）结尾的请求，并生成目录列表。  当<a hhref="ngx_http_index_module.html">ngx_http_index_module</a>模块找不到索引文件时，通常<code class="notranslate">ngx_http_autoindex_module</code>请求传递给<code class="notranslate">ngx_http_autoindex_module</code>模块。 </p><a name="example"></a><center><h4>  示例配置 </h4></center><p></p><blockquote class="example"><pre class="notranslate">location / {<br>    autoindex on;<br>}<br></pre></blockquote><p></p><a name="directives"></a><center><h4>  指令 </h4></center><a name="autoindex"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>autoindex</strong> <code class="notranslate">on</code> | <code class="notranslate">off</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">autoindex off;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  启用或禁用目录列表输出。 </p><a name="autoindex_exact_size"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>autoindex_exact_size</strong> <code class="notranslate">on</code> | <code class="notranslate">off</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">autoindex_exact_size on;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  对于HTML <a hhref="#autoindex_format">格式</a> ，指定是否应在目录列表中输出确切的文件大小，或者更确切地舍入为千字节，兆字节和千兆字节。 </p><a name="autoindex_format"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>autoindex_format</strong><br>    <code class="notranslate">html</code> |<br>    <code class="notranslate">xml</code> |<br>    <code class="notranslate">json</code> |<br>    <code class="notranslate">jsonp</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">autoindex_format html;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table><p>  该指令出现在1.7.9版本中。 </p></div><p>  设置目录列表的格式。 </p><p>  使用JSONP格式时，使用<code class="notranslate">callback</code>请求参数设置回调函数的名称。  如果参数缺失或具有空值，则使用JSON格式。 </p><p>  可以使用<a hhref="ngx_http_xslt_module.html">ngx_http_xslt_module</a>模块转换XML输出。 </p><a name="autoindex_localtime"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>autoindex_localtime</strong> <code class="notranslate">on</code> | <code class="notranslate">off</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">autoindex_localtime off;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  对于HTML <a hhref="#autoindex_format">格式</a> ，指定目录列表中的时间是应以本地时区还是UTC输出。 </p><br><span></span><div style="display: none;"></div><p></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nginx.im/ngx/http/ngx_http_auth_request_module.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="IM.NGINX">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="IM.NGINX">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/ngx/http/ngx_http_auth_request_module.html" itemprop="url">未命名</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-21T16:09:50+08:00">
                2018年12月21日
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p></p><h2 class="notranslate">Module ngx_http_auth_request_module</h2><table width="100%"><tbody><tr><td align="left" class="notranslate"> <a hhref="#example">Example Configuration</a> <br> <a hhref="#directives">Directives</a> <br>     <a hhref="#auth_request">auth_request</a> <br>     <a hhref="#auth_request_set">auth_request_set</a> <br></td></tr></tbody></table><a name="summary"></a><p>   <code class="notranslate">ngx_http_auth_request_module</code>模块（1.5.4+）基于子请求的结果实现客户端授权。  如果子请求返回2xx响应代码，则允许访问。  如果它返回401或403，则拒绝访问，并显示相应的错误代码。  子请求返回的任何其他响应代码都被视为错误。 </p><p>  对于401错误，客户端还从子请求响应中接收“WWW-Authenticate”头。 </p><p>  默认情况下不构建此模块，应使用<code class="notranslate">–with-http_auth_request_module</code>配置参数启用它。 </p><p>  该模块可以通过<a hhref="ngx_http_core_module.html#satisfy">满足</a>指令与其他访问模块组合，例如<a hhref="ngx_http_access_module.html">ngx_http_access_module</a> ， <a hhref="ngx_http_auth_basic_module.html">ngx_http_auth_basic_module</a>和<a hhref="ngx_http_auth_jwt_module.html">ngx_http_auth_jwt_module</a> 。 </p><blockquote class="note">  在1.7.3版之前，无法缓存对授权子请求的响应（使用<a hhref="ngx_http_proxy_module.html#proxy_cache">proxy_cache</a> ， <a hhref="ngx_http_proxy_module.html#proxy_store">proxy_store</a>等）。 </blockquote><p></p><a name="example"></a><center><h4>  示例配置 </h4></center><p></p><blockquote class="example"><pre class="notranslate">location /private/ {<br>    auth_request /auth;<br>    …<br>}<p></p>
<p>location = /auth {<br>    proxy_pass …<br>    proxy_pass_request_body off;<br>    proxy_set_header Content-Length “”;<br>    proxy_set_header X-Original-URI $request_uri;<br>}<br></p></pre></blockquote><p></p><a name="directives"></a><center><h4>  指令 </h4></center><a name="auth_request"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>auth_request</strong> <code class="notranslate"><i>uri</i></code> | <code class="notranslate">off</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">auth_request off;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table></div><p>  根据子请求的结果启用授权，并设置子请求将发送到的URI。 </p><a name="auth_request_set"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>auth_request_set</strong> <code class="notranslate"><i>$variable</i></code> <code class="notranslate"><i>value</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><p></p>
<pre><code>—

    &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Context:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
&lt;code class=&quot;notranslate&quot;&gt;http&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;server&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;location&lt;/code&gt; &lt;br&gt;
    &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p&gt;  授权请求完成后，将请求&lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;variable&lt;/i&gt;&lt;/code&gt;设置为给定&lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;value&lt;/i&gt;&lt;/code&gt; 。  该值可能包含授权请求中的变量，例如&lt;code class=&quot;notranslate&quot;&gt;$upstream_http_*&lt;/code&gt; 。 &lt;/p&gt; 
</code></pre><p><span></span><div style="display: none;"></div></p>
</td></tr></tbody></table></div>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nginx.im/ngx/http/ngx_http_auth_jwt_module.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="IM.NGINX">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="IM.NGINX">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/ngx/http/ngx_http_auth_jwt_module.html" itemprop="url">未命名</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-21T16:09:50+08:00">
                2018年12月21日
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p></p><h2 class="notranslate">Module ngx_http_auth_jwt_module</h2><table width="100%"><tbody><tr><td align="left" class="notranslate"> <a hhref="#example">Example Configuration</a> <br> <a hhref="#directives">Directives</a> <br>     <a hhref="#auth_jwt">auth_jwt</a> <br>     <a hhref="#auth_jwt_claim_set">auth_jwt_claim_set</a> <br>     <a hhref="#auth_jwt_header_set">auth_jwt_header_set</a> <br>     <a hhref="#auth_jwt_key_file">auth_jwt_key_file</a> <br>     <a hhref="#auth_jwt_key_request">auth_jwt_key_request</a> <br>     <a hhref="#auth_jwt_leeway">auth_jwt_leeway</a> <br> <a hhref="#variables">Embedded Variables</a> <br></td></tr></tbody></table><a name="summary"></a><p>   <code class="notranslate">ngx_http_auth_jwt_module</code>模块（1.11.3）通过使用指定的密钥验证提供的<a hhref="https://tools.ietf.org/html/rfc7519">JSON Web令牌</a> （JWT）来实现客户端授权。   JWT声明必须以<a hhref="https://tools.ietf.org/html/rfc7515">JSON Web签名</a> （JWS）结构进行编码。  该模块可用于<a hhref="http://openid.net/specs/openid-connect-core-1_0.html">OpenID Connect</a>身份验证。 </p><p>  该模块可以通过<a hhref="ngx_http_core_module.html#satisfy">满足</a>指令与其他访问模块组合，例如<a hhref="ngx_http_access_module.html">ngx_http_access_module</a> ， <a hhref="ngx_http_auth_basic_module.html">ngx_http_auth_basic_module</a>和<a hhref="ngx_http_auth_request_module.html">ngx_http_auth_request_module</a> 。 </p><p>  该模块支持以下加密<a hhref="https://www.iana.org/assignments/jose/jose.xhtml#web-signature-encryption-algorithms">算法</a> ： </p><ul class="compact"><li>   HS256，HS384，HS512 </li><li>   RS256，RS384，RS512 </li><li>   ES256，ES384，ES512 </li><li>   EdDSA（Ed25519和Ed448签名）（1.15.7） </li></ul><p>  在1.13.7版之前，仅支持HS256，RS256，ES256算法。 </p><p></p><blockquote class="note">  该模块作为我们<a hhref="http://nginx.com/products/">商业订阅的</a>一部分提供。 </blockquote><p></p><a name="example"></a><center><h4>  示例配置 </h4></center><p></p><blockquote class="example"><pre class="notranslate">location / {<br>    auth_jwt          “closed site”;<br>    auth_jwt_key_file conf/keys.json;<br>}<br></pre></blockquote><p></p><a name="directives"></a><center><h4>  指令 </h4></center><a name="auth_jwt"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>auth_jwt</strong><br>    <code class="notranslate"><i>string</i></code><br>    [ <code class="notranslate">token=</code> <code class="notranslate"><i>$variable</i></code> ] |<br>    <code class="notranslate">off</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">auth_jwt off;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> , <code class="notranslate">limit_except</code> <br><br>                </td></tr></tbody></table></div><p>  启用JSON Web Token的验证。  指定的<code class="notranslate"><i>string</i></code>用作域。  参数值可以包含变量。 </p><p>  可选的<code class="notranslate">token</code>参数指定包含JSON Web Token的变量。  默认情况下，JWT作为<a hhref="https://tools.ietf.org/html/rfc6750">承载令牌</a>在“授权”标头中传递。   JWT也可以作为cookie或查询字符串的一部分传递： </p><blockquote class="example"><pre class="notranslate">auth_jwt “closed site” token=$cookie_auth_token;<br></pre></blockquote><p></p><p>  特殊值<code class="notranslate">off</code>取消了从先前配置级别继承的<code class="notranslate">auth_jwt</code>伪指令的效果。 </p><a name="auth_jwt_claim_set"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>auth_jwt_claim_set</strong> <code class="notranslate"><i>$variable</i></code> <code class="notranslate"><i>name</i></code> …;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><p></p>
<pre><code>        —

            &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
        Context:
            &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
        &lt;code class=&quot;notranslate&quot;&gt;http&lt;/code&gt; &lt;br&gt;
            &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;  该指令出现在1.11.10版中。 &lt;/p&gt;&lt;/div&gt;&lt;p&gt;  将&lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;variable&lt;/i&gt;&lt;/code&gt;设置为由键名标识的JWT声明参数。  名称匹配从JSON树的顶级开始。  对于数组，变量保留由逗号分隔的数组元素列表。 &lt;/p&gt;&lt;blockquote class=&quot;example&quot;&gt;&lt;pre class=&quot;notranslate&quot;&gt;location / {
auth_jwt           &quot;closed site&quot;;
auth_jwt_key_file  conf/keys.json;
auth_jwt_claim_set $email info e-mail;
auth_jwt_claim_set $job info &quot;job title&quot;;
</code></pre><p>}<br></p><p></p><blockquote class="note">  在1.13.7版之前，只能指定一个键名，并且数组的结果未定义。 </blockquote><p></p><a name="auth_jwt_header_set"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>auth_jwt_header_set</strong> <code class="notranslate"><i>$variable</i></code> <code class="notranslate"><i>name</i></code> …;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><p></p>
<pre><code>—

    &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Context:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
&lt;code class=&quot;notranslate&quot;&gt;http&lt;/code&gt; &lt;br&gt;
    &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;  该指令出现在1.11.10版中。 &lt;/p&gt;&lt;/div&gt;&lt;p&gt;  将&lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;variable&lt;/i&gt;&lt;/code&gt;设置为由键名标识的JOSE标头参数。  名称匹配从JSON树的顶级开始。  对于数组，变量保留由逗号分隔的数组元素列表。 &lt;/p&gt;&lt;blockquote class=&quot;note&quot;&gt;  在1.13.7版之前，只能指定一个键名，并且数组的结果未定义。 &lt;/blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;a name=&quot;auth_jwt_key_file&quot;&gt;&lt;/a&gt;&lt;div class=&quot;directive&quot;&gt;&lt;table cellspacing=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Syntax:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
&lt;code class=&quot;notranslate&quot;&gt;&lt;strong&gt;auth_jwt_key_file&lt;/strong&gt; &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;file&lt;/i&gt;&lt;/code&gt; ;&lt;/code&gt; &lt;br&gt;
    &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Default:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;

—

    &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Context:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
&lt;code class=&quot;notranslate&quot;&gt;http&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;server&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;location&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;limit_except&lt;/code&gt; &lt;br&gt;
    &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p&gt;  指定&lt;a hhref=&quot;https://tools.ietf.org/html/rfc7517#section-5&quot;&gt;JSON Web Key Set&lt;/a&gt;格式的&lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;file&lt;/i&gt;&lt;/code&gt; ，用于验证JWT签名。  参数值可以包含变量。 &lt;/p&gt;&lt;a name=&quot;auth_jwt_key_request&quot;&gt;&lt;/a&gt;&lt;div class=&quot;directive&quot;&gt;&lt;table cellspacing=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Syntax:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
&lt;code class=&quot;notranslate&quot;&gt;&lt;strong&gt;auth_jwt_key_request&lt;/strong&gt; &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;uri&lt;/i&gt;&lt;/code&gt; ;&lt;/code&gt; &lt;br&gt;
    &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Default:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;

—

    &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Context:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
&lt;code class=&quot;notranslate&quot;&gt;http&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;server&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;location&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;limit_except&lt;/code&gt; &lt;br&gt;
    &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;  该指令出现在1.15.6版中。 &lt;/p&gt;&lt;/div&gt;&lt;p&gt;  允许从子请求中检索&lt;a hhref=&quot;https://tools.ietf.org/html/rfc7517#section-5&quot;&gt;JSON Web Key Set&lt;/a&gt;文件以验证JWT签名，并设置子请求将发送到的URI。  为避免验证开销，建议缓存密钥文件： &lt;/p&gt;&lt;blockquote class=&quot;example&quot;&gt;&lt;pre class=&quot;notranslate&quot;&gt;proxy_cache_path /data/nginx/cache levels=1 keys_zone=foo:10m;
</code></pre><p>server {<br>    …</p>
<pre><code>location / {
    auth_jwt             &quot;closed site&quot;;
    auth_jwt_key_request /jwks_uri;
}

location = /jwks_uri {
    internal;
    proxy_cache foo;
    proxy_pass  http://idp.example.com/keys;
}
</code></pre><p>}<br></p><p></p><a name="auth_jwt_leeway"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>auth_jwt_leeway</strong> <code class="notranslate"><i>time</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">auth_jwt_leeway 0s;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> <br><br>                </td></tr></tbody></table><p>  该指令出现在1.13.10版本中。 </p></div><p>  设置最大允许余地，以在验证<a hhref="https://tools.ietf.org/html/rfc7519#section-4.1.4">exp</a>和<a hhref="https://tools.ietf.org/html/rfc7519#section-4.1.5">nbf</a> JWT声明时补偿时钟偏差。 </p><a name="variables"></a><center><h4>  嵌入式变量 </h4></center><p>   <code class="notranslate">ngx_http_auth_jwt_module</code>模块支持嵌入变量： </p><p></p><dl class="compact"><dt id="var_jwt_header_">   <code class="notranslate">$jwt<em>header</em></code> <code class="notranslate"><i>name</i></code> </dt><dd>  返回指定<a hhref="https://tools.ietf.org/html/rfc7515#section-4">JOSE标头</a>的值 </dd><dt id="var_jwt_claim_">   <code class="notranslate">$jwt<em>claim</em></code> <code class="notranslate"><i>name</i></code> </dt><dd>  返回指定<a hhref="https://tools.ietf.org/html/rfc7519#section-4">JWT声明</a>的值 </dd></dl><p></p><br><span></span><div style="display: none;"></div><p></p>
</td></tr></tbody></table></div></td></tr></tbody></table></div>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nginx.im/ngx/http/ngx_http_auth_basic_module.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="IM.NGINX">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="IM.NGINX">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/ngx/http/ngx_http_auth_basic_module.html" itemprop="url">未命名</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-21T16:09:50+08:00">
                2018年12月21日
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p></p><h2 class="notranslate">Module ngx_http_auth_basic_module</h2><table width="100%"><tbody><tr><td align="left" class="notranslate"> <a hhref="#example">Example Configuration</a> <br> <a hhref="#directives">Directives</a> <br>     <a hhref="#auth_basic">auth_basic</a> <br>     <a hhref="#auth_basic_user_file">auth_basic_user_file</a> <br></td></tr></tbody></table><a name="summary"></a><p>   <code class="notranslate">ngx_http_auth_basic_module</code>模块允许通过使用“HTTP基本身份验证”协议验证用户名和密码来限制对资源的访问。 </p><p>  访问也可以通过<a hhref="ngx_http_access_module.html">地址</a> ， <a hhref="ngx_http_auth_request_module.html">子请求</a>的<a hhref="ngx_http_auth_request_module.html">结果</a>或<a hhref="ngx_http_auth_jwt_module.html">JWT来限制</a> 。  通过地址和密码同时限制访问由<a hhref="ngx_http_core_module.html#satisfy">satisf</a>指令控制。 </p><a name="example"></a><center><h4>  示例配置 </h4></center><p></p><blockquote class="example"><pre class="notranslate">location / {<br>    auth_basic           “closed site”;<br>    auth_basic_user_file conf/htpasswd;<br>}<br></pre></blockquote><p></p><a name="directives"></a><center><h4>  指令 </h4></center><a name="auth_basic"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>auth_basic</strong> <code class="notranslate"><i>string</i></code> | <code class="notranslate">off</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><br>            <pre class="notranslate">auth_basic off;</pre><br>                </td></tr><tr><th class="notranslate"><br>            Context:<br>                </th><td class="notranslate"><br>            <code class="notranslate">http</code> , <code class="notranslate">server</code> , <code class="notranslate">location</code> , <code class="notranslate">limit_except</code> <br><br>                </td></tr></tbody></table></div><p>  使用“HTTP基本身份验证”协议启用用户名和密码验证。  指定的参数用作域。  参数值可以包含变量（1.3.10,1.2.7）。  特殊值<code class="notranslate">off</code>允许取消从先前配置级别继承的<code class="notranslate">auth_basic</code>伪指令的效果。 </p><a name="auth_basic_user_file"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>auth_basic_user_file</strong> <code class="notranslate"><i>file</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><p></p>
<pre><code>—

    &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Context:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
&lt;code class=&quot;notranslate&quot;&gt;http&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;server&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;location&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;limit_except&lt;/code&gt; &lt;br&gt;
    &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p&gt;  指定保存用户名和密码的文件，格式如下： &lt;/p&gt;&lt;blockquote class=&quot;example&quot;&gt;&lt;pre class=&quot;notranslate&quot;&gt;# comment
</code></pre><p>name1:password1<br>name2:password2:comment<br>name3:password3<br></p><p>   <code class="notranslate"><i>file</i></code>名可以包含变量。 </p><p>  支持以下密码类型： </p><ul class="compact"><li>  用<code class="notranslate">crypt()</code>函数加密;  可以使用Apache HTTP Server分发中的“ <code class="notranslate">htpasswd</code> ”实用程序或“ <code class="notranslate">openssl passwd</code> ”命令生成; </li><li>  使用基于MD5的密码算法（apr1）的Apache变体进行散列;  可以使用相同的工具生成; </li><li>  由<a hhref="https://tools.ietf.org/html/rfc2307#section-5.3">RFC 2307中</a>描述的“ <code class="notranslate">{</code> <code class="notranslate"><i>scheme</i></code> <code class="notranslate">}</code> <code class="notranslate"><i>data</i></code> ”语法（1.0.3+）指定;  目前实现的方案包括<code class="notranslate">PLAIN</code> （不应使用示例一）， <code class="notranslate">SHA</code> （1.3.13）（不应使用普通SHA-1哈希）和<code class="notranslate">SSHA</code> （盐渍SHA-1哈希，一些软件包使用，特别是OpenLDAP和Dovecot）。 <blockquote class="note">  仅添加了对<code class="notranslate">SHA</code>方案的支持，以帮助从其他Web服务器迁移。  它不应该用于新密码，因为它使用的无盐SHA-1散列很容易受到<a hhref="http://en.wikipedia.org/wiki/Rainbow_attack">彩虹表</a>攻击。 </blockquote></li></ul><p></p><br><span></span><div style="display: none;"></div><p></p>
</td></tr></tbody></table></div>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nginx.im/ngx/http/ngx_http_api_module.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="IM.NGINX">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="IM.NGINX">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/ngx/http/ngx_http_api_module.html" itemprop="url">未命名</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-21T16:09:50+08:00">
                2018年12月21日
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p></p><h2 class="notranslate">Module ngx_http_api_module</h2><table width="100%"><tbody><tr><td align="left" class="notranslate"> <a hhref="#example">Example Configuration</a> <br> <a hhref="#directives">Directives</a> <br>     <a hhref="#api">api</a> <br>     <a hhref="#status_zone">status<em>zone</em></a> <br> <a hhref="#compatibility">Compatibility</a> <br> <a hhref="#endpoints">Endpoints</a> <br>     <a hhref="#root">/</a> <br>     <a hhref="#nginx">/nginx</a> <br>     <a hhref="#processes">/processes</a> <br>     <a hhref="#connections">/connections</a> <br>     <a hhref="#ssl">/ssl</a> <br>     &lt;a hhref=”#slabs“&gt;/slabs/ <br>     <a hhref="#slabs_slab_zone_name">/slabs/{slabZoneName}</a> <br>     <a hhref="#http_">/http/</a> <br>     <a hhref="#http_requests">/http/requests</a> <br>     <a hhref="#http_server_zones_">/http/server_zones/</a> <br>     <a hhref="#http_server_zones_http_server_zone_name">/http/server_zones/{httpServerZoneName}</a> <br>     <a hhref="#http_caches_">/http/caches/</a> <br>     <a hhref="#http_caches_http_cache_zone_name">/http/caches/{httpCacheZoneName}</a> <br>     <a hhref="#http_upstreams_">/http/upstreams/</a> <br>     <a hhref="#http_upstreams_http_upstream_name_">/http/upstreams/{httpUpstreamName}/</a> <br>     <a hhref="#http_upstreams_http_upstream_name_servers_">/http/upstreams/{httpUpstreamName}/servers/</a> <br>     <a hhref="#http_upstreams_http_upstream_name_servers_http_upstream_server_id">/http/upstreams/{httpUpstreamName}/servers/{httpUpstreamServerId}</a> <br>     <a hhref="#http_keyvals_">/http/keyvals/</a> <br>     <a hhref="#http_keyvals_http_keyval_zone_name">/http/keyvals/{httpKeyvalZoneName}</a> <br>     <a hhref="#stream_">/stream/</a> <br>     <a hhref="#stream_server_zones_">/stream/server_zones/</a> <br>     <a hhref="#stream_server_zones_stream_server_zone_name">/stream/server_zones/{streamServerZoneName}</a> <br>     <a hhref="#stream_upstreams_">/stream/upstreams/</a> <br>     <a hhref="#stream_upstreams_stream_upstream_name_">/stream/upstreams/{streamUpstreamName}/</a> <br>     <a hhref="#stream_upstreams_stream_upstream_name_servers_">/stream/upstreams/{streamUpstreamName}/servers/</a> <br>     <a hhref="#stream_upstreams_stream_upstream_name_servers_stream_upstream_server_id">/stream/upstreams/{streamUpstreamName}/servers/{streamUpstreamServerId}</a> <br>     <a hhref="#stream_keyvals_">/stream/keyvals/</a> <br>     <a hhref="#stream_keyvals_stream_keyval_zone_name">/stream/keyvals/{streamKeyvalZoneName}</a> <br>     <a hhref="#stream_zone_sync_">/stream/zone_sync/</a> <br> <a hhref="#definitions">Response Objects</a> <br></td></tr></tbody></table><a name="summary"></a><p>   <code class="notranslate">ngx_http_api_module</code>模块（1.13.3）提供REST API，用于访问各种状态信息，即时配置上游服务器组以及管理<a hhref="ngx_http_keyval_module.html">键值对，</a>而无需重新配置nginx。 </p><p></p><blockquote class="note">  该模块取代了<a hhref="ngx_http_status_module.html">ngx_http_status_module</a>和<a hhref="ngx_http_upstream_conf_module.html">ngx_http_upstream_conf_module</a>模块。 </blockquote><p></p><p></p><blockquote class="note">  该模块作为我们<a hhref="http://nginx.com/products/">商业订阅的</a>一部分提供。 </blockquote><p></p><a name="example"></a><center><h4>  示例配置 </h4></center><p></p><blockquote class="example"><pre class="notranslate">http {<br>    upstream backend {<br>        zone http_backend 64k;<p></p>
<pre><code>    server backend1.example.com weight=5;
    server backend2.example.com;
}

proxy_cache_path /data/nginx/cache_backend keys_zone=cache_backend:10m;

server {
    server_name backend.example.com;

    location / {
        proxy_pass  http://backend;
        proxy_cache cache_backend;

        health_check;
    }

    status_zone server_backend;
}

keyval_zone zone=one:32k state=one.keyval;
keyval $arg_text $text zone=one;

server {
    listen 127.0.0.1;

    location /api {
        &lt;strong&gt;api&lt;/strong&gt; write=on;
        allow 127.0.0.1;
        deny all;
    }
}
</code></pre><p>}</p>
<p>stream {<br>    upstream backend {<br>        zone stream_backend 64k;</p>
<pre><code>    server backend1.example.com:12345 weight=5;
    server backend2.example.com:12345;
}

server {
    listen      127.0.0.1:12345;
    proxy_pass  backend;
    status_zone server_backend;
    health_check;
}
</code></pre><p>}<br></p></pre></blockquote><p>  所有API请求都包含URI中支持的API <a hhref="#api_version">版本</a> 。  使用此配置的API请求示例： </p><blockquote class="example"><pre class="notranslate"><a href="http://127.0.0.1/api/3/" target="_blank" rel="noopener">http://127.0.0.1/api/3/</a><br><a href="http://127.0.0.1/api/3/nginx" target="_blank" rel="noopener">http://127.0.0.1/api/3/nginx</a><br><a href="http://127.0.0.1/api/3/connections" target="_blank" rel="noopener">http://127.0.0.1/api/3/connections</a><br><a href="http://127.0.0.1/api/3/http/requests" target="_blank" rel="noopener">http://127.0.0.1/api/3/http/requests</a><br><a href="http://127.0.0.1/api/3/http/server_zones/server_backend" target="_blank" rel="noopener">http://127.0.0.1/api/3/http/server_zones/server_backend</a><br><a href="http://127.0.0.1/api/3/http/caches/cache_backend" target="_blank" rel="noopener">http://127.0.0.1/api/3/http/caches/cache_backend</a><br><a href="http://127.0.0.1/api/3/http/upstreams/backend" target="_blank" rel="noopener">http://127.0.0.1/api/3/http/upstreams/backend</a><br><a href="http://127.0.0.1/api/3/http/upstreams/backend/servers/" target="_blank" rel="noopener">http://127.0.0.1/api/3/http/upstreams/backend/servers/</a><br><a href="http://127.0.0.1/api/3/http/upstreams/backend/servers/1" target="_blank" rel="noopener">http://127.0.0.1/api/3/http/upstreams/backend/servers/1</a><br><a href="http://127.0.0.1/api/3/http/keyvals/one?key=arg1" target="_blank" rel="noopener">http://127.0.0.1/api/3/http/keyvals/one?key=arg1</a><br><a href="http://127.0.0.1/api/3/stream/" target="_blank" rel="noopener">http://127.0.0.1/api/3/stream/</a><br><a href="http://127.0.0.1/api/3/stream/server_zones/server_backend" target="_blank" rel="noopener">http://127.0.0.1/api/3/stream/server_zones/server_backend</a><br><a href="http://127.0.0.1/api/3/stream/upstreams/" target="_blank" rel="noopener">http://127.0.0.1/api/3/stream/upstreams/</a><br><a href="http://127.0.0.1/api/3/stream/upstreams/backend" target="_blank" rel="noopener">http://127.0.0.1/api/3/stream/upstreams/backend</a><br><a href="http://127.0.0.1/api/3/stream/upstreams/backend/servers/1" target="_blank" rel="noopener">http://127.0.0.1/api/3/stream/upstreams/backend/servers/1</a><br></pre></blockquote><p></p><a name="directives"></a><center><h4>  指令 </h4></center><a name="api"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>api</strong><br>[ <code class="notranslate">write</code> = <code class="notranslate">on</code> | <code class="notranslate">off</code> ];</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><p></p>
<pre><code>—

    &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Context:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
&lt;code class=&quot;notranslate&quot;&gt;location&lt;/code&gt; &lt;br&gt;
    &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p&gt;  打开周围位置的REST API接口。  应&lt;a hhref=&quot;ngx_http_core_module.html#satisfy&quot;&gt;限制&lt;/a&gt;访问此位置。 &lt;/p&gt;&lt;p&gt;   &lt;code class=&quot;notranslate&quot;&gt;write&lt;/code&gt;参数确定API是只读还是读写。  默认情况下，API是只读的。 &lt;/p&gt;&lt;a name=&quot;api_version&quot;&gt;&lt;/a&gt;&lt;p&gt;  所有API请求都应在URI中包含受支持的API版本。  如果请求URI等于位置前缀，则返回支持的API版本列表。  当前的API版本为“ &lt;code class=&quot;notranslate&quot;&gt;3&lt;/code&gt; ”。 &lt;/p&gt;&lt;p&gt;  请求行中的可选“ &lt;code class=&quot;notranslate&quot;&gt;fields&lt;/code&gt; ”参数指定将输出所请求对象的哪些字段： &lt;/p&gt;&lt;blockquote class=&quot;example&quot;&gt;&lt;pre class=&quot;notranslate&quot;&gt;http://127.0.0.1/api/3/nginx?fields=version,build
</code></pre><p></p><p></p><a name="status_zone"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>status_zone</strong> <code class="notranslate"><i>zone</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><p></p>
<pre><code>—

    &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Context:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
&lt;code class=&quot;notranslate&quot;&gt;server&lt;/code&gt; &lt;br&gt;
    &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;  该指令出现在1.13.12版中。 &lt;/p&gt;&lt;/div&gt;&lt;p&gt;  允许在指定&lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;zone&lt;/i&gt;&lt;/code&gt;收集虚拟&lt;a hhref=&quot;ngx_http_core_module.html#server&quot;&gt;http&lt;/a&gt;或&lt;a hhref=&quot;stream/ngx_stream_core_module.html#server&quot;&gt;流&lt;/a&gt;服务器状态信息。  多个服务器可能共享同一个区域。 &lt;/p&gt;&lt;a name=&quot;compatibility&quot;&gt;&lt;/a&gt;&lt;center&gt;&lt;h4&gt;  兼容性 &lt;/h4&gt;&lt;/center&gt;&lt;p&gt;&lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   &lt;a hhref=&quot;#stream_zone_sync_&quot;&gt;/ stream / zone_sync /&lt;/a&gt; data在&lt;a hhref=&quot;#api_version&quot;&gt;版本&lt;/a&gt; 3中添加。 &lt;/li&gt;&lt;li&gt;   &lt;a hhref=&quot;#api_version&quot;&gt;版本&lt;/a&gt; 2中添加了&lt;a hhref=&quot;#def_nginx_http_upstream_conf_server&quot;&gt;drain&lt;/a&gt;参数。 &lt;/li&gt;&lt;li&gt;   &lt;a hhref=&quot;#stream_keyvals_&quot;&gt;/ stream / keyvals /&lt;/a&gt; data在&lt;a hhref=&quot;#api_version&quot;&gt;版本&lt;/a&gt; 2中添加。 &lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;&lt;a name=&quot;endpoints&quot;&gt;&lt;/a&gt;&lt;center&gt;&lt;h4&gt;  端点 &lt;/h4&gt;&lt;/center&gt;&lt;p&gt;&lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt id=&quot;root&quot;&gt; &lt;code class=&quot;notranslate&quot;&gt;/&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;&lt;p&gt;  支持的方法： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;getAPIEndpoints&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; - 返回根端点列表 &lt;p&gt;  返回根端点列表。 &lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回一个字符串数组 &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/dd&gt;&lt;dt id=&quot;nginx&quot;&gt; &lt;code class=&quot;notranslate&quot;&gt;/nginx&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;&lt;p&gt;  支持的方法： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;getNginx&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; - 返回nginx运行实例的状态 &lt;p&gt;  返回nginx版本，构建名称，地址，配置重新加载次数，主进程和工作进程的ID。 &lt;/p&gt;&lt;p&gt;  请求参数： &lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;fields&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，可选） &lt;/dt&gt;&lt;dd&gt;  限制将输出运行实例的nginx字段。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回&lt;a hhref=&quot;#def_nginx_object&quot;&gt;nginx&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/dd&gt;&lt;dt id=&quot;processes&quot;&gt; &lt;code class=&quot;notranslate&quot;&gt;/processes&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;&lt;p&gt;  支持的方法： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;getProcesses&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; - 返回nginx进程状态 &lt;p&gt;  返回异常终止和重生的子进程的数量。 &lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，退货&lt;a hhref=&quot;#def_nginx_processes&quot;&gt;流程&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li id=&quot;deleteProcesses&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;DELETE&lt;/code&gt; - 重置nginx处理统计信息 &lt;p&gt;  重置异常终止和重生的子进程的计数器。 &lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   204  - 成功 &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/dd&gt;&lt;dt id=&quot;connections&quot;&gt; &lt;code class=&quot;notranslate&quot;&gt;/connections&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;&lt;p&gt;  支持的方法： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;getConnections&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; - 返回客户端连接统计信息 &lt;p&gt;  返回客户端连接的统计信息 &lt;/p&gt;&lt;p&gt;  请求参数： &lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;fields&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，可选） &lt;/dt&gt;&lt;dd&gt;  限制将输出连接统计信息的哪些字段。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回&lt;a hhref=&quot;#def_nginx_connections&quot;&gt;连接&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li id=&quot;deleteConnections&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;DELETE&lt;/code&gt; - 重置客户端连接统计信息 &lt;p&gt;  重置已接受和已删除客户端连接的统计信息。 &lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   204  - 成功 &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/dd&gt;&lt;dt id=&quot;ssl&quot;&gt; &lt;code class=&quot;notranslate&quot;&gt;/ssl&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;&lt;p&gt;  支持的方法： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;getSsl&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; - 返回SSL统计信息 &lt;p&gt;  返回SSL统计信息。 &lt;/p&gt;&lt;p&gt;  请求参数： &lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;fields&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，可选） &lt;/dt&gt;&lt;dd&gt;  限制将输出SSL统计信息的哪些字段。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回&lt;a hhref=&quot;#def_nginx_ssl_object&quot;&gt;SSL&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li id=&quot;deleteSslStat&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;DELETE&lt;/code&gt; - 重置SSL统计信息 &lt;p&gt;  重置SSL握手和会话重用的计数器。 &lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   204  - 成功 &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/dd&gt;&lt;dt id=&quot;slabs_&quot;&gt; &lt;code class=&quot;notranslate&quot;&gt;/slabs/&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;&lt;p&gt;  支持的方法： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;getSlabs&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; - 所有楼板的返回状态 &lt;p&gt;  使用slab分配器返回每个共享内存区域的slab状态。 &lt;/p&gt;&lt;p&gt;  请求参数： &lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;fields&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，可选） &lt;/dt&gt;&lt;dd&gt;  限制将输出板区域的哪些区域。  如果“ &lt;code class=&quot;notranslate&quot;&gt;fields&lt;/code&gt; ”值为空，则仅输出区域名称。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回所有楼板的“ &lt;a hhref=&quot;#def_nginx_slab_zone&quot;&gt;带有slab分配器的共享内存区域&lt;/a&gt; ”对象的集合 &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/dd&gt;&lt;dt id=&quot;slabs_slab_zone_name&quot;&gt; &lt;code class=&quot;notranslate&quot;&gt;/slabs/{slabZoneName}&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;  所有方法通用的参数： &lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;slabZoneName&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，必填） &lt;/dt&gt;&lt;dd&gt;  带有slab分配器的共享内存区域的名称。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;  支持的方法： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;getSlabZone&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; - 返回板的状态 &lt;p&gt;  使用slab分配器返回特定共享内存区域的slab状态。 &lt;/p&gt;&lt;p&gt;  请求参数： &lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;fields&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，可选） &lt;/dt&gt;&lt;dd&gt;  限制将输出板区域的哪些字段。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回&lt;a hhref=&quot;#def_nginx_slab_zone&quot;&gt;带有slab分配器的共享内存区域&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   404  - 未找到平板（ &lt;code class=&quot;notranslate&quot;&gt;SlabNotFound&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;错误&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li id=&quot;deleteSlabZoneStats&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;DELETE&lt;/code&gt; - 重置slab统计信息 &lt;p&gt;  重置每个内存插槽的“ &lt;code class=&quot;notranslate&quot;&gt;reqs&lt;/code&gt; ”和“ &lt;code class=&quot;notranslate&quot;&gt;reqs&lt;/code&gt; ”指标。 &lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   204  - 成功 &lt;/li&gt;&lt;li&gt;   404  - 未找到平板（ &lt;code class=&quot;notranslate&quot;&gt;SlabNotFound&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;错误&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   405  - 禁用方法（ &lt;code class=&quot;notranslate&quot;&gt;MethodDisabled&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/dd&gt;&lt;dt id=&quot;http_&quot;&gt; &lt;code class=&quot;notranslate&quot;&gt;/http/&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;&lt;p&gt;  支持的方法： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;getHttp&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; - 返回与HTTP相关的端点列表 &lt;p&gt;  返回第一级HTTP端点的列表。 &lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回一个字符串数组 &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/dd&gt;&lt;dt id=&quot;http_requests&quot;&gt; &lt;code class=&quot;notranslate&quot;&gt;/http/requests&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;&lt;p&gt;  支持的方法： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;getHttpRequests&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; - 返回HTTP请求统计信息 &lt;p&gt;  返回客户端HTTP请求的状态。 &lt;/p&gt;&lt;p&gt;  请求参数： &lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;fields&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，可选） &lt;/dt&gt;&lt;dd&gt;  限制将输出客户端HTTP请求统计信息的哪些字段。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回&lt;a hhref=&quot;#def_nginx_http_requests&quot;&gt;HTTP请求&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li id=&quot;deleteHttpRequests&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;DELETE&lt;/code&gt; - 重置HTTP请求统计信息 &lt;p&gt;  重置客户端HTTP请求总数。 &lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   204  - 成功 &lt;/li&gt;&lt;li&gt;   405  - 禁用方法（ &lt;code class=&quot;notranslate&quot;&gt;MethodDisabled&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/dd&gt;&lt;dt id=&quot;http_server_zones_&quot;&gt; &lt;code class=&quot;notranslate&quot;&gt;/http/server_zones/&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;&lt;p&gt;  支持的方法： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;getHttpServerZones&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; - 返回所有HTTP服务器区域的状态 &lt;p&gt;  返回每个HTTP &lt;a hhref=&quot;https://nginx.org/en/http/ngx_http_api_module.html#status_zone&quot;&gt;服务器区域的&lt;/a&gt;状态信息。 &lt;/p&gt;&lt;p&gt;  请求参数： &lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;fields&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，可选） &lt;/dt&gt;&lt;dd&gt;  限制将输出服务器区域的哪些字段。  如果“ &lt;code class=&quot;notranslate&quot;&gt;fields&lt;/code&gt; ”值为空，则仅输出服务器区域名称。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回所有http服务器区域的“ &lt;a hhref=&quot;#def_nginx_http_server_zone&quot;&gt;HTTP服务器区域&lt;/a&gt; ”对象的集合 &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/dd&gt;&lt;dt id=&quot;http_server_zones_http_server_zone_name&quot;&gt; &lt;code class=&quot;notranslate&quot;&gt;/http/server_zones/{httpServerZoneName}&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;  所有方法通用的参数： &lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;httpServerZoneName&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，必填） &lt;/dt&gt;&lt;dd&gt;   HTTP服务器区域的名称。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;  支持的方法： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;getHttpServerZone&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; - 返回HTTP服务器区域的状态 &lt;p&gt;  返回特定HTTP服务器区域的状态。 &lt;/p&gt;&lt;p&gt;  请求参数： &lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;fields&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，可选） &lt;/dt&gt;&lt;dd&gt;  限制将输出服务器区域的哪些字段。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回&lt;a hhref=&quot;#def_nginx_http_server_zone&quot;&gt;HTTP服务器区域&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   404  - 找不到服务器区域（ &lt;code class=&quot;notranslate&quot;&gt;ServerZoneNotFound&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;错误&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li id=&quot;deleteHttpServerZoneStat&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;DELETE&lt;/code&gt; - 重置HTTP服务器区域的统计信息 &lt;p&gt;  重置特定HTTP服务器区域中接受和丢弃的请求，响应，接收和发送字节的统计信息。 &lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   204  - 成功 &lt;/li&gt;&lt;li&gt;   404  - 找不到服务器区域（ &lt;code class=&quot;notranslate&quot;&gt;ServerZoneNotFound&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;错误&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   405  - 禁用方法（ &lt;code class=&quot;notranslate&quot;&gt;MethodDisabled&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/dd&gt;&lt;dt id=&quot;http_caches_&quot;&gt; &lt;code class=&quot;notranslate&quot;&gt;/http/caches/&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;&lt;p&gt;  支持的方法： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;getHttpCaches&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; - 返回所有缓存的状态 &lt;p&gt;  返回由&lt;a hhref=&quot;https://nginx.org/en/http/ngx_http_proxy_module.html#proxy_cache_path&quot;&gt;proxy_cache_path&lt;/a&gt;和其他“ &lt;code class=&quot;notranslate&quot;&gt;*_cache_path&lt;/code&gt; ”指令配置的每个缓存的状态。 &lt;/p&gt;&lt;p&gt;  请求参数： &lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;fields&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，可选） &lt;/dt&gt;&lt;dd&gt;  限制将输出缓存区域的哪些字段。  如果“ &lt;code class=&quot;notranslate&quot;&gt;fields&lt;/code&gt; ”值为空，则仅输出缓存区的名称。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回所有http缓存的“ &lt;a hhref=&quot;#def_nginx_http_cache&quot;&gt;HTTP缓存&lt;/a&gt; ”对象集合 &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/dd&gt;&lt;dt id=&quot;http_caches_http_cache_zone_name&quot;&gt; &lt;code class=&quot;notranslate&quot;&gt;/http/caches/{httpCacheZoneName}&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;  所有方法通用的参数： &lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;httpCacheZoneName&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，必填） &lt;/dt&gt;&lt;dd&gt;  缓存区的名称。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;  支持的方法： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;getHttpCacheZone&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; - 返回缓存的状态 &lt;p&gt;  返回特定缓存的状态。 &lt;/p&gt;&lt;p&gt;  请求参数： &lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;fields&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，可选） &lt;/dt&gt;&lt;dd&gt;  限制将输出缓存区的哪些字段。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回&lt;a hhref=&quot;#def_nginx_http_cache&quot;&gt;HTTP缓存&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   404  - 未找到缓存（ &lt;code class=&quot;notranslate&quot;&gt;CacheNotFound&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li id=&quot;deleteHttpCacheZoneStat&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;DELETE&lt;/code&gt; - 重置缓存统计信息 &lt;p&gt;  重置特定缓存区域中缓存命中/未命中的统计信息。 &lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   204  - 成功 &lt;/li&gt;&lt;li&gt;   404  - 未找到缓存（ &lt;code class=&quot;notranslate&quot;&gt;CacheNotFound&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   405  - 禁用方法（ &lt;code class=&quot;notranslate&quot;&gt;MethodDisabled&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/dd&gt;&lt;dt id=&quot;http_upstreams_&quot;&gt; &lt;code class=&quot;notranslate&quot;&gt;/http/upstreams/&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;&lt;p&gt;  支持的方法： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;getHttpUpstreams&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; - 返回所有HTTP上游服务器组的状态 &lt;p&gt;  返回每个HTTP上游服务器组及其服务器的状态。 &lt;/p&gt;&lt;p&gt;  请求参数： &lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;fields&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，可选） &lt;/dt&gt;&lt;dd&gt;  限制将输出上游服务器组的哪些字段。  如果“ &lt;code class=&quot;notranslate&quot;&gt;fields&lt;/code&gt; ”值为空，则仅输出上游的名称。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  -  Success，返回所有http上游的“ &lt;a hhref=&quot;#def_nginx_http_upstream&quot;&gt;HTTP Upstream&lt;/a&gt; ”对象集合 &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/dd&gt;&lt;dt id=&quot;http_upstreams_http_upstream_name_&quot;&gt; &lt;code class=&quot;notranslate&quot;&gt;/http/upstreams/{httpUpstreamName}/&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;  所有方法通用的参数： &lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;httpUpstreamName&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，必填） &lt;/dt&gt;&lt;dd&gt;   HTTP上游服务器组的名称。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;  支持的方法： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;getHttpUpstreamName&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; -  HTTP上游服务器组的返回状态 &lt;p&gt;  返回特定HTTP上游服务器组及其服务器的状态。 &lt;/p&gt;&lt;p&gt;  请求参数： &lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;fields&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，可选） &lt;/dt&gt;&lt;dd&gt;  限制将输出上游服务器组的哪些字段。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回&lt;a hhref=&quot;#def_nginx_http_upstream&quot;&gt;HTTP上游&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   400  -  Upstream是静态的（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamStatic&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   404  - 找不到&lt;code class=&quot;notranslate&quot;&gt;UpstreamNotFound&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;UpstreamNotFound&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li id=&quot;deleteHttpUpstreamStat&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;DELETE&lt;/code&gt; - 重置HTTP上游服务器组的统计信息 &lt;p&gt;  重置上游服务器组中每个上游服务器的统计信息和队列统计信息。 &lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   204  - 成功 &lt;/li&gt;&lt;li&gt;   400  -  Upstream是静态的（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamStatic&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   404  - 找不到&lt;code class=&quot;notranslate&quot;&gt;UpstreamNotFound&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;UpstreamNotFound&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   405  - 禁用方法（ &lt;code class=&quot;notranslate&quot;&gt;MethodDisabled&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/dd&gt;&lt;dt id=&quot;http_upstreams_http_upstream_name_servers_&quot;&gt; &lt;code class=&quot;notranslate&quot;&gt;/http/upstreams/{httpUpstreamName}/servers/&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;  所有方法通用的参数： &lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;httpUpstreamName&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，必填） &lt;/dt&gt;&lt;dd&gt;  上游服务器组的名称。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;  支持的方法： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;getHttpUpstreamServers&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; - 返回HTTP上游服务器组中所有服务器的配置 &lt;p&gt;  返回特定HTTP上游服务器组中每个服务器的配置。 &lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回&lt;a hhref=&quot;#def_nginx_http_upstream_conf_server&quot;&gt;HTTP上游服务器&lt;/a&gt;阵列 &lt;/li&gt;&lt;li&gt;   400  -  Upstream是静态的（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamStatic&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   404  - 找不到&lt;code class=&quot;notranslate&quot;&gt;UpstreamNotFound&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;UpstreamNotFound&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li id=&quot;postHttpUpstreamServer&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;POST&lt;/code&gt; - 将服务器添加到HTTP上游服务器组 &lt;p&gt;  将新服务器添加到HTTP上游服务器组。  服务器参数以JSON格式指定。 &lt;/p&gt;&lt;p&gt;  请求参数： &lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;postHttpUpstreamServer&lt;/code&gt; （ &lt;a hhref=&quot;#def_nginx_http_upstream_conf_server&quot;&gt;HTTP上游服务器&lt;/a&gt; ，必需） &lt;/dt&gt;&lt;dd&gt;   JSON格式的新服务器和其他可选参数的地址。  无法更改“ &lt;code class=&quot;notranslate&quot;&gt;ID&lt;/code&gt; ”，“ &lt;code class=&quot;notranslate&quot;&gt;backup&lt;/code&gt; ”和“ &lt;code class=&quot;notranslate&quot;&gt;service&lt;/code&gt; ”参数。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   201  - 创建，返回&lt;a hhref=&quot;#def_nginx_http_upstream_conf_server&quot;&gt;HTTP上游服务器&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   400  - 上游是静态的（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamStatic&lt;/code&gt; ），无效的“ &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;parameter&lt;/i&gt;&lt;/code&gt; ”值（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamConfFormatError&lt;/code&gt; ），缺少“ &lt;code class=&quot;notranslate&quot;&gt;server&lt;/code&gt; ”参数（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamConfFormatError&lt;/code&gt; ），未知参数“ &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;name&lt;/i&gt;&lt;/code&gt; ”（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamConfFormatError&lt;/code&gt; ），嵌套对象或列表（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamConfFormatError&lt;/code&gt; ），解析时&lt;code class=&quot;notranslate&quot;&gt;error&lt;/code&gt; “ &lt;code class=&quot;notranslate&quot;&gt;error&lt;/code&gt; ”（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadAddress&lt;/code&gt; ），服务上游“ &lt;code class=&quot;notranslate&quot;&gt;host&lt;/code&gt; ”可能没有端口（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadAddress&lt;/code&gt; ），服务上游“ &lt;code class=&quot;notranslate&quot;&gt;host&lt;/code&gt; ”需要域名（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadAddress&lt;/code&gt; ），无效“ &lt;code class=&quot;notranslate&quot;&gt;weight&lt;/code&gt; ”（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadWeight&lt;/code&gt; ），无效“ &lt;code class=&quot;notranslate&quot;&gt;max_conns&lt;/code&gt; ”（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadMaxConns&lt;/code&gt; ），无效“ &lt;code class=&quot;notranslate&quot;&gt;max_fails&lt;/code&gt; ”（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadMaxFails&lt;/code&gt; ），无效“ &lt;code class=&quot;notranslate&quot;&gt;fail_timeout&lt;/code&gt; ”（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadFailTimeout&lt;/code&gt; ），无效“ &lt;code class=&quot;notranslate&quot;&gt;slow_start&lt;/code&gt; ”（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadSlowStart&lt;/code&gt; ），路径太长（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadRoute&lt;/code&gt; ），“ &lt;code class=&quot;notranslate&quot;&gt;service&lt;/code&gt; ”为空（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadService&lt;/code&gt; ），没有解析定义解析（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamConfNoResolver&lt;/code&gt; ），上游“ &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;name&lt;/i&gt;&lt;/code&gt; ”没有备份（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamNoBackup&lt;/code&gt; ），上游“ &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;name&lt;/i&gt;&lt;/code&gt; ”内存耗尽（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamOutOfMemory&lt;/code&gt;   &lt;code class=&quot;notranslate&quot;&gt;UpstreamOutOfMemory&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;错误&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   404  - 找不到&lt;code class=&quot;notranslate&quot;&gt;UpstreamNotFound&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;UpstreamNotFound&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   405  - 禁用方法（ &lt;code class=&quot;notranslate&quot;&gt;MethodDisabled&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   415  -  JSON错误（ &lt;code class=&quot;notranslate&quot;&gt;JsonError&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/dd&gt;&lt;dt id=&quot;http_upstreams_http_upstream_name_servers_http_upstream_server_id&quot;&gt; &lt;code class=&quot;notranslate&quot;&gt;/http/upstreams/{httpUpstreamName}/servers/{httpUpstreamServerId}&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;  所有方法通用的参数： &lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;httpUpstreamName&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，必填） &lt;/dt&gt;&lt;dd&gt;  上游服务器组的名称。 &lt;/dd&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;httpUpstreamServerId&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，必填） &lt;/dt&gt;&lt;dd&gt;  服务器的ID。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;  支持的方法： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;getHttpUpstreamPeer&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; - 返回HTTP上游服务器组中服务器的配置 &lt;p&gt;  返回HTTP上游服务器组中特定服务器的配置。 &lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回&lt;a hhref=&quot;#def_nginx_http_upstream_conf_server&quot;&gt;HTTP上游服务器&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   400  -  Upstream是静态的（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamStatic&lt;/code&gt; ），无效的服务器ID（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadServerId&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   404  - 未找到&lt;code class=&quot;notranslate&quot;&gt;UpstreamNotFound&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;UpstreamNotFound&lt;/code&gt; ），ID为“ &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;id&lt;/i&gt;&lt;/code&gt; ”的服务器不存在（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamServerNotFound&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li id=&quot;patchHttpUpstreamPeer&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;PATCH&lt;/code&gt; - 修改HTTP上游服务器组中的服务器 &lt;p&gt;  修改HTTP上游服务器组中特定服务器的设置。  服务器参数以JSON格式指定。 &lt;/p&gt;&lt;p&gt;  请求参数： &lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;patchHttpUpstreamServer&lt;/code&gt; （ &lt;a hhref=&quot;#def_nginx_http_upstream_conf_server&quot;&gt;HTTP上游服务器&lt;/a&gt; ，必需） &lt;/dt&gt;&lt;dd&gt;  服务器参数，以JSON格式指定。  无法更改“ &lt;code class=&quot;notranslate&quot;&gt;ID&lt;/code&gt; ”，“ &lt;code class=&quot;notranslate&quot;&gt;backup&lt;/code&gt; ”和“ &lt;code class=&quot;notranslate&quot;&gt;service&lt;/code&gt; ”参数。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回&lt;a hhref=&quot;#def_nginx_http_upstream_conf_server&quot;&gt;HTTP上游服务器&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   400  - 上游是静态的（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamStatic&lt;/code&gt; ），无效的“ &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;parameter&lt;/i&gt;&lt;/code&gt; ”值（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamConfFormatError&lt;/code&gt; ），未知参数“ &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;name&lt;/i&gt;&lt;/code&gt; ”（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamConfFormatError&lt;/code&gt; ），嵌套对象或列表（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamConfFormatError&lt;/code&gt; ），解析时的“ &lt;code class=&quot;notranslate&quot;&gt;error&lt;/code&gt; ”（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadAddress&lt;/code&gt; ），无效的“ &lt;code class=&quot;notranslate&quot;&gt;server&lt;/code&gt; ”参数（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadAddress&lt;/code&gt; ），无效的服务器ID（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadServerId&lt;/code&gt; ），无效的“ &lt;code class=&quot;notranslate&quot;&gt;weight&lt;/code&gt; ”（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadWeight&lt;/code&gt; ），无效的“ &lt;code class=&quot;notranslate&quot;&gt;max_conns&lt;/code&gt; ”（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadMaxConns&lt;/code&gt; ），无效的“ &lt;code class=&quot;notranslate&quot;&gt;max_fails&lt;/code&gt; ”（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadMaxFails&lt;/code&gt; ），无效的“ &lt;code class=&quot;notranslate&quot;&gt;fail_timeout&lt;/code&gt; ”（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadFailTimeout&lt;/code&gt; ），无效的“ &lt;code class=&quot;notranslate&quot;&gt;slow_start&lt;/code&gt; ”（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadSlowStart&lt;/code&gt; ），路由太长（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadRoute&lt;/code&gt; ），“ &lt;code class=&quot;notranslate&quot;&gt;service&lt;/code&gt; ”为空（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadService&lt;/code&gt; ），服务器“ &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;ID&lt;/i&gt;&lt;/code&gt; ”地址是不可变的（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamServerImmutable&lt;/code&gt; ），服务器“ &lt;code class=&quot;notranslate&quot;&gt;ID&lt;/code&gt; ”权重是不可变的（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamServerWeightImmutable&lt;/code&gt; ），上游“ &lt;code class=&quot;notranslate&quot;&gt;name&lt;/code&gt; ”内存耗尽（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamOutOfMemory&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;错误&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   404  - 未找到&lt;code class=&quot;notranslate&quot;&gt;UpstreamNotFound&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;UpstreamNotFound&lt;/code&gt; ），ID为“ &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;id&lt;/i&gt;&lt;/code&gt; ”的服务器不存在（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamServerNotFound&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   405  - 禁用方法（ &lt;code class=&quot;notranslate&quot;&gt;MethodDisabled&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   415  -  JSON错误（ &lt;code class=&quot;notranslate&quot;&gt;JsonError&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li id=&quot;deleteHttpUpstreamServer&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;DELETE&lt;/code&gt; - 从HTTP上游服务器组中删除服务器 &lt;p&gt;  从HTTP上游服务器组中删除服务器。 &lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回&lt;a hhref=&quot;#def_nginx_http_upstream_conf_server&quot;&gt;HTTP上游服务器&lt;/a&gt;阵列 &lt;/li&gt;&lt;li&gt;   400  -  Upstream是静态的（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamStatic&lt;/code&gt; ），无效的服务器ID（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadServerId&lt;/code&gt; ），服务器“ &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;id&lt;/i&gt;&lt;/code&gt; ”不可移动（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamServerImmutable&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   404  - 未找到&lt;code class=&quot;notranslate&quot;&gt;UpstreamNotFound&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;UpstreamNotFound&lt;/code&gt; ），ID为“ &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;id&lt;/i&gt;&lt;/code&gt; ”的服务器不存在（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamServerNotFound&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   405  - 禁用方法（ &lt;code class=&quot;notranslate&quot;&gt;MethodDisabled&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/dd&gt;&lt;dt id=&quot;http_keyvals_&quot;&gt; &lt;code class=&quot;notranslate&quot;&gt;/http/keyvals/&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;&lt;p&gt;  支持的方法： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;getHttpKeyvalZones&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; - 从所有HTTP keyval区域返回键值对 &lt;p&gt;  返回每个HTTP keyval共享内存&lt;a hhref=&quot;https://nginx.org/en/http/ngx_http_keyval_module.html#keyval_zone&quot;&gt;区域&lt;/a&gt;的键值对。 &lt;/p&gt;&lt;p&gt;  请求参数： &lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;fields&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，可选） &lt;/dt&gt;&lt;dd&gt;  如果“ &lt;code class=&quot;notranslate&quot;&gt;fields&lt;/code&gt; ”值为空，则仅输出HTTP keyval区域名称。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回所有http密钥的“ &lt;a hhref=&quot;#def_nginx_http_keyval_zone&quot;&gt;HTTP Keyval共享内存区域&lt;/a&gt; ”对象的集合 &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/dd&gt;&lt;dt id=&quot;http_keyvals_http_keyval_zone_name&quot;&gt; &lt;code class=&quot;notranslate&quot;&gt;/http/keyvals/{httpKeyvalZoneName}&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;  所有方法通用的参数： &lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;httpKeyvalZoneName&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，必填） &lt;/dt&gt;&lt;dd&gt;   HTTP keyval共享内存区域的名称。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;  支持的方法： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;getHttpKeyvalZoneKeysValues&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; - 从HTTP键区域返回键值对 &lt;p&gt;  返回存储在特定HTTP keyval共享内存&lt;a hhref=&quot;https://nginx.org/en/http/ngx_http_keyval_module.html#keyval_zone&quot;&gt;区域&lt;/a&gt;中的键值对。 &lt;/p&gt;&lt;p&gt;  请求参数： &lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;key&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，可选） &lt;/dt&gt;&lt;dd&gt;  从HTTP keyval区域获取特定的键值对。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回&lt;a hhref=&quot;#def_nginx_http_keyval_zone&quot;&gt;HTTP Keyval共享内存区域&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   404  - 未找到&lt;code class=&quot;notranslate&quot;&gt;KeyvalNotFound&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;KeyvalNotFound&lt;/code&gt; ），未找到keyval键（ &lt;code class=&quot;notranslate&quot;&gt;KeyvalKeyNotFound&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li id=&quot;postHttpKeyvalZoneData&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;POST&lt;/code&gt; - 将键值对添加到HTTP键值区域 &lt;p&gt;  向HTTP keyval共享内存&lt;a hhref=&quot;https://nginx.org/en/http/ngx_http_keyval_module.html#keyval_zone&quot;&gt;区域&lt;/a&gt;添加新的键值对。  如果HTTP keyval共享内存区域为空，则可以输入多个键值对。 &lt;/p&gt;&lt;p&gt;  请求参数： &lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;Key-value&lt;/code&gt; （ &lt;a hhref=&quot;#def_nginx_http_keyval_zone&quot;&gt;HTTP Keyval共享内存区域&lt;/a&gt; ，必需） &lt;/dt&gt;&lt;dd&gt;  键值对以JSON格式指定。  如果HTTP keyval共享内存区域为空，则可以输入多个键值对。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   201  - 创建 &lt;/li&gt;&lt;li&gt;   400  - 需要密钥（ &lt;code class=&quot;notranslate&quot;&gt;KeyvalFormatError&lt;/code&gt; ），只能添加一个密钥（ &lt;code class=&quot;notranslate&quot;&gt;KeyvalFormatError&lt;/code&gt; ），嵌套对象或列表（ &lt;code class=&quot;notranslate&quot;&gt;KeyvalFormatError&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   404  - 未找到&lt;code class=&quot;notranslate&quot;&gt;KeyvalNotFound&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;KeyvalNotFound&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   405  - 禁用方法（ &lt;code class=&quot;notranslate&quot;&gt;MethodDisabled&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   409  - 密钥已存在（ &lt;code class=&quot;notranslate&quot;&gt;KeyvalKeyExists&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   415  -  JSON错误（ &lt;code class=&quot;notranslate&quot;&gt;JsonError&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li id=&quot;patchHttpKeyvalZoneKeyValue&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;PATCH&lt;/code&gt; - 修改键值或删除键 &lt;p&gt;  更改键值对中所选键的值，或通过将键值设置为&lt;code class=&quot;notranslate&quot;&gt;null&lt;/code&gt;来删除键。 &lt;/p&gt;&lt;p&gt;  请求参数： &lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;httpKeyvalZoneKeyValue&lt;/code&gt; （ &lt;a hhref=&quot;#def_nginx_http_keyval_zone&quot;&gt;HTTP Keyval共享内存区域&lt;/a&gt; ，必需） &lt;/dt&gt;&lt;dd&gt;  密钥的新值以JSON格式指定。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   204  - 成功 &lt;/li&gt;&lt;li&gt;   400  - 需要密钥（ &lt;code class=&quot;notranslate&quot;&gt;KeyvalFormatError&lt;/code&gt; ），只能更新一个密钥（ &lt;code class=&quot;notranslate&quot;&gt;KeyvalFormatError&lt;/code&gt; ），嵌套对象或列表（ &lt;code class=&quot;notranslate&quot;&gt;KeyvalFormatError&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   404  - 未找到&lt;code class=&quot;notranslate&quot;&gt;KeyvalNotFound&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;KeyvalNotFound&lt;/code&gt; ），未找到keyval键（ &lt;code class=&quot;notranslate&quot;&gt;KeyvalKeyNotFound&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   405  - 禁用方法（ &lt;code class=&quot;notranslate&quot;&gt;MethodDisabled&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   415  -  JSON错误（ &lt;code class=&quot;notranslate&quot;&gt;JsonError&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li id=&quot;deleteHttpKeyvalZoneData&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;DELETE&lt;/code&gt; - 清空HTTP keyval区域 &lt;p&gt;  从HTTP keyval共享内存&lt;a hhref=&quot;https://nginx.org/en/http/ngx_http_keyval_module.html#keyval_zone&quot;&gt;区域中&lt;/a&gt;删除所有键值对。 &lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   204  - 成功 &lt;/li&gt;&lt;li&gt;   404  - 未找到&lt;code class=&quot;notranslate&quot;&gt;KeyvalNotFound&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;KeyvalNotFound&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   405  - 禁用方法（ &lt;code class=&quot;notranslate&quot;&gt;MethodDisabled&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/dd&gt;&lt;dt id=&quot;stream_&quot;&gt; &lt;code class=&quot;notranslate&quot;&gt;/stream/&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;&lt;p&gt;  支持的方法： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;getStream&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; - 返回与流相关的端点列表 &lt;p&gt;  返回第一级流端点的列表。 &lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回一个字符串数组 &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/dd&gt;&lt;dt id=&quot;stream_server_zones_&quot;&gt; &lt;code class=&quot;notranslate&quot;&gt;/stream/server_zones/&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;&lt;p&gt;  支持的方法： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;getStreamServerZones&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; - 返回所有流服务器区域的状态 &lt;p&gt;  返回每个流&lt;a hhref=&quot;https://nginx.org/en/http/ngx_http_api_module.html#status_zone&quot;&gt;服务器区域的&lt;/a&gt;状态信息。 &lt;/p&gt;&lt;p&gt;  请求参数： &lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;fields&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，可选） &lt;/dt&gt;&lt;dd&gt;  限制将输出服务器区域的哪些字段。  如果“ &lt;code class=&quot;notranslate&quot;&gt;fields&lt;/code&gt; ”值为空，则仅输出服务器区域名称。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回所有流服务器区域的“ &lt;a hhref=&quot;#def_nginx_stream_server_zone&quot;&gt;Stream Server Zone&lt;/a&gt; ”对象集合 &lt;/li&gt;&lt;li&gt;   404  - 未配置&lt;a hhref=&quot;https://nginx.org/en/stream/ngx_stream_core_module.html#stream&quot;&gt;流&lt;/a&gt; （ &lt;code class=&quot;notranslate&quot;&gt;StreamNotConfigured&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/dd&gt;&lt;dt id=&quot;stream_server_zones_stream_server_zone_name&quot;&gt; &lt;code class=&quot;notranslate&quot;&gt;/stream/server_zones/{streamServerZoneName}&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;  所有方法通用的参数： &lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;streamServerZoneName&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，必填） &lt;/dt&gt;&lt;dd&gt;  流服务器区域的名称。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;  支持的方法： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;getStreamServerZone&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; - 返回流服务器区域的状态 &lt;p&gt;  返回特定流服务器区域的状态。 &lt;/p&gt;&lt;p&gt;  请求参数： &lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;fields&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，可选） &lt;/dt&gt;&lt;dd&gt;  限制将输出服务器区域的哪些字段。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回&lt;a hhref=&quot;#def_nginx_stream_server_zone&quot;&gt;Stream Server Zone&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   404  - 未找到服务器区域（ &lt;code class=&quot;notranslate&quot;&gt;ServerZoneNotFound&lt;/code&gt; ），未配置&lt;a hhref=&quot;https://nginx.org/en/stream/ngx_stream_core_module.html#stream&quot;&gt;流&lt;/a&gt; （ &lt;code class=&quot;notranslate&quot;&gt;StreamNotConfigured&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;错误&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li id=&quot;deleteStreamServerZoneStat&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;DELETE&lt;/code&gt; - 重置流服务器区域的统计信息 &lt;p&gt;  重置特定流服务器区域中接受和丢弃的连接，会话，接收和发送字节的统计信息。 &lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   204  - 成功 &lt;/li&gt;&lt;li&gt;   404  - 未找到服务器区域（ &lt;code class=&quot;notranslate&quot;&gt;ServerZoneNotFound&lt;/code&gt; ），未配置&lt;a hhref=&quot;https://nginx.org/en/stream/ngx_stream_core_module.html#stream&quot;&gt;流&lt;/a&gt; （ &lt;code class=&quot;notranslate&quot;&gt;StreamNotConfigured&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;错误&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   405  - 禁用方法（ &lt;code class=&quot;notranslate&quot;&gt;MethodDisabled&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/dd&gt;&lt;dt id=&quot;stream_upstreams_&quot;&gt; &lt;code class=&quot;notranslate&quot;&gt;/stream/upstreams/&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;&lt;p&gt;  支持的方法： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;getStreamUpstreams&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; - 返回所有流上游服务器组的状态 &lt;p&gt;  返回每个流上游服务器组及其服务器的状态。 &lt;/p&gt;&lt;p&gt;  请求参数： &lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;fields&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，可选） &lt;/dt&gt;&lt;dd&gt;  限制将输出上游服务器组的哪些字段。  如果“ &lt;code class=&quot;notranslate&quot;&gt;fields&lt;/code&gt; ”值为空，则仅输出上游的名称。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，为所有流上游返回“ &lt;a hhref=&quot;#def_nginx_stream_upstream&quot;&gt;Stream Upstream&lt;/a&gt; ”对象的集合 &lt;/li&gt;&lt;li&gt;   404  - 未配置&lt;a hhref=&quot;https://nginx.org/en/stream/ngx_stream_core_module.html#stream&quot;&gt;流&lt;/a&gt; （ &lt;code class=&quot;notranslate&quot;&gt;StreamNotConfigured&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/dd&gt;&lt;dt id=&quot;stream_upstreams_stream_upstream_name_&quot;&gt; &lt;code class=&quot;notranslate&quot;&gt;/stream/upstreams/{streamUpstreamName}/&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;  所有方法通用的参数： &lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;streamUpstreamName&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，必填） &lt;/dt&gt;&lt;dd&gt;  流上游服务器组的名称。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;  支持的方法： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;getStreamUpstream&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; - 返回流上游服务器组的状态 &lt;p&gt;  返回特定流上游服务器组及其服务器的状态。 &lt;/p&gt;&lt;p&gt;  请求参数： &lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;fields&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，可选） &lt;/dt&gt;&lt;dd&gt;  限制将输出上游服务器组的哪些字段。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回&lt;a hhref=&quot;#def_nginx_stream_upstream&quot;&gt;Stream Upstream&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   400  -  Upstream是静态的（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamStatic&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   404  - 未找到&lt;code class=&quot;notranslate&quot;&gt;UpstreamNotFound&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;UpstreamNotFound&lt;/code&gt; ），未配置&lt;a hhref=&quot;https://nginx.org/en/stream/ngx_stream_core_module.html#stream&quot;&gt;流&lt;/a&gt; （ &lt;code class=&quot;notranslate&quot;&gt;StreamNotConfigured&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li id=&quot;deleteStreamUpstreamStat&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;DELETE&lt;/code&gt; - 重置流上游服务器组的统计信息 &lt;p&gt;  重置上游服务器组中每个上游服务器的统计信息。 &lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   204  - 成功 &lt;/li&gt;&lt;li&gt;   400  -  Upstream是静态的（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamStatic&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   404  - 未找到&lt;code class=&quot;notranslate&quot;&gt;UpstreamNotFound&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;UpstreamNotFound&lt;/code&gt; ），未配置&lt;a hhref=&quot;https://nginx.org/en/stream/ngx_stream_core_module.html#stream&quot;&gt;流&lt;/a&gt; （ &lt;code class=&quot;notranslate&quot;&gt;StreamNotConfigured&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   405  - 禁用方法（ &lt;code class=&quot;notranslate&quot;&gt;MethodDisabled&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/dd&gt;&lt;dt id=&quot;stream_upstreams_stream_upstream_name_servers_&quot;&gt; &lt;code class=&quot;notranslate&quot;&gt;/stream/upstreams/{streamUpstreamName}/servers/&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;  所有方法通用的参数： &lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;streamUpstreamName&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，必填） &lt;/dt&gt;&lt;dd&gt;  上游服务器组的名称。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;  支持的方法： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;getStreamUpstreamServers&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; - 返回流上游服务器组中所有服务器的配置 &lt;p&gt;  返回特定流上游服务器组中每个服务器的配置。 &lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回一组&lt;a hhref=&quot;#def_nginx_stream_upstream_conf_server&quot;&gt;Stream Upstream Servers&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   400  -  Upstream是静态的（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamStatic&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   404  - 未找到&lt;code class=&quot;notranslate&quot;&gt;UpstreamNotFound&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;UpstreamNotFound&lt;/code&gt; ），未配置&lt;a hhref=&quot;https://nginx.org/en/stream/ngx_stream_core_module.html#stream&quot;&gt;流&lt;/a&gt; （ &lt;code class=&quot;notranslate&quot;&gt;StreamNotConfigured&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li id=&quot;postStreamUpstreamServer&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;POST&lt;/code&gt; - 将服务器添加到流上游服务器组 &lt;p&gt;  将新服务器添加到流上游服务器组。  服务器参数以JSON格式指定。 &lt;/p&gt;&lt;p&gt;  请求参数： &lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;postStreamUpstreamServer&lt;/code&gt; （ &lt;a hhref=&quot;#def_nginx_stream_upstream_conf_server&quot;&gt;Stream Upstream Server&lt;/a&gt; ，必需） &lt;/dt&gt;&lt;dd&gt;   JSON格式的新服务器和其他可选参数的地址。  无法更改“ &lt;code class=&quot;notranslate&quot;&gt;ID&lt;/code&gt; ”，“ &lt;code class=&quot;notranslate&quot;&gt;backup&lt;/code&gt; ”和“ &lt;code class=&quot;notranslate&quot;&gt;service&lt;/code&gt; ”参数。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   201  - 创建，返回&lt;a hhref=&quot;#def_nginx_stream_upstream_conf_server&quot;&gt;Stream Upstream Server&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   400  - 上游是静态的（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamStatic&lt;/code&gt; ），无效的“ &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;parameter&lt;/i&gt;&lt;/code&gt; ”值（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamConfFormatError&lt;/code&gt; ），缺少“ &lt;code class=&quot;notranslate&quot;&gt;server&lt;/code&gt; ”参数（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamConfFormatError&lt;/code&gt; ），未知参数“ &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;name&lt;/i&gt;&lt;/code&gt; ”（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamConfFormatError&lt;/code&gt; ），嵌套对象或列表（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamConfFormatError&lt;/code&gt; ），解析时&lt;code class=&quot;notranslate&quot;&gt;error&lt;/code&gt; “ &lt;code class=&quot;notranslate&quot;&gt;error&lt;/code&gt; ”（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadAddress&lt;/code&gt; ），服务器“ &lt;code class=&quot;notranslate&quot;&gt;host&lt;/code&gt; ”（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadAddress&lt;/code&gt; ）中没有端口，服务上游“ &lt;code class=&quot;notranslate&quot;&gt;host&lt;/code&gt; ”可能没有端口（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadAddress&lt;/code&gt; ），服务上游“ &lt;code class=&quot;notranslate&quot;&gt;host&lt;/code&gt; ”需要域名（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadAddress&lt;/code&gt; ），无效“ &lt;code class=&quot;notranslate&quot;&gt;weight&lt;/code&gt; ”（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadWeight&lt;/code&gt; ），无效“ &lt;code class=&quot;notranslate&quot;&gt;max_conns&lt;/code&gt; “（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadMaxConns&lt;/code&gt; ），无效” &lt;code class=&quot;notranslate&quot;&gt;max_fails&lt;/code&gt; “（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadMaxFails&lt;/code&gt; ），无效” &lt;code class=&quot;notranslate&quot;&gt;fail_timeout&lt;/code&gt; “（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadFailTimeout&lt;/code&gt; ），无效” &lt;code class=&quot;notranslate&quot;&gt;slow_start&lt;/code&gt; “（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadSlowStart&lt;/code&gt; ），” &lt;code class=&quot;notranslate&quot;&gt;service&lt;/code&gt; “为空（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadService&lt;/code&gt; ），无法解析解析器（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamConfNoResolver&lt;/code&gt; ），上游” &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;name&lt;/i&gt;&lt;/code&gt; “没有备份（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamNoBackup&lt;/code&gt; ），上游” &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;name&lt;/i&gt;&lt;/code&gt; “内存耗尽（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamOutOfMemory&lt;/code&gt;   &lt;code class=&quot;notranslate&quot;&gt;UpstreamOutOfMemory&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   404  - 未找到&lt;code class=&quot;notranslate&quot;&gt;UpstreamNotFound&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;UpstreamNotFound&lt;/code&gt; ），未配置&lt;a hhref=&quot;https://nginx.org/en/stream/ngx_stream_core_module.html#stream&quot;&gt;流&lt;/a&gt; （ &lt;code class=&quot;notranslate&quot;&gt;StreamNotConfigured&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   405  - 禁用方法（ &lt;code class=&quot;notranslate&quot;&gt;MethodDisabled&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   415  -  JSON错误（ &lt;code class=&quot;notranslate&quot;&gt;JsonError&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/dd&gt;&lt;dt id=&quot;stream_upstreams_stream_upstream_name_servers_stream_upstream_server_id&quot;&gt; &lt;code class=&quot;notranslate&quot;&gt;/stream/upstreams/{streamUpstreamName}/servers/{streamUpstreamServerId}&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;  所有方法通用的参数： &lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;streamUpstreamName&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，必填） &lt;/dt&gt;&lt;dd&gt;  上游服务器组的名称。 &lt;/dd&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;streamUpstreamServerId&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，required） &lt;/dt&gt;&lt;dd&gt;  服务器的ID。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;  支持的方法： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;getStreamUpstreamServer&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; - 返回流上游服务器组中服务器的配置 &lt;p&gt;  返回流上游服务器组中特定服务器的配置。 &lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回&lt;a hhref=&quot;#def_nginx_stream_upstream_conf_server&quot;&gt;Stream Upstream Server&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   400  -  Upstream是静态的（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamStatic&lt;/code&gt; ），无效的服务器ID（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadServerId&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   404  -  Upstream not found（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamNotFound&lt;/code&gt; ），ID为“ &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;id&lt;/i&gt;&lt;/code&gt; ”的服务器不存在（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamServerNotFound&lt;/code&gt; ）， &lt;a hhref=&quot;https://nginx.org/en/stream/ngx_stream_core_module.html#stream&quot;&gt;流&lt;/a&gt;未配置（ &lt;code class=&quot;notranslate&quot;&gt;StreamNotConfigured&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li id=&quot;patchStreamUpstreamServer&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;PATCH&lt;/code&gt; - 修改流上游服务器组中的服务器 &lt;p&gt;  修改流上游服务器组中特定服务器的设置。  服务器参数以JSON格式指定。 &lt;/p&gt;&lt;p&gt;  请求参数： &lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;patchStreamUpstreamServer&lt;/code&gt; （ &lt;a hhref=&quot;#def_nginx_stream_upstream_conf_server&quot;&gt;Stream Upstream Server&lt;/a&gt; ，必需） &lt;/dt&gt;&lt;dd&gt;  服务器参数，以JSON格式指定。  无法更改“ &lt;code class=&quot;notranslate&quot;&gt;ID&lt;/code&gt; ”，“ &lt;code class=&quot;notranslate&quot;&gt;backup&lt;/code&gt; ”和“ &lt;code class=&quot;notranslate&quot;&gt;service&lt;/code&gt; ”参数。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回&lt;a hhref=&quot;#def_nginx_stream_upstream_conf_server&quot;&gt;Stream Upstream Server&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   400  - 上游是静态的（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamStatic&lt;/code&gt; ），无效的“ &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;parameter&lt;/i&gt;&lt;/code&gt; ”值（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamConfFormatError&lt;/code&gt; ），未知参数“ &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;name&lt;/i&gt;&lt;/code&gt; ”（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamConfFormatError&lt;/code&gt; ），嵌套对象或列表（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamConfFormatError&lt;/code&gt; ），解析时的“ &lt;code class=&quot;notranslate&quot;&gt;error&lt;/code&gt; ”（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadAddress&lt;/code&gt; ），无效的“ &lt;code class=&quot;notranslate&quot;&gt;server&lt;/code&gt; ”参数（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadAddress&lt;/code&gt; ），服务器“ &lt;code class=&quot;notranslate&quot;&gt;host&lt;/code&gt; ”（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadAddress&lt;/code&gt; ）中没有端口，服务器ID无效（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadServerId&lt;/code&gt; ），无效“ &lt;code class=&quot;notranslate&quot;&gt;weight&lt;/code&gt; ”（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadWeight&lt;/code&gt; ），无效“ &lt;code class=&quot;notranslate&quot;&gt;max_conns&lt;/code&gt; ”（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadMaxConns&lt;/code&gt; ），无效“ &lt;code class=&quot;notranslate&quot;&gt;max_fails&lt;/code&gt; ”（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadMaxFails&lt;/code&gt; ），无效“ &lt;code class=&quot;notranslate&quot;&gt;fail_timeout&lt;/code&gt; ”（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadFailTimeout&lt;/code&gt; ），无效“ &lt;code class=&quot;notranslate&quot;&gt;slow_start&lt;/code&gt; ”（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadSlowStart&lt;/code&gt; ），“ &lt;code class=&quot;notranslate&quot;&gt;service&lt;/code&gt; ”为空（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadService&lt;/code&gt; ），服务器“ &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;ID&lt;/i&gt;&lt;/code&gt; ”地址为不可变（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamServerImmutable&lt;/code&gt; ），服务器“ &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;ID&lt;/i&gt;&lt;/code&gt; ”权重为不可变（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamServerWeightImmutable&lt;/code&gt; ），上游“ &lt;code class=&quot;notranslate&quot;&gt;name&lt;/code&gt; ”内存耗尽（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamOutOfMemory&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;错误&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   404  -  Upstream not found（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamNotFound&lt;/code&gt; ），ID为“ &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;id&lt;/i&gt;&lt;/code&gt; ”的服务器不存在（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamServerNotFound&lt;/code&gt; ）， &lt;a hhref=&quot;https://nginx.org/en/stream/ngx_stream_core_module.html#stream&quot;&gt;流&lt;/a&gt;未配置（ &lt;code class=&quot;notranslate&quot;&gt;StreamNotConfigured&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   405  - 禁用方法（ &lt;code class=&quot;notranslate&quot;&gt;MethodDisabled&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   415  -  JSON错误（ &lt;code class=&quot;notranslate&quot;&gt;JsonError&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li id=&quot;deleteStreamUpstreamServer&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;DELETE&lt;/code&gt; - 从流上游服务器组中删除服务器 &lt;p&gt;  从流服务器组中删除服务器。 &lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回一组&lt;a hhref=&quot;#def_nginx_stream_upstream_conf_server&quot;&gt;Stream Upstream Servers&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   400  -  Upstream是静态的（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamStatic&lt;/code&gt; ），无效的服务器ID（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamBadServerId&lt;/code&gt; ），服务器“ &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;id&lt;/i&gt;&lt;/code&gt; ”不可移动（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamServerImmutable&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   404  -  Upstream not found（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamNotFound&lt;/code&gt; ），ID为“ &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;id&lt;/i&gt;&lt;/code&gt; ”的服务器不存在（ &lt;code class=&quot;notranslate&quot;&gt;UpstreamServerNotFound&lt;/code&gt; ）， &lt;a hhref=&quot;https://nginx.org/en/stream/ngx_stream_core_module.html#stream&quot;&gt;流&lt;/a&gt;未配置（ &lt;code class=&quot;notranslate&quot;&gt;StreamNotConfigured&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   405  - 禁用方法（ &lt;code class=&quot;notranslate&quot;&gt;MethodDisabled&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/dd&gt;&lt;dt id=&quot;stream_keyvals_&quot;&gt; &lt;code class=&quot;notranslate&quot;&gt;/stream/keyvals/&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;&lt;p&gt;  支持的方法： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;getStreamKeyvalZones&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; - 从所有流键区域返回键值对 &lt;p&gt;  返回每个流keyval共享内存&lt;a hhref=&quot;https://nginx.org/en/stream/ngx_stream_keyval_module.html#keyval_zone&quot;&gt;区域&lt;/a&gt;的键值对。 &lt;/p&gt;&lt;p&gt;  请求参数： &lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;fields&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，可选） &lt;/dt&gt;&lt;dd&gt;  如果“ &lt;code class=&quot;notranslate&quot;&gt;fields&lt;/code&gt; ”值为空，则仅输出流密钥区域名称。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回所有流关键字的“ &lt;a hhref=&quot;#def_nginx_stream_keyval_zone&quot;&gt;Stream Keyval Shared Memory Zone&lt;/a&gt; ”对象的集合 &lt;/li&gt;&lt;li&gt;   404  - 未配置&lt;a hhref=&quot;https://nginx.org/en/stream/ngx_stream_core_module.html#stream&quot;&gt;流&lt;/a&gt; （ &lt;code class=&quot;notranslate&quot;&gt;StreamNotConfigured&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/dd&gt;&lt;dt id=&quot;stream_keyvals_stream_keyval_zone_name&quot;&gt; &lt;code class=&quot;notranslate&quot;&gt;/stream/keyvals/{streamKeyvalZoneName}&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;  所有方法通用的参数： &lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;streamKeyvalZoneName&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，必填） &lt;/dt&gt;&lt;dd&gt;  流keyval共享内存区域的名称。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;  支持的方法： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;getStreamKeyvalZoneKeysValues&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; - 从流键区域返回键 - 值对 &lt;p&gt;  返回存储在特定流keyval共享内存&lt;a hhref=&quot;https://nginx.org/en/stream/ngx_stream_keyval_module.html#keyval_zone&quot;&gt;区域&lt;/a&gt;中的键值对。 &lt;/p&gt;&lt;p&gt;  请求参数： &lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;key&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ，可选） &lt;/dt&gt;&lt;dd&gt;  从流密钥区域获取特定键值对。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回&lt;a hhref=&quot;#def_nginx_stream_keyval_zone&quot;&gt;Stream Keyval共享内存区域&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   404  - 未找到&lt;code class=&quot;notranslate&quot;&gt;KeyvalNotFound&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;KeyvalNotFound&lt;/code&gt; ），未找到keyval键（ &lt;code class=&quot;notranslate&quot;&gt;KeyvalKeyNotFound&lt;/code&gt; ），未配置&lt;a hhref=&quot;https://nginx.org/en/stream/ngx_stream_core_module.html#stream&quot;&gt;流&lt;/a&gt; （ &lt;code class=&quot;notranslate&quot;&gt;StreamNotConfigured&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li id=&quot;postStreamKeyvalZoneData&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;POST&lt;/code&gt; - 将键值对添加到流键值区域 &lt;p&gt;  将新键值对添加到流键值共享内存&lt;a hhref=&quot;https://nginx.org/en/stream/ngx_stream_keyval_module.html#keyval_zone&quot;&gt;区域&lt;/a&gt; 。  如果流键值共享内存区域为空，则可以输入多个键值对。 &lt;/p&gt;&lt;p&gt;  请求参数： &lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;Key-value&lt;/code&gt; （ &lt;a hhref=&quot;#def_nginx_stream_keyval_zone&quot;&gt;Stream Keyval共享内存区域&lt;/a&gt; ，必需） &lt;/dt&gt;&lt;dd&gt;  键值对以JSON格式指定。  如果流键值共享内存区域为空，则可以输入多个键值对。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   201  - 创建 &lt;/li&gt;&lt;li&gt;   400  - 需要密钥（ &lt;code class=&quot;notranslate&quot;&gt;KeyvalFormatError&lt;/code&gt; ），只能添加一个密钥（ &lt;code class=&quot;notranslate&quot;&gt;KeyvalFormatError&lt;/code&gt; ），嵌套对象或列表（ &lt;code class=&quot;notranslate&quot;&gt;KeyvalFormatError&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   404  - 未找到&lt;code class=&quot;notranslate&quot;&gt;KeyvalNotFound&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;KeyvalNotFound&lt;/code&gt; ），未配置&lt;a hhref=&quot;https://nginx.org/en/stream/ngx_stream_core_module.html#stream&quot;&gt;流&lt;/a&gt; （ &lt;code class=&quot;notranslate&quot;&gt;StreamNotConfigured&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   405  - 禁用方法（ &lt;code class=&quot;notranslate&quot;&gt;MethodDisabled&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   409  - 密钥已存在（ &lt;code class=&quot;notranslate&quot;&gt;KeyvalKeyExists&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   415  -  JSON错误（ &lt;code class=&quot;notranslate&quot;&gt;JsonError&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li id=&quot;patchStreamKeyvalZoneKeyValue&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;PATCH&lt;/code&gt; - 修改键值或删除键 &lt;p&gt;  更改键值对中所选键的值，或通过将键值设置为&lt;code class=&quot;notranslate&quot;&gt;null&lt;/code&gt;来删除键。 &lt;/p&gt;&lt;p&gt;  请求参数： &lt;/p&gt;&lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;streamKeyvalZoneKeyValue&lt;/code&gt; （ &lt;a hhref=&quot;#def_nginx_stream_keyval_zone&quot;&gt;Stream Keyval共享内存区域&lt;/a&gt; ，必需） &lt;/dt&gt;&lt;dd&gt;  密钥的新值以JSON格式指定。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   204  - 成功 &lt;/li&gt;&lt;li&gt;   400  - 需要密钥（ &lt;code class=&quot;notranslate&quot;&gt;KeyvalFormatError&lt;/code&gt; ），只能更新一个密钥（ &lt;code class=&quot;notranslate&quot;&gt;KeyvalFormatError&lt;/code&gt; ），嵌套对象或列表（ &lt;code class=&quot;notranslate&quot;&gt;KeyvalFormatError&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   404  - 未找到&lt;code class=&quot;notranslate&quot;&gt;KeyvalNotFound&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;KeyvalNotFound&lt;/code&gt; ），未找到keyval键（ &lt;code class=&quot;notranslate&quot;&gt;KeyvalKeyNotFound&lt;/code&gt; ），未配置&lt;a hhref=&quot;https://nginx.org/en/stream/ngx_stream_core_module.html#stream&quot;&gt;流&lt;/a&gt; （ &lt;code class=&quot;notranslate&quot;&gt;StreamNotConfigured&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   405  - 禁用方法（ &lt;code class=&quot;notranslate&quot;&gt;MethodDisabled&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   415  -  JSON错误（ &lt;code class=&quot;notranslate&quot;&gt;JsonError&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li id=&quot;deleteStreamKeyvalZoneData&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;DELETE&lt;/code&gt; - 清空流键值区域 &lt;p&gt;  从流keyval共享内存&lt;a hhref=&quot;https://nginx.org/en/stream/ngx_stream_keyval_module.html#keyval_zone&quot;&gt;区域中&lt;/a&gt;删除所有键值对。 &lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   204  - 成功 &lt;/li&gt;&lt;li&gt;   404  - 未找到&lt;code class=&quot;notranslate&quot;&gt;KeyvalNotFound&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;KeyvalNotFound&lt;/code&gt; ），未配置&lt;a hhref=&quot;https://nginx.org/en/stream/ngx_stream_core_module.html#stream&quot;&gt;流&lt;/a&gt; （ &lt;code class=&quot;notranslate&quot;&gt;StreamNotConfigured&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   405  - 禁用方法（ &lt;code class=&quot;notranslate&quot;&gt;MethodDisabled&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;Error&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/dd&gt;&lt;dt id=&quot;stream_zone_sync_&quot;&gt; &lt;code class=&quot;notranslate&quot;&gt;/stream/zone_sync/&lt;/code&gt; &lt;/dt&gt; &lt;dd&gt;&lt;p&gt;  支持的方法： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;getStreamZoneSync&quot;&gt;   &lt;code class=&quot;notranslate&quot;&gt;GET&lt;/code&gt; - 返回节点的同步状态 &lt;p&gt;  返回群集节点的同步状态。 &lt;/p&gt;&lt;p&gt;  可能的回应： &lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li&gt;   200  - 成功，返回&lt;a hhref=&quot;#def_nginx_stream_zone_sync&quot;&gt;Stream Zone Sync节点&lt;/a&gt; &lt;/li&gt;&lt;li&gt;   404  - 未配置区域同步（ &lt;code class=&quot;notranslate&quot;&gt;ZoneSyncNotConfigured&lt;/code&gt; ），未配置&lt;a hhref=&quot;https://nginx.org/en/stream/ngx_stream_core_module.html#stream&quot;&gt;流&lt;/a&gt; （ &lt;code class=&quot;notranslate&quot;&gt;StreamNotConfigured&lt;/code&gt; ），返回&lt;a hhref=&quot;#def_nginx_error&quot;&gt;错误&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;&lt;/p&gt;&lt;a name=&quot;definitions&quot;&gt;&lt;/a&gt;&lt;center&gt;&lt;h4&gt;  响应对象 &lt;/h4&gt;&lt;/center&gt;&lt;p&gt;&lt;/p&gt;&lt;ul class=&quot;compact&quot;&gt;&lt;li id=&quot;def_nginx_object&quot;&gt;&lt;p&gt;   nginx的： &lt;/p&gt;  有关nginx的一般信息： &lt;dl class=&quot;compact&quot;&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;version&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ） &lt;/dt&gt;&lt;dd&gt;   nginx的版本。 &lt;/dd&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;build&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ） &lt;/dt&gt;&lt;dd&gt;   nginx构建的名称。 &lt;/dd&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;address&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ） &lt;/dt&gt;&lt;dd&gt;  接受状态请求的服务器的地址。 &lt;/dd&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;generation&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;integer&lt;/code&gt; ） &lt;/dt&gt;&lt;dd&gt;  配置&lt;a hhref=&quot;https://nginx.org/en/control.html#reconfiguration&quot;&gt;重新加载&lt;/a&gt;的总数。 &lt;/dd&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;load_timestamp&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ） &lt;/dt&gt;&lt;dd&gt;  上次重新加载配置的时间，采用ISO 8601格式，分辨率为毫秒。 &lt;/dd&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;timestamp&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;string&lt;/code&gt; ） &lt;/dt&gt;&lt;dd&gt;   ISO 8601格式的当前时间，分辨率为毫秒。 &lt;/dd&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;pid&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;integer&lt;/code&gt; ） &lt;/dt&gt;&lt;dd&gt;  处理状态请求的工作进程的ID。 &lt;/dd&gt;&lt;dt&gt;   &lt;code class=&quot;notranslate&quot;&gt;ppid&lt;/code&gt; （ &lt;code class=&quot;notranslate&quot;&gt;integer&lt;/code&gt; ） &lt;/dt&gt;&lt;dd&gt;  启动&lt;a hhref=&quot;https://nginx.org/en/http/ngx_http_status_module.html#pid&quot;&gt;工作进程&lt;/a&gt;的主进程的ID。 &lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;  例： &lt;/p&gt;&lt;blockquote class=&quot;example&quot;&gt;&lt;pre class=&quot;notranslate&quot;&gt;{
</code></pre><p>  “nginx” : {<br>    “version” : “1.15.2”,<br>    “build” : “nginx-plus-r16”,<br>    “address” : “206.251.255.64”,<br>    “generation” : 6,<br>    “load_timestamp” : “2018-10-08T09:05:48.776Z”,<br>    “timestamp” : “2018-10-08T15:23:17.056Z”,<br>    “pid” : 32212,<br>    “ppid” : 32210<br>  }<br>}<li id="def_nginx_processes"><p>  流程： </p><dl class="compact"><dt>   <code class="notranslate">respawned</code> （ <code class="notranslate">integer</code> ） </dt><dd>  异常终止和重生的子进程的总数。 </dd></dl><p>  例： </p><blockquote class="example"><pre class="notranslate">{<br>  “respawned” : 0<br>}</pre></blockquote></li><li id="def_nginx_connections"><p>  连接： </p>  已接受，已删除，活动和空闲连接的数量。 <dl class="compact"><dt>   <code class="notranslate">accepted</code> （ <code class="notranslate">integer</code> ） </dt><dd>  已接受的客户端连接总数。 </dd><dt>   <code class="notranslate">dropped</code> （ <code class="notranslate">integer</code> ） </dt><dd>  已删除的客户端连接总数。 </dd><dt>   <code class="notranslate">active</code> （ <code class="notranslate">integer</code> ） </dt><dd>  当前活动客户端连接数。 </dd><dt>   <code class="notranslate">idle</code> （ <code class="notranslate">integer</code> ） </dt><dd>  当前空闲客户端连接数。 </dd></dl><p>  例： </p><blockquote class="example"><pre class="notranslate">{<br>  “accepted” : 4968119,<br>  “dropped” : 0,<br>  “active” : 5,<br>  “idle” : 117<br>}</pre></blockquote></li><li id="def_nginx_ssl_object"><p>   SSL： </p><dl class="compact"><dt>   <code class="notranslate">handshakes</code> （ <code class="notranslate">integer</code> ） </dt><dd>  成功的SSL握手总数。 </dd><dt>   <code class="notranslate">handshakes_failed</code> （ <code class="notranslate">integer</code> ） </dt><dd>  失败的SSL握手总数。 </dd><dt>   <code class="notranslate">session_reuses</code> （ <code class="notranslate">integer</code> ） </dt><dd>   SSL握手期间会话​​重用的总次数。 </dd></dl><p>  例： </p><blockquote class="example"><pre class="notranslate">{<br>  “handshakes” : 79572,<br>  “handshakes_failed” : 21025,<br>  “session_reuses” : 15762<br>}</pre></blockquote></li><li id="def_nginx_slab_zone"><p>  带有slab分配器的共享内存区域： </p><dl class="compact"><dt> <code class="notranslate">pages</code> </dt> <dd>  空闲和已用内存页面的数量。 <dl class="compact"><dt>   <code class="notranslate">used</code> （ <code class="notranslate">integer</code> ） </dt><dd>  当前使用的内存页数。 </dd><dt>   <code class="notranslate">free</code> （ <code class="notranslate">integer</code> ） </dt><dd>  当前可用内存页数。 </dd></dl></dd><dt> <code class="notranslate">slots</code> </dt> <dd><p>  内存插槽的状态数据（8,16,32,64,128等） </p><p>   “ <a hhref="#def_nginx_slab_zone_slot">Memory Slot</a> ”对象的集合 </p></dd></dl><p>  例： </p><blockquote class="example"><pre class="notranslate">{<br>  “pages” : {<br>    “used” : 1143,<br>    “free” : 2928<br>  },<br>  “slots” : {<br>    “8” : {<br>      “used” : 0,<br>      “free” : 0,<br>      “reqs” : 0,<br>      “fails” : 0<br>    },<br>    “16” : {<br>      “used” : 0,<br>      “free” : 0,<br>      “reqs” : 0,<br>      “fails” : 0<br>    },<br>    “32” : {<br>      “used” : 0,<br>      “free” : 0,<br>      “reqs” : 0,<br>      “fails” : 0<br>    },<br>    “64” : {<br>      “used” : 1,<br>      “free” : 63,<br>      “reqs” : 1,<br>      “fails” : 0<br>    },<br>    “128” : {<br>      “used” : 0,<br>      “free” : 0,<br>      “reqs” : 0,<br>      “fails” : 0<br>    },<br>    “256” : {<br>      “used” : 18078,<br>      “free” : 178,<br>      “reqs” : 1635736,<br>      “fails” : 0<br>    }<br>  }<br>}</pre></blockquote></li><li id="def_nginx_slab_zone_slot"><p>  内存插槽： </p><dl class="compact"><dt>   <code class="notranslate">used</code> （ <code class="notranslate">integer</code> ） </dt><dd>  当前使用的内存插槽数。 </dd><dt>   <code class="notranslate">free</code> （ <code class="notranslate">integer</code> ） </dt><dd>  当前可用内存插槽的数量。 </dd><dt>   <code class="notranslate">reqs</code> （ <code class="notranslate">integer</code> ） </dt><dd>  分配指定大小内存的总尝试次数。 </dd><dt>   <code class="notranslate">fails</code> （ <code class="notranslate">integer</code> ） </dt><dd>  分配指定大小内存的尝试失败次数。 </dd></dl></li><li id="def_nginx_http_requests"><p>   HTTP请求： </p><dl class="compact"><dt>   <code class="notranslate">total</code> （ <code class="notranslate">integer</code> ） </dt><dd>  客户端请求的总数。 </dd><dt>   <code class="notranslate">current</code> （ <code class="notranslate">integer</code> ） </dt><dd>  当前的客户端请求数。 </dd></dl><p>  例： </p><blockquote class="example"><pre class="notranslate">{<br>  “total” : 10624511,<br>  “current” : 4<br>}</pre></blockquote></li><li id="def_nginx_http_server_zone"><p>   HTTP服务器区域： </p><dl class="compact"><dt>   <code class="notranslate">processing</code> （ <code class="notranslate">integer</code> ） </dt><dd>  当前正在处理的客户端请求数。 </dd><dt>   <code class="notranslate">requests</code> （ <code class="notranslate">integer</code> ） </dt><dd>  从客户端收到的客户端请求总数。 </dd><dt> <code class="notranslate">responses</code> </dt> <dd>  发送给客户端的响应总数和状态代码为“ <code class="notranslate">1xx</code> ”，“ <code class="notranslate">2xx</code> ”，“ <code class="notranslate">3xx</code> ”，“ <code class="notranslate">4xx</code> ”和“ <code class="notranslate">5xx</code> ”的响应数。 <dl class="compact"><dt>   <code class="notranslate">1xx</code> （ <code class="notranslate">integer</code> ） </dt><dd>  带有“ <code class="notranslate">1xx</code> ”状态代码的响应数。 </dd><dt>   <code class="notranslate">2xx</code> （ <code class="notranslate">integer</code> ） </dt><dd>  带有“ <code class="notranslate">2xx</code> ”状态代码的响应数。 </dd><dt>   <code class="notranslate">3xx</code> （ <code class="notranslate">integer</code> ） </dt><dd>  带有“ <code class="notranslate">3xx</code> ”状态代码的响应数。 </dd><dt>   <code class="notranslate">4xx</code> （ <code class="notranslate">integer</code> ） </dt><dd>  带有“ <code class="notranslate">4xx</code> ”状态代码的响应数。 </dd><dt>   <code class="notranslate">5xx</code> （ <code class="notranslate">integer</code> ） </dt><dd>  带有“ <code class="notranslate">5xx</code> ”状态代码的响应数。 </dd><dt>   <code class="notranslate">total</code> （ <code class="notranslate">integer</code> ） </dt><dd>  发送给客户端的响应总数。 </dd></dl></dd><dt>   <code class="notranslate">discarded</code> （ <code class="notranslate">integer</code> ） </dt><dd>  未发送响应而完成的请求总数。 </dd><dt>   <code class="notranslate">received</code> （ <code class="notranslate">integer</code> ） </dt><dd>  从客户端收到的总字节数。 </dd><dt>   <code class="notranslate">sent</code> （ <code class="notranslate">integer</code> ） </dt><dd>  发送给客户端的总字节数。 </dd></dl><p>  例： </p><blockquote class="example"><pre class="notranslate">{<br>  “processing” : 1,<br>  “requests” : 706690,<br>  “responses” : {<br>    “1xx” : 0,<br>    “2xx” : 699482,<br>    “3xx” : 4522,<br>    “4xx” : 907,<br>    “5xx” : 266,<br>    “total” : 705177<br>  },<br>  “discarded” : 1513,<br>  “received” : 172711587,<br>  “sent” : 19415530115<br>}</pre></blockquote></li><li id="def_nginx_http_cache"><p>   HTTP缓存： </p><dl class="compact"><dt>   <code class="notranslate">size</code> （ <code class="notranslate">integer</code> ） </dt><dd>  缓存的当前大小。 </dd><dt>   <code class="notranslate">max_size</code> （ <code class="notranslate">integer</code> ） </dt><dd>  配置中指定的高速缓存的最大大小限制。 </dd><dt>   <code class="notranslate">cold</code> （ <code class="notranslate">boolean</code> ） </dt><dd>  一个布尔值，指示“缓存加载器”进程是否仍在将数据从磁盘加载到缓存中。 </dd><dt> <code class="notranslate">hit</code> </dt> <dd><dl class="compact"><dt>   <code class="notranslate">responses</code> （ <code class="notranslate">integer</code> ） </dt><dd>  从缓存中读取的<a hhref="https://nginx.org/en/http/ngx_http_proxy_module.html#proxy_cache_valid">有效</a>响应总数。 </dd><dt>   <code class="notranslate">bytes</code> （ <code class="notranslate">integer</code> ） </dt><dd>  从缓存中读取的总字节数。 </dd></dl></dd><dt> <code class="notranslate">stale</code> </dt> <dd><dl class="compact"><dt>   <code class="notranslate">responses</code> （ <code class="notranslate">integer</code> ） </dt><dd>  从缓存中读取的过期响应总数（请参阅<a hhref="https://nginx.org/en/http/ngx_http_proxy_module.html#proxy_cache_use_stale">proxy_cache_use_stale</a>和其他“ <code class="notranslate"><em>_cache_use_stale</em></code> ”指令）。 </dd><dt>   <code class="notranslate">bytes</code> （ <code class="notranslate">integer</code> ） </dt><dd>  从缓存中读取的总字节数。 </dd></dl></dd><dt> <code class="notranslate">updating</code> </dt> <dd><dl class="compact"><dt>   <code class="notranslate">responses</code> （ <code class="notranslate">integer</code> ） </dt><dd>  在响应更新时从缓存读取的过期响应总数（请参阅<a hhref="https://nginx.org/en/http/ngx_http_proxy_module.html#proxy_cache_use_stale_updating">proxy_cache_use_stale</a>和其他“ <code class="notranslate">_cache_use_stale</code> ”指令）。 </dd><dt>   <code class="notranslate">bytes</code> （ <code class="notranslate">integer</code> ） </dt><dd>  从缓存中读取的总字节数。 </dd></dl></dd><dt> <code class="notranslate">revalidated</code> </dt> <dd><dl class="compact"><dt>   <code class="notranslate">responses</code> （ <code class="notranslate">integer</code> ） </dt><dd>  从缓存中读取的过期和重新验证响应的总数（请参阅<a hhref="https://nginx.org/en/http/ngx_http_proxy_module.html#proxy_cache_revalidate">proxy_cache_revalidate</a>和其他“ <code class="notranslate"><em>_cache_revalidate</em></code> <a hhref="https://nginx.org/en/http/ngx_http_proxy_module.html#proxy_cache_revalidate">_cache_revalidate</a> ”指令。 </dd><dt>   <code class="notranslate">bytes</code> （ <code class="notranslate">integer</code> ） </dt><dd>  从缓存中读取的总字节数。 </dd></dl></dd><dt> <code class="notranslate">miss</code> </dt> <dd><dl class="compact"><dt>   <code class="notranslate">responses</code> （ <code class="notranslate">integer</code> ） </dt><dd>  在缓存中找不到的响应总数。 </dd><dt>   <code class="notranslate">bytes</code> （ <code class="notranslate">integer</code> ） </dt><dd>  从代理服务器读取的总字节数。 </dd><dt>   <code class="notranslate">responses_written</code> （ <code class="notranslate">integer</code> ） </dt><dd>  写入缓存的响应总数。 </dd><dt>   <code class="notranslate">bytes_written</code> （ <code class="notranslate">integer</code> ） </dt><dd>  写入缓存的总字节数。 </dd></dl></dd><dt> <code class="notranslate">expired</code> </dt> <dd><dl class="compact"><dt>   <code class="notranslate">responses</code> （ <code class="notranslate">integer</code> ） </dt><dd>  未从缓存中获取的过期响应总数。 </dd><dt>   <code class="notranslate">bytes</code> （ <code class="notranslate">integer</code> ） </dt><dd>  从代理服务器读取的总字节数。 </dd><dt>   <code class="notranslate">responses_written</code> （ <code class="notranslate">integer</code> ） </dt><dd>  写入缓存的响应总数。 </dd><dt>   <code class="notranslate">bytes_written</code> （ <code class="notranslate">integer</code> ） </dt><dd>  写入缓存的总字节数。 </dd></dl></dd><dt> <code class="notranslate">bypass</code> </dt> <dd><dl class="compact"><dt>   <code class="notranslate">responses</code> （ <code class="notranslate">integer</code> ） </dt><dd>  由于<a hhref="https://nginx.org/en/http/ngx_http_proxy_module.html#proxy_cache_bypass">proxy_cache_bypass</a>和其他“ <code class="notranslate">_cache_bypass</code> ”指令，缓存中未查找的响应总数。 </dd><dt>   <code class="notranslate">bytes</code> （ <code class="notranslate">integer</code> ） </dt><dd>  从代理服务器读取的总字节数。 </dd><dt>   <code class="notranslate">responses_written</code> （ <code class="notranslate">integer</code> ） </dt><dd>  写入缓存的响应总数。 </dd><dt>   <code class="notranslate">bytes_written</code> （ <code class="notranslate">integer</code> ） </dt><dd>  写入缓存的总字节数。 </dd></dl></dd></dl><p>  例： </p><blockquote class="example"><pre class="notranslate">{<br>  “size” : 530915328,<br>  “max_size” : 536870912,<br>  “cold” : false,<br>  “hit” : {<br>    “responses” : 254032,<br>    “bytes” : 6685627875<br>  },<br>  “stale” : {<br>    “responses” : 0,<br>    “bytes” : 0<br>  },<br>  “updating” : {<br>    “responses” : 0,<br>    “bytes” : 0<br>  },<br>  “revalidated” : {<br>    “responses” : 0,<br>    “bytes” : 0<br>  },<br>  “miss” : {<br>    “responses” : 1619201,<br>    “bytes” : 53841943822<br>  },<br>  “expired” : {<br>    “responses” : 45859,<br>    “bytes” : 1656847080,<br>    “responses_written” : 44992,<br>    “bytes_written” : 1641825173<br>  },<br>  “bypass” : {<br>    “responses” : 200187,<br>    “bytes” : 5510647548,<br>    “responses_written” : 200173,<br>    “bytes_written” : 44992<br>  }<br>}</pre></blockquote></li><li id="def_nginx_http_upstream"><p>   HTTP上游： </p><dl class="compact"><dt> <code class="notranslate">peers</code> </dt> <dd>  一系列的： <dl class="compact"><dt>   <code class="notranslate">id</code> （ <code class="notranslate">integer</code> ） </dt><dd>  服务器的ID。 </dd><dt>   <code class="notranslate">server</code> （ <code class="notranslate">string</code> ） </dt><dd>  服务器的<a hhref="https://nginx.org/en/http/ngx_http_upstream_module.html#server">地址</a> 。 </dd><dt>   <code class="notranslate">service</code> （ <code class="notranslate">string</code> ） </dt><dd>   <a hhref="https://nginx.org/en/http/ngx_http_upstream_module.html#server">server</a>指令的<a hhref="https://nginx.org/en/http/ngx_http_upstream_module.html#service">服务</a>参数值。 </dd><dt>   <code class="notranslate">name</code> （ <code class="notranslate">string</code> ） </dt><dd>   <a hhref="https://nginx.org/en/http/ngx_http_upstream_module.html#server">server</a>指令中指定的<a hhref="https://nginx.org/en/http/ngx_http_upstream_module.html#server">服务器</a>名称。 </dd><dt>   <code class="notranslate">backup</code> （ <code class="notranslate">boolean</code> ） </dt><dd>  一个布尔值，指示服务器是否为<a hhref="https://nginx.org/en/http/ngx_http_upstream_module.html#backup">备份</a>服务器。 </dd><dt>   <code class="notranslate">weight</code> （ <code class="notranslate">integer</code> ） </dt><dd>  服务器的<a hhref="https://nginx.org/en/http/ngx_http_upstream_module.html#weight">重量</a> 。 </dd><dt>   <code class="notranslate">state</code> （ <code class="notranslate">string</code> ） </dt><dd>  当前状态，可以是“ <code class="notranslate">up</code> ”，“ <code class="notranslate">draining</code> ”，“ <code class="notranslate">down</code> ”，“ <code class="notranslate">unavail</code> ”，“ <code class="notranslate">checking</code> ”和“ <code class="notranslate">unhealthy</code> ”之一。 </dd><dt>   <code class="notranslate">active</code> （ <code class="notranslate">integer</code> ） </dt><dd>  当前活动连接数。 </dd><dt>   <code class="notranslate">max_conns</code> （ <code class="notranslate">integer</code> ） </dt><dd>  服务器的<a hhref="https://nginx.org/en/http/ngx_http_upstream_module.html#max_conns">max_conns</a>限制。 </dd><dt>   <code class="notranslate">requests</code> （ <code class="notranslate">integer</code> ） </dt><dd>  转发到此服务器的客户端请求总数。 </dd><dt> <code class="notranslate">responses</code> </dt> <dd><dl class="compact"><dt>   <code class="notranslate">1xx</code> （ <code class="notranslate">integer</code> ） </dt><dd>  带有“ <code class="notranslate">1xx</code> ”状态代码的响应数。 </dd><dt>   <code class="notranslate">2xx</code> （ <code class="notranslate">integer</code> ） </dt><dd>  带有“ <code class="notranslate">2xx</code> ”状态代码的响应数。 </dd><dt>   <code class="notranslate">3xx</code> （ <code class="notranslate">integer</code> ） </dt><dd>  带有“ <code class="notranslate">3xx</code> ”状态代码的响应数。 </dd><dt>   <code class="notranslate">4xx</code> （ <code class="notranslate">integer</code> ） </dt><dd>  带有“ <code class="notranslate">4xx</code> ”状态代码的响应数。 </dd><dt>   <code class="notranslate">5xx</code> （ <code class="notranslate">integer</code> ） </dt><dd>  带有“ <code class="notranslate">5xx</code> ”状态代码的响应数。 </dd><dt>   <code class="notranslate">total</code> （ <code class="notranslate">integer</code> ） </dt><dd>  从此服务器获取的响应总数。 </dd></dl></dd><dt>   <code class="notranslate">sent</code> （ <code class="notranslate">integer</code> ） </dt><dd>  发送到此服务器的总字节数。 </dd><dt>   <code class="notranslate">received</code> （ <code class="notranslate">integer</code> ） </dt><dd>  从此服务器接收的总字节数。 </dd><dt>   <code class="notranslate">fails</code> （ <code class="notranslate">integer</code> ） </dt><dd>  与服务器通信失败的总次数。 </dd><dt>   <code class="notranslate">unavail</code> （ <code class="notranslate">integer</code> ） </dt><dd>  由于尝试达到<a hhref="https://nginx.org/en/http/ngx_http_upstream_module.html#max_fails">max_fails</a>阈值的次数不成功，服务器因客户端请求（状态为“ <code class="notranslate">unavail</code> ”）而变为不可用的次数。 </dd><dt> <code class="notranslate">health_checks</code> </dt> <dd><dl class="compact"><dt>   <code class="notranslate">checks</code> （ <code class="notranslate">integer</code> ） </dt><dd>  进行的<a hhref="https://nginx.org/en/http/ngx_http_upstream_hc_module.html#health_check">健康检查</a>请求总数。 </dd><dt>   <code class="notranslate">fails</code> （ <code class="notranslate">integer</code> ） </dt><dd>  健康检查失败的次数。 </dd><dt>   <code class="notranslate">unhealthy</code> （ <code class="notranslate">integer</code> ） </dt><dd>  服务器变得不健康的次数（状态“ <code class="notranslate">unhealthy</code> ”）。 </dd><dt>   <code class="notranslate">last_passed</code> （ <code class="notranslate">boolean</code> ） </dt><dd>  布尔值，指示上次运行状况检查请求是否成功并通过了<a hhref="https://nginx.org/en/http/ngx_http_upstream_hc_module.html#match">测试</a> 。 </dd></dl></dd><dt>   <code class="notranslate">downtime</code> （ <code class="notranslate">integer</code> ） </dt><dd>  服务器处于“ <code class="notranslate">unavail</code> ”，“ <code class="notranslate">checking</code> ”和“ <code class="notranslate">unhealthy</code> ”状态的总时间。 </dd><dt>   <code class="notranslate">downstart</code> （ <code class="notranslate">string</code> ） </dt><dd>  服务器变为“ <code class="notranslate">unavail</code> ”，“ <code class="notranslate">checking</code> ”或“ <code class="notranslate">unhealthy</code> ”的时间，采用ISO 8601格式，分辨率为毫秒。 </dd><dt> <code class="notranslate">selected</code> ( <code class="notranslate">string</code> ) </dt><dd> The time when the server was last selected to process a request, in the ISO 8601 format with millisecond resolution. </dd><dt> <code class="notranslate">header_time</code> ( <code class="notranslate">integer</code> ) </dt><dd> The average time to get the <a hhref="https://nginx.org/en/http/ngx_http_upstream_module.html#var_upstream_header_time">response header</a> from the server. </dd><dt> <code class="notranslate">response_time</code> ( <code class="notranslate">integer</code> ) </dt><dd> The average time to get the <a hhref="https://nginx.org/en/http/ngx_http_upstream_module.html#var_upstream_response_time">full response</a> from the server. </dd></dl></dd><dt> <code class="notranslate">keepalive</code> ( <code class="notranslate">integer</code> ) </dt><dd>  当前空闲<a hhref="https://nginx.org/en/http/ngx_http_upstream_module.html#keepalive">keepalive</a>连接数。 </dd><dt> <code class="notranslate">zombies</code> ( <code class="notranslate">integer</code> ) </dt><dd>  从组中删除但仍处理活动客户端请求的当前服务器数。 </dd><dt> <code class="notranslate">zone</code> ( <code class="notranslate">string</code> ) </dt><dd>  保持组配置和运行时状态的共享内存<a hhref="https://nginx.org/en/http/ngx_http_upstream_module.html#zone">区域</a>的名称。 </dd><dt> <code class="notranslate">queue</code> </dt> <dd>  对于请求<a hhref="https://nginx.org/en/http/ngx_http_upstream_module.html#queue">队列</a> ，提供以下数据： <dl class="compact"><dt> <code class="notranslate">size</code> ( <code class="notranslate">integer</code> ) </dt><dd>  队列中当前的请求数。 </dd><dt> <code class="notranslate">max_size</code> ( <code class="notranslate">integer</code> ) </dt><dd>  可以同时在队列中的最大请求数。 </dd><dt> <code class="notranslate">overflows</code> ( <code class="notranslate">integer</code> ) </dt><dd>  由于队列溢出而拒绝的请求总数。 </dd></dl></dd></dl><p>  例： </p><blockquote class="example"><pre class="notranslate">{<br>  “upstream_backend” : {<br>    “peers” : [<br>      {<br>        “id” : 0,<br>        “server” : “10.0.0.1:8088”,<br>        “name” : “10.0.0.1:8088”,<br>        “backup” : false,<br>        “weight” : 5,<br>        “state” : “up”,<br>        “active” : 0,<br>        “max_conns” : 20,<br>        “requests” : 667231,<br>        “header_time” : 20,<br>        “response_time” : 36,<br>        “responses” : {<br>          “1xx” : 0,<br>          “2xx” : 666310,<br>          “3xx” : 0,<br>          “4xx” : 915,<br>          “5xx” : 6,<br>          “total” : 667231<br>        },<br>        “sent” : 251946292,<br>        “received” : 19222475454,<br>        “fails” : 0,<br>        “unavail” : 0,<br>        “health_checks” : {<br>          “checks” : 26214,<br>          “fails” : 0,<br>          “unhealthy” : 0,<br>          “last_passed” : true<br>        },<br>        “downtime” : 0,<br>        “downstart” : “2017-07-07T11:09:21.602Z”,<br>        “selected” : “2017-07-17T15:01:25.000Z”<br>      },<br>      {<br>        “id” : 1,<br>        “server” : “10.0.0.1:8089”,<br>        “name” : “10.0.0.1:8089”,<br>        “backup” : true,<br>        “weight” : 1,<br>        “state” : “unhealthy”,<br>        “active” : 0,<br>        “max_conns” : 20,<br>        “requests” : 0,<br>        “responses” : {<br>          “1xx” : 0,<br>          “2xx” : 0,<br>          “3xx” : 0,<br>          “4xx” : 0,<br>          “5xx” : 0,<br>          “total” : 0<br>        },<br>        “sent” : 0,<br>        “received” : 0,<br>        “fails” : 0,<br>        “unavail” : 0,<br>        “health_checks” : {<br>          “checks” : 26284,<br>          “fails” : 26284,<br>          “unhealthy” : 1,<br>          “last_passed” : false<br>        },<br>        “downtime” : 262925617,<br>        “downstart” : “2017-07-07T11:09:21.602Z”,<br>        “selected” : “2017-07-17T15:01:25.000Z”<br>      }<br>    ],<br>    “keepalive” : 0,<br>    “zombies” : 0,<br>    “zone” : “upstream_backend”<br>  }<br>}</pre></blockquote></li><li id="def_nginx_http_upstream_conf_server"><p> HTTP Upstream Server: </p> Dynamically configurable parameters of an HTTP upstream <a hhref="https://nginx.org/en/http/ngx_http_upstream_module.html#server">server</a> : <dl class="compact"><dt> <code class="notranslate">id</code> ( <code class="notranslate">integer</code> ) </dt><dd> The ID of the HTTP upstream server. The ID is assigned automatically and cannot be changed. </dd><dt> <code class="notranslate">server</code> ( <code class="notranslate">string</code> ) </dt><dd> Same as the <a hhref="https://nginx.org/en/http/ngx_http_upstream_module.html#address">address</a> parameter of the HTTP upstream server.  添加服务器时，可以将其指定为域名。 In this case, changes of the IP addresses that correspond to a domain name will be monitored and automatically applied to the upstream configuration without the need of restarting nginx. This requires the <a hhref="https://nginx.org/en/http/ngx_http_core_module.html#resolver">resolver</a> directive in the “ <code class="notranslate">http</code> ” block. See also the <a hhref="https://nginx.org/en/http/ngx_http_upstream_module.html#resolve">resolve</a> parameter of the HTTP upstream server. </dd><dt> <code class="notranslate">service</code> ( <code class="notranslate">string</code> ) </dt><dd> Same as the <a hhref="https://nginx.org/en/http/ngx_http_upstream_module.html#service">service</a> parameter of the HTTP upstream server. This parameter cannot be changed. </dd><dt> <code class="notranslate">weight</code> ( <code class="notranslate">integer</code> ) </dt><dd> Same as the <a hhref="https://nginx.org/en/http/ngx_http_upstream_module.html#weight">weight</a> parameter of the HTTP upstream server. </dd><dt> <code class="notranslate">max_conns</code> ( <code class="notranslate">integer</code> ) </dt><dd> Same as the <a hhref="https://nginx.org/en/http/ngx_http_upstream_module.html#max_conns">max_conns</a> parameter of the HTTP upstream server. </dd><dt> <code class="notranslate">max_fails</code> ( <code class="notranslate">integer</code> ) </dt><dd> Same as the <a hhref="https://nginx.org/en/http/ngx_http_upstream_module.html#max_fails">max_fails</a> parameter of the HTTP upstream server. </dd><dt> <code class="notranslate">fail_timeout</code> ( <code class="notranslate">string</code> ) </dt><dd> Same as the <a hhref="https://nginx.org/en/http/ngx_http_upstream_module.html#fail_timeout">fail_timeout</a> parameter of the HTTP upstream server. </dd><dt> <code class="notranslate">slow_start</code> ( <code class="notranslate">string</code> ) </dt><dd> Same as the <a hhref="https://nginx.org/en/http/ngx_http_upstream_module.html#slow_start">slow_start</a> parameter of the HTTP upstream server. </dd><dt> <code class="notranslate">route</code> ( <code class="notranslate">string</code> ) </dt><dd> Same as the <a hhref="https://nginx.org/en/http/ngx_http_upstream_module.html#route">route</a> parameter of the HTTP upstream server. </dd><dt> <code class="notranslate">backup</code> ( <code class="notranslate">boolean</code> ) </dt><dd> When <code class="notranslate">true</code> , adds a <a hhref="https://nginx.org/en/http/ngx_http_upstream_module.html#backup">backup</a> server. This parameter cannot be changed. </dd><dt> <code class="notranslate">down</code> ( <code class="notranslate">boolean</code> ) </dt><dd> Same as the <a hhref="https://nginx.org/en/http/ngx_http_upstream_module.html#down">down</a> parameter of the HTTP upstream server. </dd><dt> <code class="notranslate">drain</code> ( <code class="notranslate">boolean</code> ) </dt><dd> Same as the <a hhref="https://nginx.org/en/http/ngx_http_upstream_module.html#drain">drain</a> parameter of the HTTP upstream server. </dd><dt> <code class="notranslate">parent</code> ( <code class="notranslate">string</code> ) </dt><dd> Parent server ID of the resolved server. The ID is assigned automatically and cannot be changed. </dd><dt> <code class="notranslate">host</code> ( <code class="notranslate">string</code> ) </dt><dd> Hostname of the resolved server. The hostname is assigned automatically and cannot be changed. </dd></dl><p>  例： </p><blockquote class="example"><pre class="notranslate">{<br>  “id” : 1,<br>  “server” : “10.0.0.1:8089”,<br>  “weight” : 4,<br>  “max_conns” : 0,<br>  “max_fails” : 0,<br>  “fail_timeout” : “10s”,<br>  “slow_start” : “10s”,<br>  “route” : “”,<br>  “backup” : true,<br>  “down” : true<br>}</pre></blockquote></li><li id="def_nginx_http_keyval_zone"><p> HTTP Keyval Shared Memory Zone: </p> Contents of an HTTP keyval shared memory zone. <p>  例： </p><blockquote class="example"><pre class="notranslate">{<br>  “key1” : “value1”,<br>  “key2” : “value2”,<br>  “key3” : “value3”<br>}</pre></blockquote></li><li id="def_nginx_stream_server_zone"><p> Stream Server Zone: </p><dl class="compact"><dt> <code class="notranslate">processing</code> ( <code class="notranslate">integer</code> ) </dt><dd>  当前正在处理的客户端连接数。 </dd><dt> <code class="notranslate">connections</code> ( <code class="notranslate">integer</code> ) </dt><dd>  从客户端接受的连接总数。 </dd><dt> <code class="notranslate">sessions</code> </dt> <dd> The total number of completed sessions, and the number of sessions completed with status codes “ <code class="notranslate">2xx</code> ”, “ <code class="notranslate">4xx</code> ”, or “ <code class="notranslate">5xx</code> ”. <dl class="compact"><dt> <code class="notranslate">2xx</code> ( <code class="notranslate">integer</code> ) </dt><dd> The total number of sessions completed with <a hhref="https://nginx.org/en/stream/ngx_stream_core_module.html#var_status">status codes</a> “ <code class="notranslate">2xx</code> ”. </dd><dt> <code class="notranslate">4xx</code> ( <code class="notranslate">integer</code> ) </dt><dd> The total number of sessions completed with <a hhref="https://nginx.org/en/stream/ngx_stream_core_module.html#var_status">status codes</a> “ <code class="notranslate">4xx</code> ”. </dd><dt> <code class="notranslate">5xx</code> ( <code class="notranslate">integer</code> ) </dt><dd> The total number of sessions completed with <a hhref="https://nginx.org/en/stream/ngx_stream_core_module.html#var_status">status codes</a> “ <code class="notranslate">5xx</code> ”. </dd><dt> <code class="notranslate">total</code> ( <code class="notranslate">integer</code> ) </dt><dd>  已完成的客户会话总数。 </dd></dl></dd><dt> <code class="notranslate">discarded</code> ( <code class="notranslate">integer</code> ) </dt><dd>  在不创建会话的情况下完成的连接总数。 </dd><dt> <code class="notranslate">received</code> ( <code class="notranslate">integer</code> ) </dt><dd>  从客户端收到的总字节数。 </dd><dt> <code class="notranslate">sent</code> ( <code class="notranslate">integer</code> ) </dt><dd>  发送给客户端的总字节数。 </dd></dl><p>  例： </p><blockquote class="example"><pre class="notranslate">{<br>  “dns” : {<br>    “processing” : 1,<br>    “connections” : 155569,<br>    “sessions” : {<br>      “2xx” : 155564,<br>      “4xx” : 0,<br>      “5xx” : 0,<br>      “total” : 155569<br>    },<br>    “discarded” : 0,<br>    “received” : 4200363,<br>    “sent” : 20489184<br>  }<br>}</pre></blockquote></li><li id="def_nginx_stream_upstream"><p> Stream Upstream: </p><dl class="compact"><dt> <code class="notranslate">peers</code> </dt> <dd> An array of: <dl class="compact"><dt> <code class="notranslate">id</code> ( <code class="notranslate">integer</code> ) </dt><dd>  服务器的ID。 </dd><dt> <code class="notranslate">server</code> ( <code class="notranslate">string</code> ) </dt><dd>  服务器的<a hhref="https://nginx.org/en/stream/ngx_stream_upstream_module.html#server">地址</a> 。 </dd><dt> <code class="notranslate">service</code> ( <code class="notranslate">string</code> ) </dt><dd>   <a hhref="https://nginx.org/en/stream/ngx_stream_upstream_module.html#server">server</a>指令的<a hhref="https://nginx.org/en/stream/ngx_stream_upstream_module.html#service">服务</a>参数值。 </dd><dt> <code class="notranslate">name</code> ( <code class="notranslate">string</code> ) </dt><dd>   <a hhref="https://nginx.org/en/stream/ngx_stream_upstream_module.html#server">server</a>指令中指定的<a hhref="https://nginx.org/en/stream/ngx_stream_upstream_module.html#server">服务器</a>名称。 </dd><dt> <code class="notranslate">backup</code> ( <code class="notranslate">boolean</code> ) </dt><dd>  一个布尔值，指示服务器是否为<a hhref="https://nginx.org/en/stream/ngx_stream_upstream_module.html#backup">备份</a>服务器。 </dd><dt> <code class="notranslate">weight</code> ( <code class="notranslate">integer</code> ) </dt><dd>  服务器的<a hhref="https://nginx.org/en/stream/ngx_stream_upstream_module.html#weight">重量</a> 。 </dd><dt> <code class="notranslate">state</code> ( <code class="notranslate">string</code> ) </dt><dd>  当前状态，可以是“ <code class="notranslate">up</code> ”，“ <code class="notranslate">down</code> ”，“ <code class="notranslate">unavail</code> ”，“ <code class="notranslate">checking</code> ”或“ <code class="notranslate">unhealthy</code> ”之一。 </dd><dt> <code class="notranslate">active</code> ( <code class="notranslate">integer</code> ) </dt><dd>  当前的连接数。 </dd><dt> <code class="notranslate">max_conns</code> ( <code class="notranslate">integer</code> ) </dt><dd>  服务器的<a hhref="https://nginx.org/en/stream/ngx_stream_upstream_module.html#max_conns">max_conns</a>限制。 </dd><dt> <code class="notranslate">connections</code> ( <code class="notranslate">integer</code> ) </dt><dd>  转发到此服务器的客户端连接总数。 </dd><dt> <code class="notranslate">connect_time</code> ( <code class="notranslate">integer</code> ) </dt><dd>  连接上游服务器的平均时间。 </dd><dt> <code class="notranslate">first_byte_time</code> ( <code class="notranslate">integer</code> ) </dt><dd>  接收第一个数据字节的平均时间。 </dd><dt> <code class="notranslate">response_time</code> ( <code class="notranslate">integer</code> ) </dt><dd>  接收最后一个数据字节的平均时间。 </dd><dt> <code class="notranslate">sent</code> ( <code class="notranslate">integer</code> ) </dt><dd>  发送到此服务器的总字节数。 </dd><dt> <code class="notranslate">received</code> ( <code class="notranslate">integer</code> ) </dt><dd>  从此服务器接收的总字节数。 </dd><dt> <code class="notranslate">fails</code> ( <code class="notranslate">integer</code> ) </dt><dd>  与服务器通信失败的总次数。 </dd><dt> <code class="notranslate">unavail</code> ( <code class="notranslate">integer</code> ) </dt><dd>  由于尝试达到<a hhref="https://nginx.org/en/stream/ngx_stream_upstream_module.html#max_fails">max_fails</a>阈值的次数不成功，服务器无法进行客户端连接（状态为“ <code class="notranslate">unavail</code> ”）的次数。 </dd><dt> <code class="notranslate">health_checks</code> </dt> <dd><dl class="compact"><dt> <code class="notranslate">checks</code> ( <code class="notranslate">integer</code> ) </dt><dd>  进行的<a hhref="https://nginx.org/en/stream/ngx_stream_upstream_hc_module.html#health_check">健康检查</a>请求总数。 </dd><dt> <code class="notranslate">fails</code> ( <code class="notranslate">integer</code> ) </dt><dd>  健康检查失败的次数。 </dd><dt> <code class="notranslate">unhealthy</code> ( <code class="notranslate">integer</code> ) </dt><dd>  服务器变得不健康的次数（状态“ <code class="notranslate">unhealthy</code> ”）。 </dd><dt> <code class="notranslate">last_passed</code> ( <code class="notranslate">boolean</code> ) </dt><dd> Boolean indicating whether the last health check request was successful and passed <a hhref="https://nginx.org/en/stream/ngx_stream_upstream_hc_module.html#match">tests</a> . </dd></dl></dd><dt> <code class="notranslate">downtime</code> ( <code class="notranslate">integer</code> ) </dt><dd>  服务器处于“ <code class="notranslate">unavail</code> ”，“ <code class="notranslate">checking</code> ”和“ <code class="notranslate">unhealthy</code> ”状态的总时间。 </dd><dt> <code class="notranslate">downstart</code> ( <code class="notranslate">string</code> ) </dt><dd> The time when the server became “ <code class="notranslate">unavail</code> ”, “ <code class="notranslate">checking</code> ”, or “ <code class="notranslate">unhealthy</code> ”, in the ISO 8601 format with millisecond resolution. </dd><dt> <code class="notranslate">selected</code> ( <code class="notranslate">string</code> ) </dt><dd> The time when the server was last selected to process a connection, in the ISO 8601 format with millisecond resolution. </dd></dl></dd><dt> <code class="notranslate">zombies</code> ( <code class="notranslate">integer</code> ) </dt><dd>  当前从组中删除但仍处理活动客户端连接的服务器数。 </dd><dt> <code class="notranslate">zone</code> ( <code class="notranslate">string</code> ) </dt><dd>  保持组配置和运行时状态的共享内存<a hhref="https://nginx.org/en/stream/ngx_stream_upstream_module.html#zone">区域</a>的名称。 </dd></dl><p>  例： </p><blockquote class="example"><pre class="notranslate">{<br>  “dns” : {<br>    “peers” : [<br>      {<br>        “id” : 0,<br>        “server” : “10.0.0.1:12347”,<br>        “name” : “10.0.0.1:12347”,<br>        “backup” : false,<br>        “weight” : 5,<br>        “state” : “up”,<br>        “active” : 0,<br>        “max_conns” : 50,<br>        “connections” : 667231,<br>        “sent” : 251946292,<br>        “received” : 19222475454,<br>        “fails” : 0,<br>        “unavail” : 0,<br>        “health_checks” : {<br>          “checks” : 26214,<br>          “fails” : 0,<br>          “unhealthy” : 0,<br>          “last_passed” : true<br>        },<br>        “downtime” : 0,<br>        “downstart” : “2017-07-07T11:09:21.602Z”,<br>        “selected” : “2017-07-17T15:01:25.000Z”<br>      },<br>      {<br>        “id” : 1,<br>        “server” : “10.0.0.1:12348”,<br>        “name” : “10.0.0.1:12348”,<br>        “backup” : true,<br>        “weight” : 1,<br>        “state” : “unhealthy”,<br>        “active” : 0,<br>        “max_conns” : 50,<br>        “connections” : 0,<br>        “sent” : 0,<br>        “received” : 0,<br>        “fails” : 0,<br>        “unavail” : 0,<br>        “health_checks” : {<br>          “checks” : 26284,<br>          “fails” : 26284,<br>          “unhealthy” : 1,<br>          “last_passed” : false<br>        },<br>        “downtime” : 262925617,<br>        “downstart” : “2017-07-07T11:09:21.602Z”,<br>        “selected” : “2017-07-17T15:01:25.000Z”<br>      }<br>    ],<br>    “zombies” : 0,<br>    “zone” : “dns”<br>  }<br>}</pre></blockquote></li><li id="def_nginx_stream_upstream_conf_server"><p> Stream Upstream Server: </p> Dynamically configurable parameters of a stream upstream <a hhref="https://nginx.org/en/stream/ngx_stream_upstream_module.html#server">server</a> : <dl class="compact"><dt> <code class="notranslate">id</code> ( <code class="notranslate">integer</code> ) </dt><dd> The ID of the stream upstream server. The ID is assigned automatically and cannot be changed. </dd><dt> <code class="notranslate">server</code> ( <code class="notranslate">string</code> ) </dt><dd> Same as the <a hhref="https://nginx.org/en/stream/ngx_stream_upstream_module.html#server">address</a> parameter of the stream upstream server.  添加服务器时，可以将其指定为域名。 In this case, changes of the IP addresses that correspond to a domain name will be monitored and automatically applied to the upstream configuration without the need of restarting nginx. This requires the <a hhref="https://nginx.org/en/stream/ngx_stream_core_module.html#resolver">resolver</a> directive in the “ <code class="notranslate">stream</code> ” block. See also the <a hhref="https://nginx.org/en/stream/ngx_stream_upstream_module.html#resolve">resolve</a> parameter of the stream upstream server. </dd><dt> <code class="notranslate">service</code> ( <code class="notranslate">string</code> ) </dt><dd> Same as the <a hhref="https://nginx.org/en/stream/ngx_stream_upstream_module.html#service">service</a> parameter of the stream upstream server. This parameter cannot be changed. </dd><dt> <code class="notranslate">weight</code> ( <code class="notranslate">integer</code> ) </dt><dd> Same as the <a hhref="https://nginx.org/en/stream/ngx_stream_upstream_module.html#weight">weight</a> parameter of the stream upstream server. </dd><dt> <code class="notranslate">max_conns</code> ( <code class="notranslate">integer</code> ) </dt><dd> Same as the <a hhref="https://nginx.org/en/stream/ngx_stream_upstream_module.html#max_conns">max_conns</a> parameter of the stream upstream server. </dd><dt> <code class="notranslate">max_fails</code> ( <code class="notranslate">integer</code> ) </dt><dd> Same as the <a hhref="https://nginx.org/en/stream/ngx_stream_upstream_module.html#max_fails">max_fails</a> parameter of the stream upstream server. </dd><dt> <code class="notranslate">fail_timeout</code> ( <code class="notranslate">string</code> ) </dt><dd> Same as the <a hhref="https://nginx.org/en/stream/ngx_stream_upstream_module.html#fail_timeout">fail_timeout</a> parameter of the stream upstream server. </dd><dt> <code class="notranslate">slow_start</code> ( <code class="notranslate">string</code> ) </dt><dd> Same as the <a hhref="https://nginx.org/en/stream/ngx_stream_upstream_module.html#slow_start">slow_start</a> parameter of the stream upstream server. </dd><dt> <code class="notranslate">backup</code> ( <code class="notranslate">boolean</code> ) </dt><dd> When <code class="notranslate">true</code> , adds a <a hhref="https://nginx.org/en/stream/ngx_stream_upstream_module.html#backup">backup</a> server. This parameter cannot be changed. </dd><dt> <code class="notranslate">down</code> ( <code class="notranslate">boolean</code> ) </dt><dd> Same as the <a hhref="https://nginx.org/en/stream/ngx_stream_upstream_module.html#down">down</a> parameter of the stream upstream server. </dd><dt> <code class="notranslate">parent</code> ( <code class="notranslate">string</code> ) </dt><dd> Parent server ID of the resolved server. The ID is assigned automatically and cannot be changed. </dd><dt> <code class="notranslate">host</code> ( <code class="notranslate">string</code> ) </dt><dd> Hostname of the resolved server. The hostname is assigned automatically and cannot be changed. </dd></dl><p>  例： </p><blockquote class="example"><pre class="notranslate">{<br>  “id” : 0,<br>  “server” : “10.0.0.1:12348”,<br>  “weight” : 1,<br>  “max_conns” : 0,<br>  “max_fails” : 1,<br>  “fail_timeout” : “10s”,<br>  “slow_start” : 0,<br>  “backup” : false,<br>  “down” : false<br>}</pre></blockquote></li><li id="def_nginx_stream_keyval_zone"><p> Stream Keyval Shared Memory Zone: </p> Contents of a stream keyval shared memory zone. <p>  例： </p><blockquote class="example"><pre class="notranslate">{<br>  “key1” : “value1”,<br>  “key2” : “value2”,<br>  “key3” : “value3”<br>}</pre></blockquote></li><li id="def_nginx_stream_zone_sync"><p> Stream Zone Sync Node: </p><dl class="compact"><dt> <code class="notranslate">zones</code> </dt> <dd><p> Synchronization information per each shared memory zone. </p><p> A collection of “ <a hhref="#def_nginx_stream_zone_sync_zone">Sync Zone</a> “ objects </p></dd><dt> <code class="notranslate">status</code> </dt> <dd> Synchronization information per node in a cluster. <dl class="compact"><dt> <code class="notranslate">bytes_in</code> ( <code class="notranslate">integer</code> ) </dt><dd> The number of bytes received by this node. </dd><dt> <code class="notranslate">msgs_in</code> ( <code class="notranslate">integer</code> ) </dt><dd> The number of messages received by this node. </dd><dt> <code class="notranslate">msgs_out</code> ( <code class="notranslate">integer</code> ) </dt><dd> The number of messages sent by this node. </dd><dt> <code class="notranslate">bytes_out</code> ( <code class="notranslate">integer</code> ) </dt><dd> The number of bytes sent by this node. </dd><dt> <code class="notranslate">nodes_online</code> ( <code class="notranslate">integer</code> ) </dt><dd> The number of peers this node is connected to. </dd></dl></dd></dl><p>  例： </p><blockquote class="example"><pre class="notranslate">{<br>  “zones” : {<br>    “zone1” : {<br>      “records_pending” : 2061,<br>      “records_total” : 260575<br>    },<br>    “zone2” : {<br>      “records_pending” : 0,<br>      “records_total” : 14749<br>    }<br>  },<br>  “status” : {<br>    “bytes_in” : 1364923761,<br>    “msgs_in” : 337236,<br>    “msgs_out” : 346717,<br>    “bytes_out” : 1402765472,<br>    “nodes_online” : 15<br>  }<br>}</pre></blockquote></li><li id="def_nginx_stream_zone_sync_zone"><p> Sync Zone: </p> Synchronization status of a shared memory zone. <dl class="compact"><dt> <code class="notranslate">records_pending</code> ( <code class="notranslate">integer</code> ) </dt><dd> The number of records that need to be sent to the cluster. </dd><dt> <code class="notranslate">records_total</code> ( <code class="notranslate">integer</code> ) </dt><dd> The total number of records stored in the shared memory zone. </dd></dl></li><li id="def_nginx_error"><p>  错误： </p> nginx error object. <dl class="compact"><dt> <code class="notranslate">path</code> ( <code class="notranslate">string</code> ) </dt><dd> API path. </dd><dt> <code class="notranslate">method</code> ( <code class="notranslate">string</code> ) </dt><dd> HTTP method. </dd><dt> <code class="notranslate">error</code> </dt> <dd><dl class="compact"><dt> <code class="notranslate">status</code> ( <code class="notranslate">integer</code> ) </dt><dd> HTTP error code. </dd><dt> <code class="notranslate">text</code> ( <code class="notranslate">string</code> ) </dt><dd> Error description. </dd><dt> <code class="notranslate">code</code> ( <code class="notranslate">string</code> ) </dt><dd> Internal nginx error code. </dd></dl></dd><dt> <code class="notranslate">request_id</code> ( <code class="notranslate">string</code> ) </dt><dd> The ID of the request, equals the value of the <a hhref="https://nginx.org/en/http/ngx_http_core_module.html#var_request_id">$request_id</a> variable. </dd><dt> <code class="notranslate">href</code> ( <code class="notranslate">string</code> ) </dt><dd> Link to reference documentation. </dd></dl></li></p><p></p> <p></p>
</td></tr></tbody></table></div></td></tr></tbody></table></div>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nginx.im/ngx/http/ngx_http_addition_module.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="IM.NGINX">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="IM.NGINX">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/ngx/http/ngx_http_addition_module.html" itemprop="url">未命名</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-21T16:09:50+08:00">
                2018年12月21日
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p></p><h2 class="notranslate">Module ngx_http_addition_module</h2><table width="100%"><tbody><tr><td align="left" class="notranslate"> <a hhref="#example">Example Configuration</a> <br> <a hhref="#directives">Directives</a> <br>     <a hhref="#add_before_body">add_before_body</a> <br>     <a hhref="#add_after_body">add_after_body</a> <br>     <a hhref="#addition_types">addition_types</a> <br></td></tr></tbody></table><a name="summary"></a><p>   <code class="notranslate">ngx_http_addition_module</code>模块是一个过滤器，用于在响应之前和之后添加文本。  默认情况下不构建此模块，应使用<code class="notranslate">–with-http_addition_module</code>配置参数启用它。 </p><a name="example"></a><center><h4>  示例配置 </h4></center><p></p><blockquote class="example"><pre class="notranslate">location / {<br>    add_before_body /before_action;<br>    add_after_body  /after_action;<br>}<br></pre></blockquote><p></p><a name="directives"></a><center><h4>  指令 </h4></center><a name="add_before_body"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>add_before_body</strong> <code class="notranslate"><i>uri</i></code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><p></p>
<pre><code>—

    &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Context:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
&lt;code class=&quot;notranslate&quot;&gt;http&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;server&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;location&lt;/code&gt; &lt;br&gt;
    &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p&gt;  添加由于在响应主体之前处理给定子请求而返回的文本。  作为参数的空字符串（ &lt;code class=&quot;notranslate&quot;&gt;&quot;&quot;&lt;/code&gt; ）取消从先前配置级别继承的添加。 &lt;/p&gt;&lt;a name=&quot;add_after_body&quot;&gt;&lt;/a&gt;&lt;div class=&quot;directive&quot;&gt;&lt;table cellspacing=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Syntax:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
&lt;code class=&quot;notranslate&quot;&gt;&lt;strong&gt;add_after_body&lt;/strong&gt; &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;uri&lt;/i&gt;&lt;/code&gt; ;&lt;/code&gt; &lt;br&gt;
    &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Default:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;

—

    &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Context:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
&lt;code class=&quot;notranslate&quot;&gt;http&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;server&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;location&lt;/code&gt; &lt;br&gt;
    &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p&gt;  添加由于在响应主体之后处理给定子请求而返回的文本。  作为参数的空字符串（ &lt;code class=&quot;notranslate&quot;&gt;&quot;&quot;&lt;/code&gt; ）取消从先前配置级别继承的添加。 &lt;/p&gt;&lt;a name=&quot;addition_types&quot;&gt;&lt;/a&gt;&lt;div class=&quot;directive&quot;&gt;&lt;table cellspacing=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Syntax:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
&lt;code class=&quot;notranslate&quot;&gt;&lt;strong&gt;addition_types&lt;/strong&gt; &lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;mime-type&lt;/i&gt;&lt;/code&gt; ...;&lt;/code&gt; &lt;br&gt;
    &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Default:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
&lt;pre class=&quot;notranslate&quot;&gt;addition_types text/html;&lt;/pre&gt;
    &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
Context:
    &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
&lt;code class=&quot;notranslate&quot;&gt;http&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;server&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;location&lt;/code&gt; &lt;br&gt;
    &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;  该指令出现在0.7.9版本中。 &lt;/p&gt;&lt;/div&gt;&lt;p&gt;  除了“ &lt;code class=&quot;notranslate&quot;&gt;text/html&lt;/code&gt; ”之外，还允许在具有指定MIME类型的响应中添加文本。  特殊值“ &lt;code class=&quot;notranslate&quot;&gt;*&lt;/code&gt; ”匹配任何MIME类型（0.8.29）。 &lt;/p&gt; 
</code></pre><p><span></span><div style="display: none;"></div></p>
</td></tr></tbody></table></div>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nginx.im/ngx/http/ngx_http_access_module.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="IM.NGINX">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="IM.NGINX">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/ngx/http/ngx_http_access_module.html" itemprop="url">未命名</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-21T16:09:50+08:00">
                2018年12月21日
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p></p><h2 class="notranslate">Module ngx_http_access_module</h2><table width="100%"><tbody><tr><td align="left" class="notranslate"> <a hhref="#example">Example Configuration</a> <br> <a hhref="#directives">Directives</a> <br>     <a hhref="#allow">allow</a> <br>     <a hhref="#deny">deny</a> <br></td></tr></tbody></table><a name="summary"></a><p>   <code class="notranslate">ngx_http_access_module</code>模块允许限制对某些客户端地址的访问。 </p><p>  访问也可以通过<a hhref="ngx_http_auth_basic_module.html">密码</a> ， <a hhref="ngx_http_auth_request_module.html">子请求</a>的<a hhref="ngx_http_auth_request_module.html">结果</a>或<a hhref="ngx_http_auth_jwt_module.html">JWT来限制</a> 。  通过地址和密码同时限制访问由<a hhref="ngx_http_core_module.html#satisfy">satisf</a>指令控制。 </p><a name="example"></a><center><h4>  示例配置 </h4></center><p></p><blockquote class="example"><pre class="notranslate">location / {<br>    deny  192.168.1.1;<br>    allow 192.168.1.0/24;<br>    allow 10.1.1.0/16;<br>    allow 2001:0db8::/32;<br>    deny  all;<br>}<br></pre></blockquote><p></p><p>  按顺序检查规则，直到找到第一个匹配项。  在此示例中，仅允许IPv4网络<code class="notranslate">10.1.1.0/16</code>和<code class="notranslate">192.168.1.0/24</code>不包括地址<code class="notranslate">192.168.1.1</code> ）和IPv6网络<code class="notranslate">2001:0db8::/32</code> 。  如果有很多规则，最好使用<a hhref="ngx_http_geo_module.html">ngx_http_geo_module</a>模块变量。 </p><a name="directives"></a><center><h4>  指令 </h4></center><a name="allow"></a><div class="directive"><table cellspacing="0"><tbody><tr><th class="notranslate"><br>            Syntax:<br>                </th><td class="notranslate"><br>            <code class="notranslate"><strong>allow</strong><br>    <code class="notranslate"><i>address</i></code> |<br>    <code class="notranslate"><i>CIDR</i></code> |<br>    <code class="notranslate">unix:</code> |<br>    <code class="notranslate">all</code> ;</code> <br><br>                </td></tr><tr><th class="notranslate"><br>            Default:<br>                </th><td class="notranslate"><p></p>
<pre><code>        —

            &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
        Context:
            &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
        &lt;code class=&quot;notranslate&quot;&gt;http&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;server&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;location&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;limit_except&lt;/code&gt; &lt;br&gt;
            &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p&gt;  允许访问指定的网络或地址。  如果指定了特殊值&lt;code class=&quot;notranslate&quot;&gt;unix:&lt;/code&gt; （1.5.1），则允许访问所有UNIX域套接字。 &lt;/p&gt;&lt;a name=&quot;deny&quot;&gt;&lt;/a&gt;&lt;div class=&quot;directive&quot;&gt;&lt;table cellspacing=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
        Syntax:
            &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
        &lt;code class=&quot;notranslate&quot;&gt;&lt;strong&gt;deny&lt;/strong&gt; 
&lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;address&lt;/i&gt;&lt;/code&gt; |
&lt;code class=&quot;notranslate&quot;&gt;&lt;i&gt;CIDR&lt;/i&gt;&lt;/code&gt; |
&lt;code class=&quot;notranslate&quot;&gt;unix:&lt;/code&gt; |
&lt;code class=&quot;notranslate&quot;&gt;all&lt;/code&gt; ;&lt;/code&gt; &lt;br&gt;
            &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
        Default:
            &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;

        —

            &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th class=&quot;notranslate&quot;&gt;
        Context:
            &lt;/th&gt;&lt;td class=&quot;notranslate&quot;&gt;
        &lt;code class=&quot;notranslate&quot;&gt;http&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;server&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;location&lt;/code&gt; , &lt;code class=&quot;notranslate&quot;&gt;limit_except&lt;/code&gt; &lt;br&gt;
            &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p&gt;  拒绝访问指定的网络或地址。  如果指定了特殊值&lt;code class=&quot;notranslate&quot;&gt;unix:&lt;/code&gt; （1.5.1），则拒绝所有UNIX域套接字的访问。 &lt;/p&gt; 
</code></pre><p><span></span><div style="display: none;"></div></p>
</td></tr></tbody></table></div>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/8/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" href="/page/10/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.gif"
                alt="IM.NGINX" />
            
              <p class="site-author-name" itemprop="name">IM.NGINX</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">153</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">31</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">IM.NGINX</span>

  
</div>



     <p>Hosted by <a href="https://pages.coding.me" style="font-weight: bold">Coding Pages</a></p>







        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  







  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three.min.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/canvas_lines.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
